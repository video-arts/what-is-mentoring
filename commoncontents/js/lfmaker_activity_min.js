var Netex=Netex||{};Netex.Activity=Netex.Activity||{};Netex.Activity.Collection=Netex.Activity.Collection||{};Netex.Activity.Model=Netex.Activity.Model||{};Netex.Activity.View=Netex.Activity.View||{};Netex.Activity.Instance=Netex.Activity.Instance||{};
Netex.Activity.Collection.BaseCollection=Backbone.Collection.extend({initialize:function(){this._attributes={}},attr:function(b,a){if(a===undefined){return this._attributes[b]}else{this._attributes[b]=a;this.trigger("change:"+b,a)}}});
Netex.Activity.Model.BaseModel=Backbone.Model.extend({id:null,el:null,stateResetOrResponse:null,stateShowedResponsesOrSolutions:null,initialize:function(){this.set("el",document.getElementById(this.id));this.trigger("initalized")},insureNumber:function(b,a){var a=!this.isNumber(a)?0:a;return !this.isNumber(b)?a:parseFloat(b)},isNumber:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},isBoolean:function(a){return typeof a==="boolean"},roundTo:function(b,a){if(!this.insureNumber(b)){return 0}return b%1!=0?parseFloat(b).toFixed(2):b},arrayToString:function(c,b){var b=b?b:"_";var a="";_.each(c,function(e,d){a+=e+b});if(c.length!=""){a=a.slice(a,-Math.abs(b.length))}return a},extractPropertyToArray:function(c,b){var a=[];_.each(c,function(e,d){a.push(e.get(b))});return a},extractPropertiesToChoices:function(a,d,c){var b=[];_.each(a,function(f,e){var h={};h.id=f.get(d);var g={};g.und=f.get(c);h.description=g;b.push(h)});return b},html_entity_decode:function(f){try{var a=document.createElement("textarea");a.innerHTML=f;return a.value}catch(b){}try{var c=document.createElement("div");c.innerHTML=f.replace(/</g,"&lt;").replace(/>/g,"&gt;");if(typeof c.innerText!="undefined"){return c.innerText}}catch(b){}}});
Netex.Activity.Model.BottomBarModel=Netex.Activity.Model.BaseModel.extend({testModel:null,defaults:{stateShowedResponsesOrSolutions:null},initialize:function(){Netex.Activity.Model.BaseModel.prototype.initialize.call(this);var a=this;this.on("change:testModel",function(){this.listenTo(this.get("testModel"),"init",function(){a.changeScoreCounter();this.get("testModel").get("itemTestCollection").each(function(c){a.listenTo(c,"change:passed",function(){a.onPassedItemTest()});a.listenTo(c,"check",function(){a.onCheckItemTest(c)});a.listenTo(c,"loaded",function(){if(c.isEnabledForAttemps()){if(c.get("stateResetOrResponse")=="responsed"){a.trigger("exerciseWithAttemptsDoingStarted")}else{a.trigger("exerciseNotAttemptsDoingStarted")}}else{if(c.get("attemptsDoings")!=0){a.trigger("endedActualExercise")}}})});var b=this.get("testModel").get("itemTestCollection").at(0);if(b.get("isExercise")==false){this.trigger("endedActualExercise")}else{if(b.get("attemptsDoings")>0){this.onCheckItemTest(b)}}})})},response:function(){this.get("testModel").getItemTestLoaded().set("showingLastTrack",false);this.trigger("response")},showSolutions:function(){this.trigger("showSolutions")},showMyResponses:function(){this.trigger("showMyResponses")},showFinalFeedback:function(){this.trigger("showFinalFeedback")},hideFinalFeedback:function(){this.trigger("hideFinalFeedback")},reset:function(){this.trigger("reset")},onPassedItemTest:function(){},onCheckItemTest:function(a){if(!a.isEnabledForAttemps()){if(a.get("attemptsDoings")!=0){this.trigger("endedActualExercise")}}else{this.trigger("initedWithMoreTries")}var b=this.getTestComplete();if(b){this.trigger("endedExercises")}this.changeScoreCounter()},getTestComplete:function(){var b=true;var a;if(Netex&&Netex.Activity&&Netex.Activity.Singleton&&!_.isEmpty(Netex.Activity.Singleton.StateInitQuizzes)&&Netex.Activity.Singleton.StateInitQuizzes[this.get("testModel").get("id")]&&Netex.Activity.Singleton.StateInitQuizzes[this.get("testModel").get("id")].ids_ordered){_.each(Netex.Activity.Singleton.StateInitQuizzes[this.get("testModel").get("id")].ids_ordered,function(d,c){var e=this.get("testModel").get("itemTestCollection").where({id:d});if(e.length){a=_.first(e);if(a.get("evaluable")!=false&&a.isEnabledForAttemps()&&a.get("shouldntShow")!=true&&a.get("isExercise")==true){b=false}else{if(a.get("evaluable")==false&&a.get("passed")!=true&&a.get("shouldntShow")!=true&&a.get("isExercise")==true){b=false}}}},this)}else{this.get("testModel").get("itemTestCollection").each(function(c){if(c.get("evaluable")!=false&&c.isEnabledForAttemps()&&c.get("shouldntShow")!=true&&c.get("isExercise")==true){b=false}else{if(c.get("evaluable")==false&&c.get("passed")!=true&&c.get("shouldntShow")!=true&&c.get("isExercise")==true){b=false}}})}return b},changeScoreCounter:function(){this.trigger("changeScoreCounter")},getPartialScore:function(){return this.get("testModel").getPartialScore()},getNumExercises:function(){return this.get("testModel").getSize()},getNumExercisesCorrect:function(){return this.get("testModel").getSizePassed()}});
Netex.Activity.Model.PaginatorBaseModel=Netex.Activity.Model.BaseModel.extend({testModel:null,itemTestLoaded:null,initialize:function(a){this.on("change:itemTestLoaded",function(c,b){b.trigger("loaded");if(this.previous("itemTestLoaded")!=undefined){this.previous("itemTestLoaded").trigger("unloaded")}});this.on("change:testModel",function(b,c){this.listenTo(this.get("testModel"),"back",this.previousItemTest);this.listenTo(this.get("testModel"),"forward",this.nextItemTest)})},showItemTest:function(a){this.transitionTo(a);this.set("itemTestLoaded",a)},nextItemTest:function(){if(this.isLastItemTest(this.get("itemTestLoaded"))){return}var a=this.get("testModel").get("itemTestCollection").at(this.getIndexOfItemTest(this.get("itemTestLoaded"))+1);this.transitionTo(a);this.set("itemTestLoaded",a)},previousItemTest:function(){if(this.isFirstItemTest(this.get("itemTestLoaded"))){return}var a=this.get("testModel").get("itemTestCollection").at(this.getIndexOfItemTest(this.get("itemTestLoaded"))-1);this.transitionTo(a);this.set("itemTestLoaded",a)},reloadTest:function(){var a=this.get("testModel").get("itemTestCollection").at(0);this.transitionTo(a);this.set("itemTestLoaded",a)},isLastItemTest:function(a){if(this.getIndexOfItemTest(a)==_.size(this.get("testModel").get("itemTestCollection"))-1){return true}return false},isFirstItemTest:function(a){if(this.getIndexOfItemTest(a)==0){return true}return false},getIndexOfItemTest:function(a){return this.get("testModel").get("itemTestCollection").indexOf(a)},getIndexOfItemTestLoaded:function(){return this.getIndexOfItemTest(this.get("itemTestLoaded"))},loadItemTestByIndex:function(a){this.showItemTest(this.get("testModel").get("itemTestCollection").at(a))}});
Netex.Activity.Model.SimpleItemTestPaginator=Netex.Activity.Model.PaginatorBaseModel.extend({initialize:function(){Netex.Activity.Model.PaginatorBaseModel.prototype.initialize.call(this);this.on("change:itemTestLoaded",function(){this.changeCounter(this.get("itemTestLoaded"))});var a=this;this.on("change:testModel",function(){this.listenToOnce(this.get("testModel").get("itemTestCollection"),"add",function(b){this.showItemTest(b);this.listenTo(this.get("testModel").get("itemTestCollection"),"add",function(c){a.trigger("hideItemTest",{idObj:c.get("id")});this.changeCounter(this.get("itemTestLoaded"));if(this.get("testModel").get("itemTestCollection").length>1){this.trigger("showNavigatorPages")}})})})},transitionTo:function(a){var b=this;this.get("testModel").get("itemTestCollection").each(function(c){if(a!=c){b.hideItem(c)}});b.showItem(a)},hideItem:function(a){this.trigger("hideItemTest",{idObj:a.get("id")})},showItem:function(a){this.trigger("showItemTest",{idObj:a.get("id")})},changeCounter:function(a){var c=this.get("testModel").get("itemTestCollection").indexOf(a)+1;var d=this.get("testModel").getSize();var b=c.toString()+" / "+d.toString();this.trigger("isLast",{points:b});this.trigger("setCounter",{points:b,isFirst:(c==1),isLast:(c==d)});this.trigger("setRelativePoints",{points:this.roundTo(a.getRelativeScoreNormalized(),2)})},back:function(){this.trigger("back")},forward:function(){this.trigger("forward")},isInLastModel:function(){},isInFirstModel:function(){}});
Netex.Activity.Model.ItemTrackingModel=Netex.Activity.Model.BaseModel.extend({defaults:{trackingModel:null,itemTest:null,relativeScoreNormalized:null,partialScore:null,elItemTestRelativeScoreNormalized:null,elItemTestPartialScore:null,elItemTestTitle:null,elItemTestStatusIcon:null},initialize:function(){Netex.Activity.Model.BaseModel.prototype.initialize.call(this);this.on("change:itemTest",function(){this.setScore();this.listenTo(this.get("itemTest"),"change:passed",this.setScore);this.listenTo(this.get("itemTest"),"change:relativeScoreRaw",this.setScore);this.listenTo(this.get("itemTest").get("testModel"),"finish",this.setScore)})},setScore:function(){var b=this.get("itemTest").getRelativeScoreNormalized();this.set("relativeScoreNormalized",b);$(this.get("elItemTestRelativeScoreNormalized")).html(this.roundTo(b,2));var a=this.get("itemTest").getPartialScore();this.set("partialScore",a);$(this.get("elItemTestPartialScore")).html(Math.round(this.roundTo(a,2)*100)/100);if(typeof this.get("itemTest").get("passed")=="undefined"){$(this.get("elItemTestStatusIcon")).removeClass("lcm-tracking-icon-fail").removeClass("lcm-tracking-icon-ok").addClass("lcm-tracking-icon-progress")}else{if(this.get("itemTest").get("passed")===true){$(this.get("elItemTestStatusIcon")).removeClass("lcm-tracking-icon-fail").removeClass("lcm-tracking-icon-progress").addClass("lcm-tracking-icon-ok")}else{if(this.get("itemTest").get("passed")===false){$(this.get("elItemTestStatusIcon")).removeClass("lcm-tracking-icon-ok").removeClass("lcm-tracking-icon-progress").addClass("lcm-tracking-icon-fail")}else{$(this.get("elItemTestStatusIcon")).removeClass("lcm-tracking-icon-fail").removeClass("lcm-tracking-icon-ok").addClass("lcm-tracking-icon-progress")}}}}});
Netex.Activity.Model.TrackingModel=Netex.Activity.Model.BaseModel.extend({testModel:null,itemTrackingCollection:null,initialize:function(){var a=this;this.set("itemTrackingCollection",new Netex.Activity.Collection.BaseCollection());this.listenTo(this.get("itemTrackingCollection"),"add",function(b){b.set("trackingModel",this);a.listenTo(b,"change",a.changeItemTrackingModel)});this.on("change:testModel",function(){this.listenTo(this.get("testModel"),"trackingToggle",this.showTracking)});Netex.Activity.Model.BaseModel.prototype.initialize.call(this)},showTracking:function(){this.trigger("showTracking")},getPartialScoreTotal:function(){var a=this;var b=0;this.get("itemTrackingCollection").each(function(c){b+=Number(c.get("partialScore"))});return b},getScoreMax:function(){return this.get("testModel").getTotalScore()},setNewOrderItemTest:function(a){this.trigger("changeOrderItemTestCollection",a)},changeItemTrackingModel:function(){this.trigger("changeItemTrackingModel")},goSlideToByIndex:function(a){this.trigger("goSlideToByIndex",a)}});
Netex.Activity.Model.TestModel=Netex.Activity.Model.BaseModel.extend({totalponderatedScore:100,ponderatedScore:false,itemTestCollection:null,finalFeedback:null,itemTestPaginatorModel:null,bottomBarModel:null,topBarModel:null,trackingModel:null,showedFinalFeedback:false,pageIndex:null,actSlideIndex:null,startTime:null,minScoreToSuccess:80,randomizeQuiz:false,containCover:false,initialize:function(){Netex.Activity.Model.BaseModel.prototype.initialize.call(this);this.on("change:itemTestPaginatorModel change:bottomBarModel change:topBarModel change:trackingModel",function(c,b){b.set("testModel",this);this.listenTo(b,"all",function(d){this.trigger(d,{componentTarget:b})})});var a=this;this.on("change:itemTestCollection",function(b,c){c.on("add",function(d){d.set("testModel",a);a.listenTo(d,"loaded",function(){a.onLoadedItemTest(d)})})});this.on("change:trackingModel",function(b,c){c.on("goSlideToByIndex",function(d){a.get("itemTestPaginatorModel").loadItemTestByIndex(d)})});this.on("change:finalFeedback",function(b,c){c.set("testModel",a)});this.on("change:finalFeedback",function(b,c){c.set("testModel",a)});this.on("showFinalFeedback",function(){this.onShowFinalFeedback()});this.on("showMyResponses",function(){this.get("itemTestPaginatorModel").get("itemTestLoaded").set("stateShowedResponsesOrSolutions","responses");this.get("itemTestPaginatorModel").get("itemTestLoaded").showMyResponses()});this.on("showSolutions",function(){this.get("itemTestPaginatorModel").get("itemTestLoaded").set("stateShowedResponsesOrSolutions","solutions");this.get("itemTestPaginatorModel").get("itemTestLoaded").showSolutions()});this.on("hideFinalFeedback",function(){this.onHideFinalFeedback()});this.on("reset",function(){this.get("itemTestPaginatorModel").get("itemTestLoaded").set("stateResetOrResponse","reseted");a.get("itemTestPaginatorModel").get("itemTestLoaded").reset()});this.on("response",function(){this.get("itemTestPaginatorModel").get("itemTestLoaded").set("stateResetOrResponse","responsed");this.get("itemTestPaginatorModel").get("itemTestLoaded").trigger("response")});this.on("beforeInit",function(){this.onBeforeInit()});this.set("itemTestCollection",new Netex.Activity.Collection.BaseCollection());this.set("feedBackFinalCollection",new Netex.Activity.Collection.BaseCollection());this.set("startTime",new Date().getTime())},get:function(a){var b=Backbone.Model.prototype.get.call(this,a);if(a=="totalponderatedScore"){return this.insureNumber(b,100)}if(a=="ponderatedScore"){return !this.isBoolean(b)?true:b}return b},getItemTestLoaded:function(){return this.get("itemTestPaginatorModel").get("itemTestLoaded")},getPartialScore:function(){var a=0;this.get("itemTestCollection").each(function(b){if(b.get("shouldntShow")!=true){var c=b.getPartialScore();a+=c}});return a},getSize:function(){var a=Number(this.get("questionPool"));if(isNaN(a)||Number(a)==0||a>this.get("itemTestCollection").size()){return this.get("itemTestCollection").size()}else{return a}},getSizeExerciseToPassed:function(){var a=0;this.get("itemTestCollection").each(function(b){if(b.get("isExercise")!=false&&b.get("shouldntShow")!=true){a++}});return a},getSizePassed:function(){var a=0;this.get("itemTestCollection").each(function(b){if((b.get("passed")==true)&&(b.get("isExercise")!=false)&&b.get("shouldntShow")!=true){a++}});return a},onShowFinalFeedback:function(){this.set("showedFinalFeedback",true);this.get("finalFeedback").showFeedCorresponds();this.hideActualItemTest()},onHideFinalFeedback:function(){this.set("showedFinalFeedback",false);this.get("finalFeedback").hideFeedback();this.showActualItemTest()},onLoadedItemTest:function(a){this.set("actIndexSlide",this.get("itemTestCollection").indexOf(a));if(this.get("showedFinalFeedback")==true){this.set("showedFinalFeedback",false);this.get("finalFeedback").hideFeedback()}},hideActualItemTest:function(){var b=this.get("itemTestCollection").at(this.get("actIndexSlide"));try{$("#"+b.get("id")).hide()}catch(a){}},showActualItemTest:function(){var a=this.get("itemTestCollection").at(this.get("actIndexSlide"));this.get("itemTestPaginatorModel").showItem(a);if((a.isEnabledForAttemps())&&(a.get("stateResetOrResponse")=="responsed")){a.trigger("loaded")}},deleteOnAPI:function(){if(typeof NetexActivityAPI!="undefined"&&NetexActivityAPI.activityCollection){this.get("itemTestCollection").each(function(c){if(c.get("shouldntShow")){var d=NetexActivityAPI.activityCollection.where({actId:c.get("id")});NetexActivityAPI.activityCollection.remove(d)}})}else{if(typeof setActivityDone!="undefined"){var b=[];this.get("itemTestCollection").each(function(e){if(e.get("shouldntShow")){var d=[];for(var c=0;c<CreateDataTracking.getCourse().getTotalSection();c++){var j=CreateDataTracking.getCourse().getSectionIndex(c);for(var h=0;h<j.getTotalActivityBlock();h++){var g=j.getActivityBlockIndex(h);for(var k=0;k<g.getTotalActivity();k++){var f=g.getActivityIndex(k);if(f.getId()==e.get("id")){d.push(e.get("id"));g.deleteActivityIndex(k)}}}}}else{b.push(e)}});b.sort(function(d,c){return d.getItemIndex()-c.getItemIndex()});for(var a in b){b[a].setItemIndex(a)}}}},onBeforeInit:function(){var e=this.get("itemTestCollection").length;var c=0;var f=Number(this.get("questionPool"));for(var h=0;h<e;h++){if(this.get("itemTestCollection").at(h).get("isExercise")!=false){this.get("itemTestCollection").at(h).set("indexInitial",c);c++}}var o=false;var j=false;if(this.get("randomizeQuiz")){var l=[];var m=[];if(Netex.Activity&&Netex.Activity.Singleton&&Netex.Activity.Singleton.StateInitQuizzes&&Netex.Activity.Singleton.StateInitQuizzes[this.get("id")]){l=Netex.Activity.Singleton.StateInitQuizzes[this.get("id")]["order"].slice(0);var d=this.get("itemTestCollection").length;for(var h=0;h<d;h++){if($.inArray(h,l)==-1){l.push(h)}}for(var h=0;h<l.length;h++){m.push(this.get("itemTestCollection").at(l[h]))}}else{if(this.get("containCover")){for(var h=1;h<e;h++){l.push(h)}l=l.sort(function(){return Math.random()-0.5});var k=l.reverse();k.push(0);l=k.reverse()}else{for(var h=0;h<e;h++){l.push(h)}l=l.sort(function(){return Math.random()-0.5})}if(!isNaN(f)&&f>0){Netex.Activity.Singleton=Netex.Activity.Singleton||{};Netex.Activity.Singleton.StateInitQuizzes=Netex.Activity.Singleton.StateInitQuizzes||{};Netex.Activity.Singleton.StateInitQuizzes[this.get("id")]=[];Netex.Activity.Singleton.StateInitQuizzes[this.get("id")]["order"]=l}j=true}var n=_.has(window,"NetexActivityAPI")&&_.has(window.NetexActivityAPI,"getOrder");l=(n?NetexActivityAPI.getOrder(this.get("id")):null)||l;if(n){NetexActivityAPI.setOrder(l,this.get("id"))}if(m.length==0){for(var h=0;h<e;h++){m[h]=this.get("itemTestCollection").models.splice(l[h],1,this.get("itemTestCollection").models[h])[0]}}for(var h=0;h<e;h++){this.get("itemTestCollection").models[h]=m[h]}o=true}if(isNaN(f)||f<1){f=e}else{j=true}if(f!=e){var b=false;var g=0;var p=0;for(h=0;h<e;h++){if(this.get("itemTestCollection").models[h].get("relativeScoreNormalizedInitial")==undefined){this.get("itemTestCollection").models[h].set("relativeScoreNormalizedInitial",this.get("itemTestCollection").models[h].get("relativeScoreNormalized"))}if(h<f){if(this.get("itemTestCollection").models[h].get("evaluable")!=false){g++;p+=this.get("itemTestCollection").models[h].get("relativeScoreNormalizedInitial")}}else{if(this.get("itemTestCollection").models[h].get("evaluable")!=false){b=true}}this.get("itemTestCollection").models[h].set("shouldntShow",(h>=f));o=true}if(b){for(h=0;h<f;h++){var a=this.get("itemTestCollection").models[h].get("relativeScoreNormalized");if(this.get("ponderatedScore")){if(p!=0){this.get("itemTestCollection").models[h].set("relativeScoreNormalized",(a*100)/p)}}else{if(this.get("itemTestCollection").models[h].get("evaluable")!=false){this.get("itemTestCollection").models[h].set("relativeScoreNormalized",100/g)}}}o=true}}if(o){this.get("itemTestPaginatorModel").reloadTest()}if(this.get("randomizeQuiz")){this.get("trackingModel").setNewOrderItemTest(l)}if(j){this.deleteOnAPI()}this.trigger("init")}});
Netex.Activity.Model.TopBarModel=Netex.Activity.Model.BaseModel.extend({testModel:null,defaults:{actualRelativeScoreRaw:10,actualPonderatedScore:0,actualPage:0,totalPages:0},initialize:function(){Netex.Activity.Model.BaseModel.prototype.initialize.call(this);var a=this;this.on("change:testModel",function(){this.listenTo(this.get("testModel"),"init",function(){this.get("testModel").get("itemTestCollection").each(function(c){a.listenTo(c,"loaded",function(d){a.set("actualRelativeScoreRaw",c.get("relativeScoreRaw"));a.set("actualPonderatedScore",c.get("relativeScoreNormalized"));a.set("actualPage",(this.get("testModel").get("itemTestCollection").indexOf(c)+1))})});this.set("totalPages",this.get("testModel").getSize());a.trigger("change_totalPages");var b=this.get("testModel").get("itemTestCollection").at(0);a.set("actualRelativeScoreRaw",b.get("relativeScoreRaw"));a.set("actualPonderatedScore",b.get("relativeScoreNormalized"))})})},trackingToggle:function(){this.trigger("trackingToggle")}});
Netex.Activity.Model.ItemTestBaseModel=Netex.Activity.Model.BaseModel.extend({defaults:{attempts:1,attemptsDoings:0,relativeScoreNormalized:0,relativeScoreRaw:null,evaluable:true,isExercise:true,objTrack:null,hasSolution:true,showingLastTrack:false},testModel:null,passed:null,title:null,initialize:function(){Netex.Activity.Model.BaseModel.prototype.initialize.call(this);if(typeof this.getPrevTracking=="function"){this.set("objTrack",this.getPrevTracking(this.get("id")));this.set("attemptsDoings",this.getPrevAttemptsDoing())}this.on("response",function(){this.addAttempts();this.check();this.sendTracking()})},get:function(a){var b=Backbone.Model.prototype.get.call(this,a);if(a=="relativeScoreRaw"||a=="relativeScoreNormalized"){return this.insureNumber(b)}return b},getRelativeScoreNormalized:function(){return this.get("relativeScoreNormalized")},getPartialScore:function(){if(this.get("passed")!==true){return 0}return this.get("relativeScoreNormalized")},getItemIndex:function(){var b=this.get("testModel").get("containCover");var a=this.get("indexInitial");if(this.get("testModel").get("randomizeQuiz")||!b){if(typeof a!="undefined"){return b?a-1:a}a=this.get("testModel").get("itemTestCollection").indexOf(this);return b?a-1:a}return a},setItemIndex:function(a){this.set("indexInitial",+a)},isEnabledForAttemps:function(){if(this.get("passed")==true&&this.get("evaluable")!=false){return false}if(!this.isNumber(parseInt(this.get("attempts")))){return true}return parseInt(this.get("attempts"))>parseInt(this.get("attemptsDoings"))},addAttempts:function(){var a=this.get("attemptsDoings");this.set("attemptsDoings",++a)},hasNetexActivityAPI:function(){if(typeof NetexActivityAPI!="undefined"){return true}else{return false}},showMyResponses:function(){this.trigger("showMyResponses")},showSolutions:function(){this.trigger("showSolutions")},getPrevTracking:function(c){if(window["itemtest_"+c]&&window["itemtest_"+c].objTrack){return window["itemtest_"+c].objTrack}else{if(typeof NetexActivityAPI!="undefined"){var b=NetexActivityAPI.get(this.get("id"));if(b){var a={id:this.get("id"),response:b.learner_response||b.response,passed:b.result,attemptsDoings:b.tries||1};return a}else{return null}}else{return null}}},getPrevAttemptsDoing:function(){var b=this.get("id");var a=0;if(window["itemtest_"+b]&&window["itemtest_"+b].attemptsDoings){a=window["itemtest_"+b].attemptsDoings}else{if(this.get("objTrack")&&this.get("objTrack").attemptsDoings){a=this.get("objTrack").attemptsDoings}}return a},sendTrackingToNetexActivityAPI:function(c){var a=this.get("id");var b;window["itemtest_"+a]=window["itemtest_"+a]||{};window["itemtest_"+a].attempts=this.get("attempts");window["itemtest_"+a].attemptsDoings=this.get("attemptsDoings");window["itemtest_"+a].objTrack=c;b=$("#"+a).closest(".lcm-activity");c.testId=b.attr("id");c.testDomFind=!!b.find(".lcm-activity-score-results-obtained").text();c.testScore=+(b.find(".lcm-activity-score-results-obtained").text()||0);c.testCompletion=b.find(".lcm-tracking-icon-progress").length===0;c.testMastery=+(b.find("[data-ntx-test-header-mastery-score]").attr("data-ntx-test-header-mastery-score")||0);if(typeof NetexActivityAPI!="undefined"){NetexActivityAPI.set(c)}},sendTrackingToSetActivityDone:function(d,a,b,c,j,f,i,g,e,k){var h=this.get("id");window["itemtest_"+h]=window["itemtest_"+h]||{};window["itemtest_"+h].attempts=this.get("attempts");window["itemtest_"+h].attemptsDoings=this.get("attemptsDoings");window["itemtest_"+h].objTrack={score:d,tye:a,response:b,pos:c,block:j,respuestaCorrecta:f,description:i,opciones:g,page:e,noEnviarInteraccion:k};if(typeof setActivityDone!="undefined"){setActivityDone(d,a,b,c,j,f,i,g,e,k)}},getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(location.search);return b==null?"":decodeURIComponent(b[1].replace(/\+/g," "))},logmsg:function(a){if(typeof console!="undefined"){console.log(a)}}});
Netex.Activity.Model.AbcBaseModel=Netex.Activity.Model.ItemTestBaseModel.extend({testModel:null,abcOptionCollection:null,initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:abcOptionCollection",function(c,b){b.on("add",function(e){var d=b.length-1;e.set("abcModel",a);var f=a.get("objTrack");if(f){if(f.response&&_.contains(f.response.split("[,]"),d+"")){e.set("response",true)}if(f.correctResponsesPattern&&_.contains(f.correctResponsesPattern[0].split("[,]"),d+"")){e.set("success",true)}}})});this.set("abcOptionCollection",new Netex.Activity.Collection.BaseCollection())},constructor:function(a,b){Backbone.Model.apply(this,arguments)},check:function(){var b=true;var a=false;this.get("abcOptionCollection").each(function(c){if(!c.check()){b=false}});this.get("abcOptionCollection").each(function(c){if(c.get("success")==true){a=true}});if(!a){b=false}this.set("passed",b);this.trigger("check",{value:b})},reset:function(){if(this.isEnabledForAttemps()){this.get("abcOptionCollection").each(function(a){a.reset()});this.trigger("reset")}},getAbcOptionCorrect:function(){var a=[];this.get("abcOptionCollection").each(function(b){if(b.get("success")==true){a.push(b)}});return a},getAbcOptionResponses:function(){var a=[];this.get("abcOptionCollection").each(function(b){if(b.get("response")===true){a.push(b)}});return a},getAbcOptionChoices:function(){return this.extractPropertiesToChoices(this.get("abcOptionCollection").models,"id","title")},sendTracking:function(f){f=f||false;var c="[,]";var d=this.extractPropertyToArray(this.getAbcOptionResponses(),"id");var k=this.arrayToString(d,c);var e=this.extractPropertyToArray(this.getAbcOptionCorrect(),"id");var h=this.arrayToString(e,c);var b,a,g;var l=[];for(b=0;b<d.length;b++){a=this.get("abcOptionCollection").findWhere({id:d[b]});g=this.get("abcOptionCollection").indexOf(a);k=k.split(d[b]).join(g)}this.get("abcOptionCollection").each(function(i){l.push({id:i.get("id"),description:i.get("title")})});for(b=0;b<e.length;b++){a=this.get("abcOptionCollection").findWhere({id:e[b]});g=this.get("abcOptionCollection").indexOf(a);h=h.split(e[b]).join(g)}if(this.hasNetexActivityAPI()){var j={id:this.get("id"),interactionType:"choice",type:"choice",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,choices:l,correctResponsesPattern:[h],response:k,result:(this.get("passed")?"correct":"incorrect"),weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:f,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};this.sendTrackingToNetexActivityAPI(j)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"choice",k,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),h,this.get("title"),this.getAbcOptionChoices(),this.get("testModel").get("pageIndex"),f)}}}});
Netex.Activity.Model.AbcMultipleModel=Netex.Activity.Model.AbcBaseModel.extend({});
Netex.Activity.Model.AbcOptionModel=Netex.Activity.Model.BaseModel.extend({defaults:{abcModel:null,success:null,response:null,disabled:false,title:null},constructor:function(){Backbone.Model.apply(this,arguments)},check:function(){var a=this;this.set("disabled",true);if(this.get("response")&&!this.get("success")){this.trigger("checkResponseOption",{success:this.get("success"),responseCorrect:false,id:a.get("id")});return false}if(!this.get("response")&&this.get("success")){this.trigger("checkResponseOption",{success:this.get("success"),responseCorrect:false,id:a.get("id")});return false}this.trigger("checkResponseOption",{success:this.get("success"),responseCorrect:true,id:a.get("id")});return true},reset:function(){this.trigger("resetResponseOption",{id:this.get("id")});this.set("response",false)}});
Netex.Activity.Model.AbcSimpleModel=Netex.Activity.Model.AbcBaseModel.extend({});
Netex.Activity.Model.CrossWordModel=Netex.Activity.Model.ItemTestBaseModel.extend({defaults:{testModel:null,crossWordCellCollection:null,firstCellRowOcupped:9999,lastCellRowOcupped:0,firstCellColumnOcupped:9999,lastCellColumnOcupped:0,attempts:1,evaluable:true,isExercise:true,hasSolution:true},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var b=this;var a=0;var c=1;this.on("change:crossWordCellCollection",function(e,d){d.on("add",function(g){var h=b.get("objTrack");if(h){var f=d.length-1;var i=(h.response||"").split("[,]")[f];if(i!=null&&i!=""){g.set("responseValue",i)}}g.set("crossWordModel",b);a++;g.set("pertainToRow",c);g.set("pertainToColumn",a);if(g.get("successValue")!=""){if(b.get("firstCellRowOcupped")>c){b.set("firstCellRowOcupped",c)}if(b.get("lastCellRowOcupped")<c){b.set("lastCellRowOcupped",c)}if(b.get("firstCellColumnOcupped")>a){b.set("firstCellColumnOcupped",a)}if(b.get("lastCellColumnOcupped")<a){b.set("lastCellColumnOcupped",a)}}if(a==20){a=0;c++}})});this.set("crossWordCellCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var a=true;this.get("crossWordCellCollection").each(function(b){if(!b.check()){a=false}});this.set("passed",a);this.trigger("check",{value:a})},reset:function(){if(this.isEnabledForAttemps()){this.get("crossWordCellCollection").each(function(a){a.reset()});this.trigger("reset")}},sendTracking:function(d){d=d||false;var b="[,]";var c=this.extractPropertyToArray(this.get("crossWordCellCollection").models,"response");var j=this.arrayToString(c,b);var g=this.arrayToString(this.extractPropertyToArray(this.get("crossWordCellCollection").models,"successValue"),b);var k=[];var f=[];var e=[];this.get("crossWordCellCollection").each(function(l){e.push(l.get("successValue"));f.push(l.get("responseValue"))});var i=e.toString().split(",").join(b);var a=f.toString().split(",").join(b);if(this.hasNetexActivityAPI()){var h={id:this.get("id"),interactionType:"fill-in",type:"fill-in",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,correctResponsesPattern:[i],response:a,result:(this.get("passed")?"correct":"incorrect"),weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:d,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};this.sendTrackingToNetexActivityAPI(h)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"fill-in",j,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),g,this.get("title"),null,this.get("testModel").get("pageIndex"),d)}}}});
Netex.Activity.Model.CrossWordCellModel=Netex.Activity.Model.BaseModel.extend({defaults:{crossWordModel:null,successValue:null,responseValue:"",typeAlign:null,typeContent:"text",pertainToRow:null,pertainToColumn:null},check:function(){if(this.get("responseValue").toLowerCase()!=this.get("successValue").toLowerCase()){this.trigger("check",{value:false});return false}this.trigger("check",{value:true});return true},setType:function(a){if(a!=this.get("typeContent")){this.set("typeContent",a);this.trigger("changeTypeContent",{newValue:a})}},setAlign:function(a){if(a!=this.get("typeAlign")){this.set("typeAlign",a);this.trigger("changeTypeAlign",{newValue:a})}},reset:function(){this.set("passed",null);this.set("responseValue","");this.trigger("reset")}});
Netex.Activity.Model.FillGapModel=Netex.Activity.Model.ItemTestBaseModel.extend({testModel:null,gapSimpleCollection:null,defaults:{attempts:1,evaluable:true,isExercise:true,hasSolution:true,showingLastTrack:false},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:gapSimpleCollection",function(b,c){c.on("add",function(d){d.set("fillGapModel",a)})});this.set("gapSimpleCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var a=true;this.get("gapSimpleCollection").each(function(b){if(!b.check()){a=false}});this.set("passed",a);this.trigger("check",{value:a})},reset:function(){if(this.isEnabledForAttemps()){this.get("gapSimpleCollection").each(function(a){a.reset()});this.trigger("reset")}},getSelectOptionCorrect:function(){var a=[];this.get("gapSimpleCollection").each(function(b){b.get("selectOptionCollection").each(function(c){if(c.get("success")==true){a.push(c)}})});return a},getSelectOptionResponses:function(){var a=[];this.get("gapSimpleCollection").each(function(b){a.push({id:"",get:function(){return"null"}});b.get("selectOptionCollection").each(function(c){if(c.get("response")!=false){a[a.length-1]=c}})});return a},getSelectOptionChoices:function(){var a=[];this.get("gapSimpleCollection").each(function(b){b.get("selectOptionCollection").each(function(c){a.push(c)})});return this.extractPropertiesToChoices(a,"id","label")},sendTracking:function(h){h=h||false;var e="[,]";var f=this.extractPropertyToArray(this.getSelectOptionResponses(),"id");var q=this.arrayToString(f,e);var g=this.extractPropertyToArray(this.getSelectOptionCorrect(),"id");var n=this.arrayToString(g,e);var d,c,k,a,m=[];this.get("gapSimpleCollection").each(function(){m.push("null")});var l=-1;for(d=0;d<f.length;d++){a=f[d];var l=-1;this.get("gapSimpleCollection").each(function(i){var r=0;l++;i.get("selectOptionCollection").each(function(s){r++;if(s.get("id")==a){k=r;m[l]=(s.get("label"))}})});q=q.split(f[d]).join(k)}var b=_.reduce(m,function(i,r,s){return i+(s===0?"":"[,]")+r},"");var j=[];for(d=0;d<g.length;d++){a=g[d];this.get("gapSimpleCollection").each(function(i){var r=0;i.get("selectOptionCollection").each(function(s){r++;if(s.get("id")==a){k=r;j.push(s.get("label"))}})});n=n.split(g[d]).join(k)}var p=_.reduce(j,function(i,r,s){return i+(s===0?"":"[,]")+r},"");var o={id:this.get("id"),interactionType:"fill-in",type:"fill-in",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,correctResponsesPattern:[p],response:b,result:(this.get("passed")?"correct":"incorrect"),weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:h,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};this.set("objTrack",o);if(this.hasNetexActivityAPI()){this.sendTrackingToNetexActivityAPI(o)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"choice",q,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),n,this.get("title"),this.getSelectOptionChoices(),this.get("testModel").get("pageIndex"),h)}}}});
Netex.Activity.Model.FreeResponseModel=Netex.Activity.Model.ItemTestBaseModel.extend({testModel:null,freeResponseItemCollection:null,initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:freeResponseItemCollection",function(b,c){c.on("add",function(e){e.set("freeResponseModel",a);var d=c.length-1;var g=a.get("objTrack");if(g){var f=(g.response||"").split("[,]")[d];if(f){e.set("response",f)}}})});this.set("freeResponseItemCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var a=true;this.get("freeResponseItemCollection").each(function(b){if(!b.check()){a=false}});this.set("passed",a);this.trigger("check",{value:a})},reset:function(){if(this.isEnabledForAttemps()){this.get("freeResponseItemCollection").each(function(a){a.reset()});this.trigger("reset")}},sendTracking:function(e){e=e||false;var d="[,]";var f=this.extractPropertyToArray(this.get("freeResponseItemCollection").models,"response");var c=this.arrayToString(f,d);var b=this.arrayToString(this.extractPropertyToArray(this.get("freeResponseItemCollection").models,"successValue"),d);var a={id:this.get("id"),interactionType:"fill-in",type:"fill-in",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,correctResponsesPattern:[b],response:c,result:(this.get("passed")?"correct":"incorrect"),weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:e,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};if(this.hasNetexActivityAPI()){this.sendTrackingToNetexActivityAPI(a)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"fill-in",c,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),b,this.get("title"),null,this.get("testModel").get("pageIndex"),e)}}}});
Netex.Activity.Model.CoverTextModel=Netex.Activity.Model.ItemTestBaseModel.extend({testModel:null,defaults:{attempts:0,attemptsDoings:0,evaluable:false,isExercise:false,hasSolution:false},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this)},check:function(){var a=true;this.set("passed",a);this.trigger("check",{value:a})},reset:function(){},sendTracking:function(){}});
Netex.Activity.Model.InputFreeModel=Netex.Activity.Model.BaseModel.extend({defaults:{freeResponseModel:null,successValue:null,broadmatch:null,exactmatch:null,response:"",typeAlign:null,typeContent:"text",conditional:"Equal to",isNumeric:false},check:function(){var d=false;var c=this.get("response");var b=this.html_entity_decode(this.get("successValue"));if(this.get("isNumeric")!=false){c=(c.indexOf(",")!=-1)?c.split(",").join("."):c;b=(b.indexOf(",")!=-1)?b.split(",").join("."):b}if(isNaN(c)){if(c&&(c.indexOf('"')!=-1&&b.indexOf("'")!=-1)){c=c.split('"').join("'")}c=$.trim(c);b=$.trim(b);if(!this.get("typeMatch")||this.get("typeMatch")=="Broad"){if(c.toLowerCase()==b.toLowerCase()){d=true}}else{if(c==b){d=true}}}else{switch(this.get("conditional")){case"Equal to":if(Number(c)==Number(b)){d=true}break;case"Not equal to":if(Number(c)!=Number(b)){d=true}break;case"Between":var a=this.getArrayValuesResponse(b);if(Number(c)>a[0]&&Number(c)<a[1]){d=true}break;case"Greater than":if(Number(c)>Number(b)){d=true}break;case"Greater than or equal to":if(Number(c)>=Number(b)){d=true}break;case"Less than":if(Number(c)<Number(b)){d=true}break;case"Less than or equal to":if(Number(c)<=Number(b)){d=true}break;default:if(Number(c)==Number(b)){d=true}}}this.trigger("check",{value:d});return d},getArrayValuesResponse:function(a){a=(a.indexOf(",")!=-1)?a.split(",").join("."):a;if(a.indexOf(" : ")!=-1){return a.split(" : ")}else{if(a.indexOf(": ")!=-1){return a.split(": ")}else{if(a.indexOf(":")!=-1){return a.split(":")}else{if(a.indexOf(" ; ")!=-1){return a.split(" ; ")}else{if(a.indexOf("; ")!=-1){return a.split("; ")}else{if(a.indexOf(";")!=-1){return a.split(";")}else{if(a.indexOf(" - ")!=-1){return a.split(" - ")}else{if(a.indexOf("- ")!=-1){return a.split("- ")}else{if(a.indexOf("-")!=-1){return a.split("-")}else{if(a.indexOf(" ")!=-1){return a.split(" ")}}}}}}}}}}},setType:function(a){if(a!=this.get("typeContent")){this.set("typeContent",a);this.trigger("changeTypeContent",{newValue:a})}},setAlign:function(a){if(a!=this.get("typeAlign")){this.set("typeAlign",a);this.trigger("changeTypeAlign",{newValue:a})}},reset:function(){this.trigger("reset")}});
Netex.Activity.Model.LikertScaleModel=Netex.Activity.Model.ItemTestBaseModel.extend({defaults:{testModel:null,likertItemAnswerCollection:null,likertItemScaleCollection:null,attempts:"unlimited",evaluable:false,isExercise:true,hasSolution:false,showingLastTrack:false},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:likertItemAnswerCollection",function(b,c){c.on("add",function(e){e.set("likertScaleModel",a);var d=c.length-1;var g=a.get("objTrack");if(g){var f=(g.response||"").split("[,]")[d];if(f){e.set("responseValue",f)}}})});this.on("change:likertItemScaleCollection",function(c,b){b.on("add",function(d){d.set("likertScaleModel",a)})});this.set("likertItemAnswerCollection",new Netex.Activity.Collection.BaseCollection());this.set("likertItemScaleCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var a=true;this.set("passed",a);this.trigger("check",{value:a});this.trigger("checkCollection")},reset:function(){if(this.isEnabledForAttemps()){this.get("likertItemAnswerCollection").each(function(a){a.reset()});this.trigger("resetCollection")}},getLikertItemAnswerResponses:function(){var a=[];this.get("likertItemAnswerCollection").each(function(b){if(b.get("responseValue")!==""){a.push(b)}});return a},getLikertItemAnswerTitles:function(){return this.extractPropertiesToChoices(this.get("likertItemAnswerCollection").models,"id","title")},getChoices:function(){var c=[];var b=this.get("textsChoices").split("[,]");for(var a=0;a<b.length;a++){c.push({id:""+a,description:b[a]})}return c},sendTracking:function(f){f=f||false;var e="[,]";var a=this.extractPropertyToArray(this.getLikertItemAnswerResponses(),"responseValue");var d=this.arrayToString(a,e);var c="";var g=this.getChoices();if(this.hasNetexActivityAPI()){var b={id:this.get("id"),interactionType:"performance",type:"performance",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,correctResponsesPattern:[d],response:d,result:"neutral",weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:f,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};this.sendTrackingToNetexActivityAPI(b)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone(100,"performance",d,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),d,this.get("title"),this.getLikertItemAnswerTitles(),this.get("testModel").get("pageIndex"),f)}}this.get("likertItemAnswerCollection").each(function(h){h.sendTracking()})}});
Netex.Activity.Model.LikertItemAnswerModel=Netex.Activity.Model.BaseModel.extend({defaults:{likertScaleModel:null,response:false,responseValue:"",success:null,disabled:false,title:" "},constructor:function(){Backbone.Model.apply(this,arguments)},check:function(){var a=this;this.set("disabled",true);return true},setTextResponse:function(a){this.set("responseText",a)},setResponse:function(a){var c=".";var b=a;if(typeof TrackingConfig!="undefined"){if(TrackingConfig.type!="scorm_1_2"){b=a.split(".").join("[.]")}}this.set("responseValue",b)},reset:function(){this.set("response",false);this.set("responseValue","")},normalizeLearnerResponse:function(c){var d="123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";var e="";for(var a=0;a<c.length;a++){var b=c.charAt(a);if(d.indexOf(b.toUpperCase())==-1){e+="_"}else{e+=b}}return e},sendTracking:function(){var c=this.get("responseText")?this.get("responseText"):"";c=this.normalizeLearnerResponse(c);var b=(new Date().getTime()-this.get("likertScaleModel").get("testModel").get("startTime"))/1000;var a=this.get("likertScaleModel").get("testModel").get("startTime")/1000;if(typeof TrackingConfig!="undefined"&&TrackingConfig.type=="scorm_2004"){var d=pipwerks.SCORM.get("cmi.interactions._count");d=$.isNumeric(d)?+d:0;pipwerks.SCORM.set("cmi.interactions."+d+".id",this.get("id"));pipwerks.SCORM.set("cmi.interactions."+d+".type","likert");pipwerks.SCORM.set("cmi.interactions."+d+".result","neutral");pipwerks.SCORM.set("cmi.interactions."+d+".learner_response",c);pipwerks.SCORM.set("cmi.interactions."+d+".description",this.get("title"))}}});
Netex.Activity.Model.LikertItemScaleModel=Netex.Activity.Model.BaseModel.extend({defaults:{likertScaleModel:null,response:false,success:null,disabled:false,title:" "},constructor:function(){Backbone.Model.apply(this,arguments)},reset:function(){this.set("response",false)}});
Netex.Activity.Model.MatchModel=Netex.Activity.Model.ItemTestBaseModel.extend({testModel:null,matchComponentCollection:null,defaults:{enabled:true,attempts:1,checkByText:false,evaluable:true,isExercise:true,hasSolution:true,showingLastTrack:false,matchComponentsLength:1},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:matchComponentCollection",function(b,c){c.on("add",function(e){e.set("matchModel",a);e.set("checkByText",a.get("checkByText"));var d=a.get("objTrack");if(d){if(c.length==e.get("matchComponentsLength")){a.setIdsRightByObjTrack()}}})});this.set("matchComponentCollection",new Netex.Activity.Collection.BaseCollection())},setIdsRightByObjTrack:function(){var b=this;var c=this.get("matchComponentCollection");var a=-1;this.get("matchComponentCollection").each(function(k){a++;var g=b.get("objTrack");if(g){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n"];var f=(g.response||"").split("[,]")[a];if(f){if(f.indexOf("[.]")==-1){var d=f.split(".")[1]}else{var d=f.split("[.]")[1]}var i=$.inArray(d,e);if(i!=-1){var h=c.at(i);if(h){var j=c.at(i).get("idRightCorrect");if(j){k.set("idRightSelected",j);k.set("idLeftSelected",k.get("idLeftCorrect"))}}}}}})},check:function(){var b=true;var a=false;this.get("matchComponentCollection").each(function(c){if(!c.check()){b=false}});this.set("passed",b);this.trigger("check",{value:b});this.set("enabled",false)},reset:function(){if(this.isEnabledForAttemps()){var a=this;this.get("matchComponentCollection").each(function(b){b.reset()});this.trigger("reset");this.set("enabled",true)}},sendTracking:function(e){e=e||false;var b="[,]";var l=[];var f=[];var a=b.length;var d=[];var h="";var j=this.get("matchComponentCollection");var g="abcdefghijklmnñopqrst";this.get("matchComponentCollection").each(function(r){var n=r.getSuccessValueToTracing();d=n.split(r.get("separatorToTracing"));var q=j.findWhere({idLeftCorrect:d[0]});var p=j.findWhere({idRightCorrect:d[1]});var m=j.indexOf(q);var o=g.charAt(j.indexOf(p));h+=(m+r.get("separatorToTracing")+o+b);l.push({id:'"'+m+'"',description:q.get("textLeftNoTags")});f.push({id:o,description:p.get("textRightNoTags")})});h=h.substr(0,h.length-b.length);var c=[];var k="";this.get("matchComponentCollection").each(function(r){var n=r.getResponseValueToTracing();c=n.split(r.get("separatorToTracing"));var q=j.findWhere({idLeftCorrect:c[0]});var p=j.findWhere({idRightCorrect:c[1]});var m=j.indexOf(q);var o=g.charAt(j.indexOf(p));if(o){k+=(m+r.get("separatorToTracing")+o+b)}});k=k.substr(0,k.length-b.length);if(this.hasNetexActivityAPI()){var i={id:this.get("id"),interactionType:"matching",type:"matching",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,correctResponsesPattern:[h],response:k,source:l,target:f,result:(this.get("passed")?"correct":"incorrect"),weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:e,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};this.sendTrackingToNetexActivityAPI(i)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"matching",k,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),h,this.get("title"),null,this.get("testModel").get("pageIndex"),e)}}}});
Netex.Activity.Model.MatchComponentModel=Netex.Activity.Model.BaseModel.extend({defaults:{success:false,idRightCorrect:null,idLeftCorrect:null,checkByText:false,htmlRightCorrect:null,htmlLeftCorrect:null,textRightSelected:null,textLeftSelected:null,idRightSelected:null,idLeftSelected:null,responseValue:null,successValue:null,matchModel:null,separatorToTracing:"."},constructor:function(){Backbone.Model.apply(this,arguments)},setIdRightSelected:function(a){this.set("idRightSelected",a)},setIdLeftSelected:function(a){this.set("idLeftSelected",a)},check:function(){var a="[.]";this.set("separatorToTracing",a);if(this.get("idRightSelected")==this.get("idRightCorrect")&&this.get("idLeftSelected")==this.get("idLeftCorrect")){this.set("passed",true)}else{this.set("passed",false)}return this.get("passed")},reset:function(){this.set("success",false);this.set("idRightSelected",null);this.set("idLeftSelected",null);this.set("enabledRight",true);this.set("enabledLeft",true)},getSuccessValueToTracing:function(){var a=this.get("separatorToTracing");return this.get("idLeftCorrect")+a+this.get("idRightCorrect")},getResponseValueToTracing:function(){var a=this.get("separatorToTracing");return this.get("idLeftSelected")+a+this.get("idRightSelected")}});
Netex.Activity.Model.SelectOptionModel=Netex.Activity.Model.BaseModel.extend({defaults:{selectSimpleModel:null,response:false,success:null,disabled:false},constructor:function(){Backbone.Model.apply(this,arguments)},check:function(){var a=this;this.set("disabled",true);if(this.get("response")&&!this.get("success")){return false}if(!this.get("response")&&this.get("success")){return false}return true},reset:function(){this.set("response",false)}});
Netex.Activity.Model.SelectSimpleModel=Netex.Activity.Model.BaseModel.extend({fillGapModel:null,selectOptionCollection:null,relativeItemTestScore:null,responded:null,initialize:function(){Netex.Activity.Model.BaseModel.prototype.initialize.call(this);var a=this;this.on("change:selectOptionCollection",function(c,b){b.on("add",function(d){d.set("selectSimpleModel",a)})});this.on("loaded",function(){if(this.get("checked")!==true){this.listenToOnce(a.get("fillGapModel").get("testModel"),"response",function(){this.check()})}});this.set("selectOptionCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var a=true;if(this.get("responded")){this.get("selectOptionCollection").each(function(b){if(!b.check()){a=false}})}else{a=false}this.trigger("checkFillGapOption",{id:this.get("id"),check:a});return a},reset:function(){this.trigger("resetFillGapOption",{id:this.get("id")})}});
Netex.Activity.Model.SequenceModel=Netex.Activity.Model.ItemTestBaseModel.extend({defaults:{testModel:null,sequenceOptionCollection:null,responseOptionCollection:null,reorderAfterReset:null,elSequenceOptions:null,correctResponses:null,reponseIdsOrder:[],attempts:1,evaluable:true,isExercise:true,hasSolution:true},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:sequenceOptionCollection",function(b,c){c.on("add",function(d){d.set("sequenceModel",a);var e=c.length-1;var g=a.get("objTrack");if(g){var f=(g.response||"").split("[,]")[e];if(f){d.set("response",f)}}})});this.set("sequenceOptionCollection",new Netex.Activity.Collection.BaseCollection());this.set("responseOptionCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var e=true;var d=this.get("reponseIdsOrder");var a=this.get("correctResponses");for(var b=0;b<a.length;b++){if(a[b]!=d[b]){e=false;break}}this.set("passed",e);var c=this;this.trigger("check",{value:e});this.trigger("checkResponses")},setReorderAfterReset:function(a){this.set("reorderAfterReset",a)},setElButtonOrder:function(b,a){var c=this;b.on(a,function(){c.order()})},setResponseOptionCollectionWithPositions:function(a,b){if(b!==false){this.trigger("reorder")}},setIdsResponse:function(b,a){this.set("reponseIdsOrder",b)},reset:function(){if(this.isEnabledForAttemps()){this.trigger("reset")}},sendTracking:function(h){h=h||false;var f="[,]";var d=f.length;var k="";var n="";var g=this.get("reponseIdsOrder");var m=this.get("correctResponses");var a=g.length;for(e=0;e<a;e++){k+=e+f;var b=g[e];var j=$.inArray(b,m);n+=j+f}n=n.substr(0,n.length-d);k=k.substr(0,k.length-d);var o=[];var c=this.get("textsChoices").split("[,]");for(var e=0;e<c.length;e++){o.push({id:""+e,description:c[e]})}var l={id:this.get("id"),interactionType:"sequencing",type:"sequencing",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,choices:o,correctResponsesPattern:[k],response:n,result:(this.get("passed")?"correct":"incorrect"),weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:h,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};if(this.hasNetexActivityAPI()){this.sendTrackingToNetexActivityAPI(l)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"sequencing",n,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),k,this.get("title"),null,this.get("testModel").get("pageIndex"),h)}}}});
Netex.Activity.Model.SequenceOptionModel=Netex.Activity.Model.BaseModel.extend({success:false,sequenceModel:null,constructor:function(){Backbone.Model.apply(this,arguments)},check:function(){return this.get("success")},reset:function(){this.set("success",false);var a=this}});
Netex.Activity.Model.LongFillInModel=Netex.Activity.Model.ItemTestBaseModel.extend({testModel:null,longFillInItemCollection:null,defaults:{attempts:"unlimited",evaluable:false,isExercise:true,hasSolution:false,showingLastTrack:false},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:longFillInItemCollection",function(b,c){c.on("add",function(e){e.set("longFillInModel",a);var d=c.length-1;var g=a.get("objTrack");if(g){var f=(g.response||"").split("[,]")[d];if(f){e.set("response",f)}}})});this.set("longFillInItemCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var a=true;this.set("passed",a);this.trigger("check",{value:a})},reset:function(){if(this.isEnabledForAttemps()){this.get("longFillInItemCollection").each(function(a){a.reset()});this.trigger("reset")}},sendTracking:function(e){e=e||false;var d="[,]";var f=this.extractPropertyToArray(this.get("longFillInItemCollection").models,"response");var c=this.arrayToString(f,d);var b=this.arrayToString(this.extractPropertyToArray(this.get("longFillInItemCollection").models,"successValue"),d);if(this.hasNetexActivityAPI()){var a={id:this.get("id"),interactionType:"long-fill-in",type:"long-fill-in",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,correctResponsesPattern:[b],response:c,result:"neutral",weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:e,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};this.sendTrackingToNetexActivityAPI(a)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"fill-in",c,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),b,this.get("title"),null,this.get("testModel").get("pageIndex"),e)}}}});
Netex.Activity.Model.WordBankModel=Netex.Activity.Model.ItemTestBaseModel.extend({testModel:null,wordBankItemCollection:null,initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:wordBankItemCollection",function(c,b){b.on("add",function(e){e.set("wordBankModel",a);var d=b.length-1;var g=a.get("objTrack");if(g){var f=(g.response||"").split("[,]")[d];if(e.get("textSuccessNoTags")==f||e.get("textSuccess")==f){e.set("responseValue",e.get("successValue"))}e.set("textResponseNoTags",f)}})});this.set("wordBankItemCollection",new Netex.Activity.Collection.BaseCollection())},check:function(){var a=true;this.get("wordBankItemCollection").each(function(b){if(!b.check()){a=false}});this.set("passed",a);this.trigger("check",{value:a})},reset:function(){if(this.isEnabledForAttemps()){this.get("wordBankItemCollection").each(function(a){a.reset()});this.trigger("reset")}},sendTracking:function(d){d=d||false;var b="[,]";var c=this.extractPropertyToArray(this.get("wordBankItemCollection").models,"responseValue");var j=this.arrayToString(c,b);var g=this.arrayToString(this.extractPropertyToArray(this.get("wordBankItemCollection").models,"successValue"),b);var e=[];var f=[];this.get("wordBankItemCollection").each(function(k){e.push(k.get("textSuccessNoTags"));f.push(k.get("textResponseNoTags"))});var i=e.toString().split(",").join(b);var a=f.toString().split(",").join(b);if(this.get("passed")){a=i}if(this.hasNetexActivityAPI()){var h={id:this.get("id"),interactionType:"fill-in",type:"fill-in",timestamp:this.get("testModel").get("startTime")/1000,latency:(new Date().getTime()-this.get("testModel").get("startTime"))/1000,correctResponsesPattern:[i],response:a,result:(this.get("passed")?"correct":"incorrect"),weighting:100,description:this.get("title"),score:(this.get("passed")?100:0),success:(this.get("passed")?true:false),score_min:0,score_max:100,result_url:null,noSendIteraction:d,nPos:this.getItemIndex()+1,nBlock:this.get("testModel").get("blockIndex"),nPage:this.get("testModel").get("pageIndex")};this.sendTrackingToNetexActivityAPI(h)}else{if(typeof TrackingConfig!="undefined"){this.sendTrackingToSetActivityDone((this.get("passed")?100:0),"fill-in",j,this.getItemIndex()+1,this.get("testModel").get("blockIndex"),g,this.get("title"),null,this.get("testModel").get("pageIndex"),d)}}}});
Netex.Activity.Model.WordBankItemModel=Netex.Activity.Model.BaseModel.extend({defaults:{wordBankModel:null,successValue:null,responseValue:"",typeAlign:null,textSuccessNoTags:null,typeContent:"text"},check:function(){if(this.get("textResponseNoTags")&&(this.get("textResponseNoTags").indexOf('"')!=-1&&this.get("textSuccessNoTags").indexOf("'")!=-1)){this.set("textResponseNoTags",this.get("textResponseNoTags").split('"').join("'"))}if(this.get("responseValue")==this.get("successValue")){this.trigger("check",{value:true});return true}if(!this.get("textResponseNoTags")||(this.get("textSuccessNoTags").toLowerCase()!=this.get("textResponseNoTags").toLowerCase())){this.trigger("check",{value:false});return false}this.trigger("check",{value:true});return true},setType:function(a){if(a!=this.get("typeContent")){this.set("typeContent",a);this.trigger("changeTypeContent",{newValue:a})}},setAlign:function(a){if(a!=this.get("typeAlign")){this.set("typeAlign",a);this.trigger("changeTypeAlign",{newValue:a})}},reset:function(){this.set("passed",null);this.set("responseValue","");this.trigger("reset")}});
Netex.Activity.Model.FinalFeedbackModel=Netex.Activity.Model.BaseModel.extend({defaults:{finalFeedbackItemCollection:null,testModel:null,isExercise:false},initialize:function(){Netex.Activity.Model.ItemTestBaseModel.prototype.initialize.call(this);var a=this;this.on("change:finalFeedbackItemCollection",function(c,b){b.on("add",function(d){d.set("finalFeedbackModel",a)})});this.set("finalFeedbackItemCollection",new Netex.Activity.Collection.BaseCollection())},reset:function(){this.trigger("reset")},getPartialScore:function(){return this.get("testModel").getPartialScore()},getNumExercises:function(){return this.get("testModel").getSizeExerciseToPassed()},getNumExercisesCorrect:function(){return this.get("testModel").getSizePassed()},getScoreMinToSuccess:function(){var a=this.get("testModel").get("minScoreToSuccess");if(isNaN(a)){a=0}return a},showFeedCorresponds:function(){var b=this.getPartialScore();b=Math.round(b*100)/100;if(b>100){b=100}var d=[];this.get("finalFeedbackItemCollection").each(function(h){if((b>=h.get("fromPercentObtained"))&&(b<=h.get("toPercentObtained"))){d.push(h)}});var a=d[0];if(d.length>1){for(var c=0;c<d.length;c++){var g=d[c];var f=a.get("toPercentObtained")-a.get("fromPercentObtained");var e=g.get("toPercentObtained")-g.get("fromPercentObtained");if(f>e){a=d[c]}}}if(a){this.trigger("showFeed");a.show()}},hideFeedback:function(){this.trigger("hideFeed")}});
Netex.Activity.Model.FinalFeedbackItemModel=Netex.Activity.Model.BaseModel.extend({defaults:{finalFeedbackModel:null,fromPercentObtained:0,toPercentObtained:80,isExercise:false},show:function(){this.trigger("show")},getPartialScore:function(){return this.get("finalFeedbackModel").getPartialScore()},getNumExercises:function(){return this.get("finalFeedbackModel").getNumExercises()},getNumExercisesCorrect:function(){return this.get("finalFeedbackModel").getNumExercisesCorrect()},getScoreMinToSuccess:function(){return this.get("finalFeedbackModel").getScoreMinToSuccess()},hide:function(){this.trigger("hide")}});
Netex.Activity.View.ItemTestBaseView=Backbone.View.extend({elPositiveFeedback:null,elNegativeFeedback:null,initialize:function(){var a=this;var b=this.model.get("id");this.elPositiveFeedback=$(".lcm-activity-feedback-right",$("#"+b));this.elNegativeFeedback=$(".lcm-activity-feedback-wrong",$("#"+b));this.elNeutralFeedback=$(".lcm-activity-feedback-neutral",$("#"+b));this.hideFeedback();this.listenTo(this.model,"check",function(c){a.triggerPassed(c)});this.listenTo(this.model,"reset",function(c){a.hideFeedback(c)});this.listenTo(this.model,"showMyResponses",function(c){a.showMyResponses(c)});this.listenTo(this.model,"showSolutions",function(c){a.showSolutions(c)});$("#"+b).closest("form").show()},triggerPassed:function(a){if(this.model.get("passed")===true||a.value==true){this.showPositiveFeedback()}else{if(this.model.get("passed")===false||a.value==false){this.showNegativeFeedback()}}},hideFeedback:function(){if(this.elPositiveFeedback){$(this.elPositiveFeedback).hide()}if(this.elNegativeFeedback){$(this.elNegativeFeedback).hide()}if(this.elNeutralFeedback){$(this.elNeutralFeedback).hide()}},showPositiveFeedback:function(){this.hideFeedback();$(this.elPositiveFeedback).show(200);this.showNeutralFeedback()},showNegativeFeedback:function(){this.hideFeedback();$(this.elNegativeFeedback).show(200);this.showNeutralFeedback()},showNeutralFeedback:function(){if($(this.elNeutralFeedback).length){$(this.elNeutralFeedback).show(200)}},showMyResponses:function(){},showSolutions:function(){},getItemIndex:function(){var a=this.model.get("testModel").get("itemTestCollection").indexOf(this);if(this.model.get("testModel").get("containCover")){a--}return a}});
Netex.Activity.View.LongFillInView=Netex.Activity.View.ItemTestBaseView.extend({events:{"keyup textarea[type='text']":"changeContent"},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"check",this.disabled);this.listenTo(this.model,"passed",this.passed);this.listenTo(this.model,"reset",this.reset);this.showTrack()},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.showMyResponses();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},disabled:function(){this.model.get("longFillInItemCollection").each(function(a){var b=a.get("id");$("#"+b).attr("disabled","true")})},showMyResponses:function(){this.model.get("longFillInItemCollection").each(function(a){$("#"+a.get("id")).val(a.get("response"))})},passed:function(){if(this.model.get("passed")){}else{}this.disabled()},reset:function(){this.model.get("longFillInItemCollection").each(function(a){var b=a.get("id");$("#"+b).val("");$("#"+b).removeAttr("disabled")})},changeContent:function(a){var c=$(a.currentTarget).attr("id");var b=this.model.get("longFillInItemCollection").findWhere({id:c});b.set("response",$(a.currentTarget).val())}});
Netex.Activity.View.AbcBaseView=Netex.Activity.View.ItemTestBaseView.extend({events:{"click input[type='radio'][name^='abcoption_'],input[type='checkbox'][name^='abcoption_']":"setResponseOption"},endQuestion:false,initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render);var a=this;this.model.get("abcOptionCollection").each(function(b){a.listenTo(b,"checkResponseOption",function(c){a.checkResponseOption(c)});a.listenTo(b,"resetResponseOption",function(c){a.resetResponseOption(c)})});this.showTrack()},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.showMyResponses();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},setResponseOption:function(a){if(this.endQuestion!=true){this.model.get("abcOptionCollection").each(function(b){b.set("response",$("#"+b.get("id")).find("input").is(":checked"))})}},checkResponseOption:function(a){var b=$("input[type='radio'], input[type='checkbox']",$("#"+a.id));b.attr("disabled",true)},showMyResponses:function(){var a=this.model.get("abcOptionCollection").where({response:true});$("input",$(this.el)).removeAttr("checked");if(a.length>0){this.model.get("abcOptionCollection").each(function(b){if(b.get("response")){$("#"+b.get("id")+" input").attr("checked",true);$("#"+b.get("id")+" input")[0].checked=true}})}},showSolutions:function(){this.endQuestion=true;var a=this.model.get("abcOptionCollection").where({success:true});$("input",$(this.el)).removeAttr("checked");if(a.length>0){this.model.get("abcOptionCollection").each(function(b){if(b.get("success")){$("#"+b.get("id")+" input").attr("checked",true);$("#"+b.get("id")+" input")[0].checked=true}})}},resetResponseOption:function(a){var b=$("input[type='radio'], input[type='checkbox']",$("#"+a.id));b.removeAttr("disabled");b.prop("checked",false)},enabledAll:function(){$("input",$(this.el)).removeAttr("checked")}});
Netex.Activity.View.FinalFeedbackItemView=Netex.Activity.View.ItemTestBaseView.extend({initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"show",this.show);this.listenTo(this.model,"hide",this.hide);var b=$(this.el).html();var a=$(this.el).attr("id");if(b.indexOf("%score_obtained%")!=-1){b=(b.replace("%score_obtained%","<span id='score_obtained_"+a+"'></span>"))}if(b.indexOf("%score_min%")!=-1){b=(b.replace("%score_min%","<span id='score_min_"+a+"'></span>"))}if(b.indexOf("%exercises_correct%")!=-1){b=(b.replace("%exercises_correct%","<span id='exercises_correct_"+a+"'></span>"))}if(b.indexOf("%exercises_total%")!=-1){b=(b.replace("%exercises_total%","<span id='exercises_total_"+a+"'></span>"))}$(this.el).html(b)},show:function(){var b=Math.round(this.roundTo(this.model.getPartialScore(),2)*100)/100;var c=this.model.getScoreMinToSuccess();var f=this.model.getNumExercisesCorrect();var e=this.model.getNumExercises();var a=(b>=c);var d=$(this.el).attr("id");$("#score_obtained_"+d).length>0?$("#score_obtained_"+d).text(b):null;$("#score_min_"+d).length>0?$("#score_min_"+d).text(c):null;$("#exercises_correct_"+d).length>0?$("#exercises_correct_"+d).text(f):null;$("#exercises_total_"+d).length>0?$("#exercises_total_"+d).text(e):null;$(".lcm-activity-finalfeedbackitem").hide();$(this.el).show()},hide:function(){$(this.el).hide()},roundTo:function(b,a){return b%1!=0?parseFloat(b).toFixed(2):b}});
Netex.Activity.View.FillGapView=Netex.Activity.View.ItemTestBaseView.extend({events:{"change select":"setResponseOption"},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render);var a=this;this.model.get("gapSimpleCollection").each(function(b){a.listenTo(b,"checkFillGapOption",function(c){a.checkFillGapOption(c)});a.listenTo(b,"resetFillGapOption",function(c){a.resetFillGapOption(c)})});this.showTrack()},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.showMyResponses();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},setResponseOption:function(a){this.model.get("gapSimpleCollection").each(function(b){if(b.get("id")==a.currentTarget.id){b.set("responded",true)}b.get("selectOptionCollection").each(function(c){c.set("response",$("#"+c.get("id")).is(":selected"))})})},checkFillGapOption:function(a){this.disabledItem(a.id)},disabledItem:function(a){$("#"+a).attr("disabled","true")},showMyResponses:function(){var c=this.model.get("objTrack");var b=c?(c.response||"").split("[,]"):null;if(b){var a=-1;this.model.get("gapSimpleCollection").each(function(e){var d="";a++;d=b[a];e.get("selectOptionCollection").each(function(f){var g=$("#"+f.get("id")).attr("rel");var h=g.split("& ").join("&");if(h==d){d=$("#"+f.get("id")).val();f.set("response",d);e.set("responded",true)}});$("#"+e.get("id")).val(d)})}},showSolutions:function(){this.model.get("gapSimpleCollection").each(function(b){var a="";b.get("selectOptionCollection").each(function(c){if(c.get("success")){a=$("#"+c.get("id")).val()}});$("#"+b.get("id")).val(a)})},resetFillGapOption:function(a){var b=$("#"+a.id);b.val(0);$("#"+a.id).removeAttr("disabled");b.attr("seleted",false)}});
Netex.Activity.View.SequenceView=Netex.Activity.View.ItemTestBaseView.extend({firstItemSelect:null,locked:false,showedSolutionsBefore:false,events:{"touchstart .lcm-activity-sequenceoption":"setResponseOption","drop .droppable":"drop","dragover .droppable":"allowDrop","dragstart .draggable":"drag","selectstart .draggable":"handleNativeDD"},drop:function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.dataTransfer=a.originalEvent.dataTransfer;var c=document.getElementById(a.dataTransfer.getData("text"));if(c){var b=c.parentNode;var d=a.currentTarget.firstElementChild||a.currentTarget.children[0];this.moveItems(c,d,true)}},allowDrop:function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},drag:function(a){a.dataTransfer=a.originalEvent.dataTransfer;a.dataTransfer.setData("text",a.target.id)},handleNativeDD:function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}if(b.stopPropagation){b.stopPropagation()}else{b.cancelBubble=true}var a=b.target;if(!$(a).hasClass("lcm-activity-sequenceoption")){a=$(a).closest(".lcm-activity-sequenceoption")[0]}a.dragDrop()},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);var a=this;this.listenTo(this.model.get("testModel"),"init",function(){var b=[];$(".lcm-activity-sequenceoption",$(this.el)).each(function(c,d){b.push($(d).attr("id"))});a.model.set("correctResponses",b);a.initSequenceExercise()});this.listenTo(this.model,"initSequenceExercise",this.initSequenceExercise);this.listenTo(this.model,"reorder",this.onReorderModel);this.listenTo(this.model,"checkResponses",this.checkResponseOption);this.listenTo(this.model,"reset",this.reset)},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.showResponsesObjTrack();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true);return}},setResponseOption:function(a){if(this.locked){return}if(this.firstItemSelect){this.moveItems(this.firstItemSelect,a.currentTarget,true);this.firstItemSelect=null;$(".lcm-activity-box-selected").removeClass("lcm-activity-box-selected")}else{this.firstItemSelect=a.currentTarget;$(this.firstItemSelect).addClass("lcm-activity-box-selected")}},checkResponseOption:function(a){this.locked=true;$(".lcm-activity-box-selected").removeClass("lcm-activity-box-selected")},reset:function(a){this.locked=false;this.firstItemSelect=null;$(".lcm-activity-box-selected").removeClass("lcm-activity-box-selected");this.setResponseOptionCollectionWithPositionsAleatories()},moveItems:function(a,f,e){if(a!=f){var d=[];$(".lcm-activity-sequenceoption",$(this.el)).each(function(g,h){d.push($(h).attr("id"))});var c=$(a).clone(true);var b=$(f).clone(true);$(a).replaceWith(b);$(f).replaceWith(c);for(i=0;i<d.length;i++){if(d[i]==$(a).attr("id")){d[i]=$(f).attr("id")}else{if(d[i]==$(f).attr("id")){d[i]=$(a).attr("id")}}}this.model.setIdsResponse(d,false)}},initSequenceExercise:function(){var a=[];$(".lcm-activity-sequenceoption",$(this.el)).each(function(b,c){a.push($(c).attr("id"))});this.model.setIdsResponse(a);this.reorder()},onReorderModel:function(){this.setResponseOptionCollectionWithPositionsAleatories()},reorder:function(a){if(this.model.get("objTrack")){this.showTrack()}else{this.setResponseOptionCollectionWithPositionsAleatories(true)}},showMyResponses:function(){$("p[responsed]",$(this.el)).show();$("p[correct]",$(this.el)).hide()},showResponsesObjTrack:function(){if(this.model.get("objTrack").response){var a=$(".lcm-activity-sequenceoption",$(this.el));var c=$(a[0]).closest("ol");var e=this.model.get("objTrack").response.split("[,]");var g=[];for(var b=0;b<a.length;b++){var h=a[e[b]];var d=$(h).closest("li");var f=$("li",$(c)).last();$(d).insertAfter($(f));g.push($(a[e[b]]).attr("id"))}this.model.setIdsResponse(g)}},showSolutions:function(){var a=$(".lcm-activity-sequenceoption",$(this.el));var d=this.model.get("correctResponses");if(!this.showedSolutionsBefore){for(var b=0;b<a.length;b++){$("p",$(a[b])).attr("responsed","true")}for(var b=0;b<a.length;b++){var c=$("#"+d[b]+" p[responsed]").clone(true).removeAttr("responsed").attr("correct","true");$(a[b]).append(c)}}$("p[responsed]",$(this.el)).hide();$("p[correct]",$(this.el)).show();this.showedSolutionsBefore=true},setResponseOptionCollectionWithPositionsAleatories:function(h){var d=this.model.get("sequenceOptionCollection").length;var k=[];for(var e=0;e<d;e++){k.push(e)}k=k.sort(function(){return Math.random()-0.5});var j=[];$(".lcm-activity-sequenceoption",$(this.el)).each(function(l,m){j.push($(m).attr("id"))});for(var e=0;e<d;e++){var b=$(".lcm-activity-sequenceoption",$(this.el));var f=k[e];var c=j[f];var g=$(b[e]);var a=$("#"+c);this.moveItems(g,a,false)}}});
Netex.Activity.View.TrueFalseView=Netex.Activity.View.ItemTestBaseView.extend({events:{"click input[type='radio'][name^='abcoption_']":"setResponseOption"},endQuestion:false,initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render);var a=this;this.model.get("abcOptionCollection").each(function(b){a.listenTo(b,"checkResponseOption",function(c){a.checkResponseOption(c)});a.listenTo(b,"resetResponseOption",function(c){a.resetResponseOption(c)})});this.showTrack()},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.showMyResponses();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},setResponseOption:function(a){if(this.endQuestion!=true){this.model.get("abcOptionCollection").each(function(b){b.set("response",$("#"+b.get("id")).find("input").is(":checked"))})}},checkResponseOption:function(a){var b=$("input[type='radio']",$("#"+a.id));b.attr("disabled",true)},showMyResponses:function(){var a=this.model.get("abcOptionCollection").where({response:true});$("input",$(this.el)).removeAttr("checked");if(a.length>0){this.model.get("abcOptionCollection").each(function(b){if(b.get("response")){$("#"+b.get("id")+" input").attr("checked",true);$("#"+b.get("id")+" input")[0].checked=true}})}},showSolutions:function(){this.endQuestion=true;var a=this.model.get("abcOptionCollection").where({success:true});$("input",$(this.el)).removeAttr("checked");if(a.length>0){this.model.get("abcOptionCollection").each(function(b){if(b.get("success")){$("#"+b.get("id")+" input").attr("checked",true);$("#"+b.get("id")+" input")[0].checked=true}})}},resetResponseOption:function(a){var b=$("input[type='radio']",$("#"+a.id));b.removeAttr("disabled");b.prop("checked",false)},enabledAll:function(){$("input",$(this.el)).removeAttr("checked")}});
Netex.Activity.View.FreeResponseView=Netex.Activity.View.ItemTestBaseView.extend({events:{"keyup input[type='text'],input[type='numeric']":"changeContent","keypress input[type='text'],input[type='numeric']":"prevChangeContent"},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"check",this.disabled);this.listenTo(this.model,"passed",this.passed);this.listenTo(this.model,"reset",this.reset);this.showTrack()},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.showMyResponses();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},disabled:function(){this.model.get("freeResponseItemCollection").each(function(a){var b=a.get("id");$("#"+b).attr("disabled","true")})},passed:function(){if(this.model.get("passed")){}else{}this.disabled()},showMyResponses:function(){this.model.get("freeResponseItemCollection").each(function(a){$("#"+a.get("id")).val(a.get("response"))})},showSolutions:function(){this.model.get("freeResponseItemCollection").each(function(a){if(!a.get("success")){$("#"+a.get("id")).val(a.html_entity_decode(a.get("successValue")))}})},reset:function(){this.model.get("freeResponseItemCollection").each(function(a){var b=a.get("id");$("#"+b).val("");$("#"+b).removeAttr("disabled")})},prevChangeContent:function(b){if($(b.currentTarget).attr("type")=="numeric"){var a=(b.which)?b.which:b.keyCode;if(a!=8&&a!=44&&a!=45&&a!=46&&(a<48||a>57)){b.preventDefault()}return true}return true},changeContent:function(a){var c=$(a.currentTarget).attr("id");var b=this.model.get("freeResponseItemCollection").findWhere({id:c});b.set("response",$(a.currentTarget).val())}});
Netex.Activity.View.CoverTextView=Netex.Activity.View.ItemTestBaseView.extend({events:{},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render)}});
Netex.Activity.View.BottomBarView=Netex.Activity.View.ItemTestBaseView.extend({events:{"click .lcm-activity-answer":"onResponse","click .lcm-activity-showresults":"onShowResults","click .lcm-activity-hideresults":"onShowResults","click .lcm-activity-showmyresponses":"onShowMyResponses","click .lcm-activity-showsolutions":"onShowSolutions","click .lcm-activity-reset":"onReset","click .lcm-activity-retry":"onRetry"},testModel:null,enabledShowResults:false,showedFeed:false,showedSolutions:false,showedResponses:false,hasFinalFeedback:false,initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);var a=this;this.listenTo(this.model,"changeScoreCounter",function(){a.changeScoreCounter()});this.listenTo(this.model,"exerciseNotAttemptsDoingStarted",function(){a.onExerciseNotAttemptsDoing()});this.listenTo(this.model,"endedActualExercise",function(){a.onExerciseEnded()});this.listenTo(this.model,"endedExercises",function(){a.onAllExercisesEnded()});this.listenTo(this.model,"initedWithMoreTries",function(){a.onExerciseShowPosibilityTries()});this.listenTo(this.model,"exerciseWithAttemptsDoingStarted",function(){a.onExerciseShowPosibilityTries()});this.listenTo(this.model,"disable_showresults",function(){a.disableShowResults()});if(this.model.getTestComplete()){this.enableShowResults()}else{this.disableShowResults()}},onResponse:function(a){a.preventDefault();this.model.response();$(".lcm-activity-answer",$(this.el)).hide()},onShowResults:function(){if(this.enabledShowResults){if(this.showedFeed){this.showedFeed=false;$(".lcm-activity-showresults",$(this.el)).show();$(".lcm-activity-hideresults",$(this.el)).hide();this.model.hideFinalFeedback();var a=this.model.get("testModel").getItemTestLoaded();if(a.get("attempts")!="unlimited"){if(a.get("hasSolution")!=false){this.showSolutionsOrResponsesButton()}else{this.hideSolutionsAndResponsesButtons()}}else{a.get("stateResetOrResponse")!="responsed"?this.showAnswerAndResetButton():$(".lcm-activity-retry",$(this.el)).show()}}else{this.showedFeed=true;this.hideAllButtons();$(".lcm-activity-showresults",$(this.el)).hide();$(".lcm-activity-hideresults",$(this.el)).show();this.model.showFinalFeedback();this.hideSolutionsAndResponsesButtons()}}},onShowSolutions:function(a){this.showedMyResponses=false;this.showedMySolutions=true;$(".lcm-activity-showmyresponses",$(this.el)).show();$(".lcm-activity-showsolutions",$(this.el)).hide();$(".lcm-activity-retry",$(this.el)).hide();this.model.showSolutions()},onShowMyResponses:function(a){this.showedMyResponses=true;this.showedMySolutions=false;$(".lcm-activity-showmyresponses",$(this.el)).hide();$(".lcm-activity-showsolutions",$(this.el)).show();$(".lcm-activity-retry",$(this.el)).hide();this.model.showMyResponses()},onReset:function(a){this.model.reset()},onRetry:function(a){this.showOnlyResetAndAnswerButtons();this.model.reset()},setElPartialScore:function(a){this.elPartialScore=a},setElTotalScore:function(a){this.elTotalScore=a},changeScoreCounter:function(){$(".lcm-activity-score-results-obtained",$(this.el)).html(Math.round(this.roundTo(this.model.getPartialScore(),2)*100)/100);$(".lcm-activity-score-results-max",$(this.el)).html("100")},roundTo:function(b,a){if(!this.insureNumber(b)){return 0}return b%1!=0?parseFloat(b).toFixed(2):b},insureNumber:function(b,a){var a=!this.isNumber(a)?0:a;return !this.isNumber(b)?a:parseFloat(b)},isNumber:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},onAllExercisesEnded:function(){this.enableShowResults()},onExerciseShowPosibilityTries:function(){this.showOnlyRetryButton()},onExerciseEnded:function(){this.hideAllButtons();if(this.model.get("testModel").getItemTestLoaded().get("hasSolution")!=false){this.showSolutionsOrResponsesButton()}else{this.hideSolutionsAndResponsesButtons()}},onExerciseNotAttemptsDoing:function(){this.showOnlyResetAndAnswerButtons()},disableShowResults:function(){$(".lcm-activity-showresults",$(this.el)).hide();this.enabledShowResults=false},enableShowResults:function(){$(".lcm-activity-showresults",$(this.el)).show();this.enabledShowResults=true},showScoreResults:function(){$(".lcm-activity-score",$(this.el)).show()},hideScoreResults:function(){$(".lcm-activity-score",$(this.el)).hide()},hideAllButtons:function(){$(".lcm-activity-reset",$(this.el)).hide();$(".lcm-activity-answer",$(this.el)).hide();$(".lcm-activity-retry",$(this.el)).hide()},showButtonsManageFinalFeedback:function(){$(".lcm-activity-showresults",$(this.el)).show()},hideButtonsManageFinalFeedback:function(){$(".lcm-activity-showresults",$(this.el)).hide()},showOnlyRetryButton:function(){this.showRetryButton();this.hideSolutionsAndResponsesButtons()},showSolutionsOrResponsesButton:function(){if(this.model.get("testModel").getItemTestLoaded().get("stateShowedResponsesOrSolutions")=="solutions"){$(".lcm-activity-showmyresponses",$(this.el)).show();$(".lcm-activity-showsolutions",$(this.el)).hide()}else{$(".lcm-activity-showmyresponses",$(this.el)).hide();$(".lcm-activity-showsolutions",$(this.el)).show()}},hideSolutionsAndResponsesButtons:function(){$(".lcm-activity-showmyresponses",$(this.el)).hide();$(".lcm-activity-showsolutions",$(this.el)).hide()},showOnlyResetAndAnswerButtons:function(){this.showAnswerAndResetButton();this.hideSolutionsAndResponsesButtons()},showAnswerAndResetButton:function(){$(".lcm-activity-reset",$(this.el)).show();$(".lcm-activity-answer",$(this.el)).show();$(".lcm-activity-retry",$(this.el)).hide()},showRetryButton:function(){$(".lcm-activity-answer",$(this.el)).hide();$(".lcm-activity-reset",$(this.el)).hide();$(".lcm-activity-retry",$(this.el)).show()}});
Netex.Activity.View.TopBarView=Netex.Activity.View.ItemTestBaseView.extend({events:{"click .lcm-button-show-tracking":"onTrackingToggle"},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);var a=this;this.listenTo(this.model,"change:actualPonderatedScore",function(b){a.showPonderatedScore()});this.listenTo(this.model,"change:actualPage",function(b){a.updateNumberActualPage()});this.listenTo(this.model,"change:totalPages",function(b){a.updateNumberTotalPages()});this.listenTo(this.model.get("testModel"),"change:showedFinalFeedback",function(b){a.showOrHideCounterAndNavs()})},onTrackingToggle:function(a){this.model.trackingToggle()},showPonderatedScore:function(){var a=Math.round(this.model.get("actualPonderatedScore")*100)/100;$(".lcm-activity-counter-ponderated-points",$(this.el)).html(a)},updateNumberActualPage:function(){$(".lcm-activity-counter-pages-from",$(this.el)).html(this.model.get("actualPage"))},updateNumberTotalPages:function(){$(".lcm-activity-counter-pages-to",$(this.el)).html(this.model.get("totalPages"))},showOrHideCounterAndNavs:function(){if(this.model.get("testModel").get("showedFinalFeedback")){$(".lcm-activity-nav-counter",$(this.el)).hide();$(".lcm-activity-paginator",$(this.el)).hide();$(".lcm-button-show-tracking",$(this.el)).hide()}else{$(".lcm-activity-nav-counter",$(this.el)).show();$(".lcm-activity-paginator",$(this.el)).show();$(".lcm-button-show-tracking",$(this.el)).show()}}});
Netex.Activity.View.MatchView=Netex.Activity.View.ItemTestBaseView.extend({lastMatchComponentSelect:null,idsLocked:[],idsPairs:[],idFirstElement:null,idSecondElement:null,modelResponse:null,lastTypeFirstElement:null,enabled:true,showedSolutionsBefore:false,events:{"touchstart .lcm-activity-matchleft":"clickMatchLeft","touchstart .lcm-activity-matchright":"clickMatchRight","drop .droppable":"drop","dragover .droppable":"allowDrop","dragstart .draggable":"drag","selectstart .draggable":"handleNativeDD"},drop:function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}if(!this.model.get("enabled")){return true}b.dataTransfer=b.originalEvent.dataTransfer;var d=document.getElementById(b.dataTransfer.getData("text"));if(d){var c=d.parentNode;this.idLastLeft=$(".lcm-activity-matchleft",$(b.currentTarget).closest(".matchCompontentChildren")).attr("id");this.setIdFirstElementOrDest(this.idLastLeft,"left");this.idLastRight=$(d).closest(".lcm-activity-box-right").attr("id");this.setIdFirstElementOrDest(this.idLastRight,"right");var a=$(".lcm-activity-box-right",$(b.currentTarget).closest(".matchCompontentChildren")).attr("id");var e=this.model.get("matchComponentCollection").findWhere({idRightSelected:a});if(e){e.set("idRightSelected","")}}},allowDrop:function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},drag:function(a){a.dataTransfer=a.originalEvent.dataTransfer;a.dataTransfer.setData("text",a.target.id)},handleNativeDD:function(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}if(c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}var b=c.target;if(!$(b).hasClass("lcm-activity-box-right")){var a=$(b).closest(".lcm-activity-box-right")[0];if(a){b=a}}b.dragDrop()},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"reset",this.reset);this.showTrack()},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");if(this.model.get("objTrack").response){this.showResponsesObjTrack(this.model.get("objTrack").response.split("[,]"))}this.model.check()}},setIdFirstElementOrDest:function(b,a){$(".lcm-activity-box-right",$("#"+b).parents(".lcm-activity-matchcomponent")).removeClass("lcm-activity-box-right-connected");if(this.idFirstElement){if(this.idFirstElement!=b){if(!this.idSecondElement&&this.lastTypeFirstElement!=a){if(this.isLocked(this.idFirstElement)){this.undoPairOfRightOrLeft(this.idFirstElement)}this.setIdSecondElement(b,a)}}else{this.setIdFirstElementAct(null,null)}}else{this.setIdFirstElementAct(b,a);this.undoPairOfRightOrLeft(this.idFirstElement)}},setIdSecondElement:function(j,g){this.idSecondElement=j;var c,d,f,e;if(g=="left"){c=j;d=this.idFirstElement;f=$("#"+this.idFirstElement);e=$(".lcm-activity-matchright",$("#"+this.idSecondElement).parents(".lcm-activity-matchcomponent"));$(".lcm-activity-box-right",$(e)).removeClass("lcm-activity-box-right-connected")}else{c=this.idFirstElement;f=$(".lcm-activity-matchright",$("#"+this.idFirstElement).parents(".lcm-activity-matchcomponent"));e=$(".lcm-activity-matchright",$("#"+this.idSecondElement).parents(".lcm-activity-matchcomponent"));d=$(e).attr("id")}var h=this.model.get("matchComponentCollection").findWhere({idRightSelected:d});if(h){h.set("idRightSelected","")}this.replaceItems($(f),$(e));this.lockedId(this.idFirstElement,true);this.lockedId(this.idSecondElement,true);$("div").removeClass("lcm-activity-box-selected");$(".lcm-activity-box-right","#"+d).addClass("lcm-activity-box-right-connected");var a=false;if(this.model.get("checkByText")){this.model.get("matchComponentCollection").each(function(n){var l=(n.get("htmlLeftCorrect")==$(".lcm-activity-box-left","#"+c).html());var m=(n.get("htmlRightCorrect")==$(".lcm-activity-box-right","#"+d).html());if(l&&m){n.set("textRightSelected",n.get("htmlRightCorrect"));n.set("textLeftSelected",n.get("htmlLeftCorrect"));n.setIdRightSelected(n.get("idRightCorrect"));n.setIdLeftSelected(n.get("idLeftCorrect"));a=true}})}if(!a){var k=this.model.get("matchComponentCollection").findWhere({idLeftCorrect:c});var b=k.get("idLeftSelected");k.setIdRightSelected(d);k.setIdLeftSelected(c)}this.idFirstElement=null;this.lastTypeFirstElement=null;this.idSecondElement=null},setIdFirstElementAct:function(b,a){this.idFirstElement=b;this.lastTypeFirstElement=a;this.addClassLastSelect(b,b!=null)},undoPairOfRightOrLeft:function(b){var d=$("#"+b).closest(".matchCompontentChildren");var c=$(".lcm-activity-matchright",$(d)).attr("id");if(this.isLocked(c)){$(".lcm-activity-box-right",$("#"+c)).removeClass("lcm-activity-box-right-connected");this.lockedId(c,false);var a=$(".lcm-activity-matchleft",$(d)).attr("id");this.lockedId(a,false)}},clickMatchLeft:function(c){var b=$(c.currentTarget).closest(".matchCompontentChildren").attr("id");if(!this.model.get("enabled")){return true}var a=$(c.currentTarget).attr("id");this.idLastLeft=a;this.setIdFirstElementOrDest(a,"left")},clickMatchRight:function(c){var b=$(c.currentTarget).closest(".matchCompontentChildren").attr("id");if(!this.model.get("enabled")){return true}var a=$(c.currentTarget).attr("id");this.idLastRight=a;this.setIdFirstElementOrDest(a,"right")},isLocked:function(a){return($.inArray(a,this.idsLocked)!=-1)},lockedId:function(c,b){if(b===false){var a=$.inArray(c,this.idsLocked);if(a>-1){this.idsLocked.splice(a,1)}}else{this.idsLocked.push(c)}},reorder:function(){if(this.model.get("objTrack")!=null){this.model.set("objTrack",null);this.model.sendTracking(true);return}var a=$(".lcm-activity-matchright",$(this.el)).length;var c=$(".lcm-activity-matchright",$(this.el)).map(function(){return this.id});c=c.sort(function(){return Math.random()-0.5});for(i=0;i<a;i++){var b=$(".lcm-activity-matchright",$(this.el));this.replaceItems($(b[i]),$("#"+c[i]))}},replaceItems:function(a,d){if(a.attr("id")!=undefined&&d.attr("id")!=undefined){if(a!=d){var c=$(a).clone(true);var b=$(d).clone(true);$(a).replaceWith(b);$(d).replaceWith(c)}}},addClassLastSelect:function(b,a){$(".lcm-activity-box-selected").removeClass("lcm-activity-box-selected");if(a!==false){$(".lcm-activity-box",$("#"+b)).addClass("lcm-activity-box-selected")}},showMyResponses:function(){var a=this;$(".lcm-activity-box-right",$(this.el)).removeClass("lcm-activity-box-right-connected");this.model.get("matchComponentCollection").each(function(d){var c=d.get("idRightSelected");var b=$(".lcm-activity-matchright",$("#"+d.get("id")));if(c!=null){if(c!=$(b).attr("id")){a.replaceItems($(b),$("#"+c))}$(".lcm-activity-box-right",$("#"+c)).addClass("lcm-activity-box-right-connected")}})},showSolutions:function(){var a=this;this.model.get("matchComponentCollection").each(function(d){var b=d.get("idRightCorrect");var c=$(".lcm-activity-matchright",$("#"+d.get("id")));if(b!=$(c).attr("id")){a.replaceItems($(c),$("#"+b))}$(".lcm-activity-box-right",$("#"+b)).addClass("lcm-activity-box-right-connected")})},showResponsesObjTrack:function(k){var c=$(".lcm-activity-matchright",$(this.el));var l=["a","b","c","d","e","f","g","h","i","j","k","l","m","n"];var f,h,d,g;var a=[];var j=this.model.get("id");for(var e=0;e<c.length;e++){$(c[e]).attr("rel","right_"+j+"_"+e)}for(var e=0;e<k.length;e++){c=$(".lcm-activity-matchright",$(this.el));f=k[e];d=f.split("[.]")[1];g=$.inArray(d,l);var b=$(".lcm-activity-matchright[rel='right_"+j+"_"+g+"']");$(".lcm-activity-box-right",$(b)).addClass("lcm-activity-box-right-connected");this.replaceItems($(c[e]),$(b))}},reset:function(){this.idsLocked=[];this.idFirstElement=null;this.lastTypeFirstElement=null;this.idSecondElement=null;$("div").removeClass("lcm-activity-box-selected");$("div").removeClass("lcm-activity-box-right-connected");this.reorder()}});
Netex.Activity.View.CrossWordView=Netex.Activity.View.ItemTestBaseView.extend({selectedOrigin:null,enabled:true,widthCellInPhtml:27,events:{"keyup input[type='text']":"changeContent","keypress input[type='text']":"prevChangeContent"},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"check",this.check);this.listenTo(this.model,"passed",this.passed);this.listenTo(this.model,"reset",this.reset);var a=this;$(document).ready(function(){a.controlRows();a.showTrack()})},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.model.showMyResponses();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},disabled:function(){var a=this;this.model.get("crossWordCellCollection").each(function(b){var c=b.get("id");a.disabledItem(c)})},disabledItem:function(a){$("#"+a).attr("disabled","true")},check:function(a){this.disabled()},passed:function(){if(this.model.get("passed")){}else{}this.disabled()},showMyResponses:function(){this.model.get("crossWordCellCollection").each(function(a){if(!a.get("success")){$("#"+a.get("id")).val(a.get("responseValue"))}})},showSolutions:function(){this.model.get("crossWordCellCollection").each(function(a){if(!a.get("success")){$("#"+a.get("id")).val(a.get("successValue"))}})},reset:function(){this.model.get("crossWordCellCollection").each(function(a){var b=a.get("id");$("#"+b).val("");$("#"+b).removeAttr("disabled")})},changeContent:function(a){var c=$(a.currentTarget).attr("id");var b=this.model.get("crossWordCellCollection").findWhere({id:c});b.set("responseValue",$(a.currentTarget).val())},prevChangeContent:function(a){if(a.which==0||a.which==8){return true}var b=new RegExp("^[a-zA-Z.0-9]+$");var d=String.fromCharCode(!a.charCode?a.which:a.charCode);if(b.test(d)){var c=$(a.currentTarget).val();if(c.length>0){$(a.currentTarget).val("")}return true}a.preventDefault();return false},controlRows:function(){var b=this.model.get("firstCellRowOcupped");var j=this.model.get("lastCellRowOcupped");var f=this.model.get("firstCellColumnOcupped");var l=this.model.get("lastCellColumnOcupped");var k=[];this.model.get("crossWordCellCollection").each(function(i){actualRow=i.get("pertainToRow");actualColumn=i.get("pertainToColumn");if(actualRow>j){k.push(i.get("id"))}if(actualColumn>l){k.push(i.get("id"))}});_.each(k,function(i){if($("#"+i)){$("#"+i).remove()}});var d=l;$(".crosswordcellblock",$(this.el)).width(d*this.widthCellInPhtml);$(".crosswordcellblock",$(this.el)).css({overflow:"hidden","float":"left"});var g=$($(".inputCrossWordCellBlock",$(this.el))[0]).clone().removeAttr("id").css({visibility:"visible","background-color":"transparent"});$(g).removeAttr("id");$(".crosswordcellblock",$(this.el)).before("<div class='crossword-numbercolumns' style='overflow:hidden;'></div>");var h=$(".crossword-numbercolumns",$(this.el))[0];$(h).append($(g).clone());for(var e=1;e<=d;e++){var c=$(g).clone();$(h).append(c);c.val(e)}$(".crosswordcellblock",$(this.el)).before("<div class='crossword-numberrows' style='float:left;width:"+this.widthCellInPhtml+"px;'></div>");var h=$(".crossword-numberrows",$(this.el))[0];var a=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];for(var e=1;e<=j;e++){var c=$(g).clone();$(h).append(c);c.val(a[e-1])}}});
Netex.Activity.View.LikertScaleView=Netex.Activity.View.ItemTestBaseView.extend({events:{"click input[type='radio']":"setResponseOption"},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);var a=this;this.listenTo(this.model,"checkCollection",function(b){a.checkResponseOption(b)});this.listenTo(this.model,"resetCollection",function(b){a.resetResponseOption(b)})},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");if(this.model.get("objTrack").response){this.showResponsesObjTrack(this.model.get("objTrack").response.split("[,]"))}this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},render:function(){var l=this.model.get("likertItemScaleCollection").length;var f=this.model.get("likertItemAnswerCollection").length;var o="<table>";$(".lcm-activity-scale-block",$(this.el)).remove();$(".lcm-activity-answer-block",$(this.el)).remove();var n="<thead><tr class='lcm-activity-scale-block'>";n+="<th class='lcm-activity-likert-item-scale'> </th>";for(var c=0;c<l;c++){n+="<th class='lcm-activity-likert-item-scale' id='likert-item-scale-"+c+"' >"+this.model.get("likertItemScaleCollection").at(c).get("title")+"</th>"}n+="</tr></thead>";o+=n;var d="<tbody>";for(var b=0;b<f;b++){d+="<tr class='lcm-activity-answer-block'>";d+="<td class='lcm-activity-likert-item-answer'>"+this.model.get("likertItemAnswerCollection").at(b).get("title")+"</td>";var e=this.model.get("likertItemAnswerCollection").at(b).get("id");for(c=0;c<l;c++){var h=this.model.get("likertItemScaleCollection").at(c).get("id");var a=e+"__"+b+"_"+c;d+="<td class='lcm-activity-likert-item-answer'><input id='"+a+"' type='radio' name='"+e+"__likertAnswer_"+b+"' rel='likertAnswer_"+b+"_"+c+"' value='"+a+"' > </td>"}d+="</tr>"}d+="</tbody>";o+=d;o+="</table>";var g=$(this.el).attr("id");var k=$("#"+g+" .lcm-activity-intro");var m=k[k.length-1];$(m).after("<div id='table_"+g+"'></div>");$("#table_"+g,$(this.el)).html(o);this.showTrack()},setResponseOption:function(j){var b=j.currentTarget.value;var g=b.split("__")[0];var c=b.split("__")[1];var a=c.split("_")[0];var h=c.split("_")[1];var k=["a","b","c","d","e","f","g","h","i","j","k","l","m","n"];var i=($("#"+g).text());var d=($("#likert-item-scale-"+h,$(this.el)).text());var f=a+"."+k[h];this.model.get("likertItemAnswerCollection").get(g).setResponse(f);this.model.get("likertItemAnswerCollection").get(g).setTextResponse(d)},showResponsesObjTrack:function(a){var g=["a","b","c","d","e","f","g","h","i","j","k","l","m","n"];var f,b,e,d,h;for(var c=0;c<a.length;c++){f=a[c];b=f.split("[.]")[0];e=f.split("[.]")[1];d=$.inArray(e,g);h="input[rel='likertAnswer_"+b+"_"+d+"']";$(h,$(this.el)).prop("checked",true)}$("input[type='radio']",$(this.el)).attr("disabled",true)},checkResponseOption:function(a){$("input[type='radio']",$(this.el)).attr("disabled",true)},resetResponseOption:function(a){$("input[type='radio']",$(this.el)).attr("disabled",false).prop("checked",false)}});
Netex.Activity.View.TrackingView=Backbone.View.extend({idsOrder:null,events:{"click .lcm-activity-tracking-item":"goSlideTo"},initialize:function(){this.listenTo(this.model,"showTracking",this.showTracking);this.listenTo(this.model,"changeOrderItemTestCollection",this.changeOrderItems);this.listenTo(this.model,"changeItemTrackingModel",this.changeItemTrackingModel);this.listenTo(this.model.get("testModel"),"change:showedFinalFeedback",function(b){a.onShowedFinalFeedback()});var a=this;this.model.get("itemTrackingCollection").each(function(b){a.listenTo(b,"remove",function(c){if($("#"+b.get("id"))[0]){$("#"+b.get("id")).remove()}})})},showTracking:function(){$(this.el).slideToggle({duration:100,easing:"linear"})},changeItemTrackingModel:function(){if(this.idsOrder){this.reorder(this.idsOrder)}},changeOrderItems:function(a){var b=[];for(i=0;i<a.length;i++){b.push(this.model.get("itemTrackingCollection").at(a[i]).get("id"))}this.idsOrder=b},reorder:function(d){var b=$(this.el);var a=$(".lcm-activity-tracking-item",$(this.el));for(var c=0;c<d.length;c++){$(b).append($("#"+d[c]));$("#"+d[c]).addClass("reordered");$("#"+d[c]).addClass("reordered_"+c)}for(c=0;c<a.length;c++){if(!$(a[c]).hasClass("reordered")){$(a[c]).remove()}}this.idsOrder=null},goSlideTo:function(a){var b=$(a.currentTarget).attr("id");var d=$(".lcm-activity-tracking-item",$(this.el));for(var c=0;c<d.length;c++){if(b==$(d[c]).attr("id")){this.model.goSlideToByIndex(c)}}},onShowedFinalFeedback:function(){if(this.model.get("testModel").get("showedFinalFeedback")){$(this.el).hide()}}});
Netex.Activity.View.WordBankView=Netex.Activity.View.ItemTestBaseView.extend({selectedOrigin:null,enabled:true,showedSolutionsBefore:false,events:{"click .returnToInitialPlace":"returnToInitialPlace","touchstart .destinationWordBankItem":"clickDestination","touchstart .originWordBankItem":"clickOrigin","drop .dropable":"drop","dragover .dropable":"allowDrop","dragstart .draggable > span":"drag","selectstart .draggable > span":"handleNativeDD"},drop:function(j){if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}j.dataTransfer=j.originalEvent.dataTransfer;if(!this.enabled){return}var m=$(j.currentTarget).attr("id").split("_")[1];var k=this.selectedOrigin.attr("id").split("_")[1];var b=document.getElementById(j.dataTransfer.getData("text"));var l=b.parentNode;var g=j.currentTarget.firstElementChild||j.currentTarget.children[0];j.currentTarget.replaceChild(b,g);l.appendChild(g);var c=this.model.get("wordBankItemCollection").findWhere({id:k});var e=c.get("responseValue");var d=c.get("title");var f=$(g).attr("id")?$(g).attr("id").split("_")[1]:false;if(f){var a=this.model.get("wordBankItemCollection").findWhere({id:f});if(e){a.set("responseValue",e);a.set("textResponseNoTags",d)}else{$("#destination_"+f).addClass("dropable");$("#destination_"+f).append($("#drag_"+f)).show();var h=this.model.get("wordBankItemCollection").findWhere({id:f});h.set("responseValue","").set("textResponseNoTags","")}}c.set("responseValue",m);var i=c.get("wordBankModel").get("wordBankItemCollection").get(m).get("title");c.set("textResponseNoTags",i);$(this.selectedOrigin).addClass("returnToInitialPlace");$("#destination_"+k).hide()},allowDrop:function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},drag:function(b){b.dataTransfer=b.originalEvent.dataTransfer;b.dataTransfer.setData("text",b.target.id);if(!this.enabled){return}var a=$("#"+b.target.id);if(!a.attr("original_container")){var d=$("#"+b.target.id).closest(".destinationWordBankItem").attr("id");a.attr("original_container",d)}this.selectedOrigin=$(b.currentTarget);var c=$(b.currentTarget).attr("id").split("_")[1];$("#destination_"+c).removeClass("dropable")},handleNativeDD:function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}if(b.stopPropagation){b.stopPropagation()}else{b.cancelBubble=true}var a=b.target;if(typeof a.dragDrop=="function"){a.dragDrop()}},returnToInitialPlace:function(a){var e=$(a.currentTarget).closest(".originWordBankItem").attr("id").split("_")[1];var b=$(a.currentTarget).attr("id").split("_")[1];var d=$("#destination_"+b).html();$("#destination_"+b).addClass("dropable");$("#destination_"+b).html($(a.currentTarget).removeClass("returnToInitialPlace")).show();$("#origin_"+e).html(d);var c=this.model.get("wordBankItemCollection").findWhere({id:b});c.set("responseValue","").set("textResponseNoTags","")},returnAllDragsToInitialPlace:function(){var c=$("[original_container]");for(var b=0;b<c.length;b++){var a=$(c[b]).attr("original_container");$("#"+a).html(c[b]).show()}},initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"check",this.check);this.listenTo(this.model,"reset",this.reset);this.enabled=true;this.moveDestinationToContainer();this.showTrack()},showTrack:function(){if(this.model.get("objTrack")){this.model.set("showingLastTrack",true);this.model.set("stateResetOrResponse","responsed");this.setResponseNoTags();this.showMyResponses();this.model.check();this.model.set("objTrack",null);this.model.sendTracking(true)}},check:function(){this.enabled=false;$(".draggable",$(this.el)).removeAttr("draggable");$(".originWordBankItem",$(this.el)).css({"background-color":"#DFF0D8"})},reset:function(){this.enabled=true;this.selectedOrigin=undefined;$(".draggable",$(this.el)).attr("draggable","true");var a=$(".destinationWordBankItem",$(this.el));for(var b=0;b<a.length;b++){var c=$(a[b]).attr("id").split("_")[1];$(a[b]).html($("#drag_"+c)).show();this.model.get("wordBankItemCollection").findWhere({id:c}).set("responseValue","").set("textResponseNoTags","")}$(".originWordBankItem",$(this.el)).html("<span>&nbsp;</span>");$(".originWordBankItem",$(this.el)).css({"background-color":"#DFF0D8"})},clickDestination:function(c){if(!this.enabled){return}if(this.selectedOrigin){var b=$(c.currentTarget).attr("id").split("_")[1];var a=this.selectedOrigin.attr("id").split("_")[1];var d=this.model.get("wordBankItemCollection").findWhere({id:a});if(d.get("responseValue")==null||d.get("responseValue")==""||d.get("responseValue")==undefined){d.set("responseValue",b);var e=d.get("wordBankModel").get("wordBankItemCollection").get(b).get("title");d.set("textResponseNoTags",e);$(this.selectedOrigin).html($(c.currentTarget).html());$(c.currentTarget).hide()}}},clickOrigin:function(a){if(!this.enabled){return}if(this.selectedOrigin){$(this.selectedOrigin).css({"background-color":"#DFF0D8"})}this.selectedOrigin=$(a.currentTarget);$(a.currentTarget).css({"background-color":"#B6B6B6"});var c=$(a.currentTarget).attr("id").split("_")[1];var b=this.model.get("wordBankItemCollection").findWhere({id:c});if(b.get("responseValue")!=null&&b.get("responseValue")!=""&&b.get("responseValue")!=undefined){this.returnDestinationToContainer($("#destination_"+b.get("responseValue")));b.set("responseValue","");b.set("textResponseNoTags","");$(a.currentTarget).html("<span>&nbsp;</span>")}},moveDestinationToContainer:function(){var a=this.model.get("id");var b=$(".lcm-activity-destinationsContainer",$(this.el))[0];$(b).append($(".destinationWordBankItem",$(this.el)));this.elDestinationContainer=b;this.desorderDestinationsInContainer()},returnDestinationToContainer:function(a){var b=this.model.get("id");var c=$(".lcm-activity-destinationsContainer",$(this.el))[0];$(c).append($(a));$(a).show();this.elDestinationContainer=c},desorderDestinationsInContainer:function(){var e=this.model.get("id");var f=$(".lcm-activity-destinationsContainer",$(this.el))[0];if($(f).length!=0){var c=$(".destinationWordBankItem",$(f)).length;var d=$(".destinationWordBankItem",$(f)).map(function(){return this.id});d=d.sort(function(){return Math.random()-0.5});for(var a=0;a<c;a++){var b=$(".destinationWordBankItem",$(f));this.replaceItems($(b[a]),$("#"+d[a]))}}},replaceItems:function(a,d){if(a!=d){var c=$(a).clone(true);var b=$(d).clone(true);$(a).replaceWith(b);$(d).replaceWith(c)}},showMyResponses:function(){var b=this;this.returnAllDragsToInitialPlace();var c=[];var a=$(".destinationWordBankItem",$(this.el));$(".originWordBankItem",$(this.el)).html("<span>&nbsp;</span>");this.model.get("wordBankItemCollection").each(function(d){var e=$("#destination_"+d.get("id")).html();if(d.get("responseValue")!=""){$("#origin_"+d.get("responseValue")).html(e);$("#destination_"+d.get("id")).hide()}else{$("#destination_"+d.get("id")).show()}});$(b.elDestinationContainer).show()},showSolutions:function(){$(".draggable",$(this.el)).removeAttr("draggable");var a=this;this.returnAllDragsToInitialPlace();this.model.get("wordBankItemCollection").each(function(b){var c=$("#destination_"+b.get("successValue")).html();$(a.elDestinationContainer).hide();$("#origin_"+b.get("id")).html(c)})},setResponseNoTags:function(){this.model.get("wordBankItemCollection").each(function(a){if(a.get("responseValue")){var c=$("#destination_"+a.get("responseValue"));var b=c.text();a.set("textResponseNoTags",b);c.hide()}})}});
Netex.Activity.View.FinalFeedbackView=Netex.Activity.View.ItemTestBaseView.extend({initialize:function(){Netex.Activity.View.ItemTestBaseView.prototype.initialize.call(this);this.listenTo(this.model,"showFeed",this.showFeed);this.listenTo(this.model,"hideFeed",this.hideFeed)},showFeed:function(){var b=this.model.getPartialScore();var c=this.model.getScoreMinToSuccess();var e=this.model.getNumExercisesCorrect();var d=this.model.getNumExercises();b+=0.001;var a=(b>=c);$(this.el).show()},hideFeed:function(){$(this.el).hide()}});
Netex.Activity.View.SimpleItemTestPaginatorView=Backbone.View.extend({events:{"click .lcm-link-before":"onBack","click .lcm-link-after":"onForward"},elCounter:null,elRelativePoints:null,initialize:function(){var a=this;this.listenTo(this.model,"hideItemTest",function(b){a.hideItemTest(b)});this.listenTo(this.model,"showItemTest",function(b){a.showItemTest(b)});this.listenTo(this.model,"showNavigatorPages",function(b){a.showNavigatorPages(b)});this.listenTo(this.model,"setCounter",function(b){a.setCounter(b)});this.listenTo(this.model,"setRelativePoints",function(b){a.setRelativePoints(b)})},hideItemTest:function(a){},showItemTest:function(a){var b=$("#"+a.idObj).closest("form");b.find(".lcm-activity-content").addClass("lcm-activity-hide").removeClass("lcm-activity-show");b.find(".lcm-activity-footer").toggle(!$("#"+a.idObj).hasClass("coverText"));$("#"+a.idObj).addClass("lcm-activity-show")},setCounter:function(a){$(this.elCounter).html(a.points);a.isLast=(a.isLast)?this.hideForwardControl():this.showForwardControl();a.isFirst=(a.isFirst)?this.hideBackControl():this.showBackControl();if(a.isLast&&a.isFirst){this.hideDividerControl()}},setRelativePoints:function(a){$(this.elRelativePoints).html(a.points)},hideNavigatorPages:function(a){$(".lcm-activity-paginator",this.el).hide();$(".lcm-activity-score",this.el).hide()},showNavigatorPages:function(a){$(".lcm-activity-paginator",this.el).show();$(".lcm-activity-score",this.el).show()},onForward:function(a){var c=+$(".lcm-activity-counter-pages-from",$(this.el)).text()||0;var b=+$(".lcm-activity-counter-pages-to",$(this.el)).text()||1;if(c<b){this.model.forward()}else{this.hideForwardControl()}},onBack:function(a){this.model.back()},hideForwardControl:function(){$(".lcm-link-after",this.el).css("visibility","hidden")},hideBackControl:function(){$(".lcm-link-before",this.el).css("visibility","hidden")},hideDividerControl:function(){$(".lcm-activity-paginator-divider",this.el).css("visibility","hidden")},showForwardControl:function(){$(".lcm-link-after",this.el).css("visibility","visible")},showBackControl:function(){$(".lcm-link-before",this.el).css("visibility","visible")},showDividerControl:function(){$(".lcm-activity-paginator-divider",this.el).css("visibility","visible")}});