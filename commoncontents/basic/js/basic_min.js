!function(a){a.fn.iframeAutoHeight=function(c){function b(h){d.debug&&d.debug===!0&&window.console&&console.log(h)}function g(h,j){b("Diagnostics from '"+j+"'");try{b("  "+a(h,window.top.document).contents().find("body")[0].scrollHeight+" for ...find('body')[0].scrollHeight"),b("  "+a(h.contentWindow.document).height()+" for ...contentWindow.document).height()"),b("  "+a(h.contentWindow.document.body).height()+" for ...contentWindow.document.body).height()")}catch(i){b("  unable to check in this state")}b("End diagnostics -> results vary by browser and when diagnostics are requested")}var e;if(a.browser===e){var f=[];return f.push("WARNING: you appear to be using a newer version of jquery which does not support the $.browser variable."),f.push("The jQuery iframe auto height plugin relies heavly on the $.browser features."),f.push("Install jquery-browser: https://raw.github.com/house9/jquery-iframe-auto-height/master/release/jquery.browser.js"),alert(f.join("\n")),a}var d=a.extend({heightOffset:0,minHeight:0,callback:function(){},animate:!1,debug:!1,diagnostics:!1,resetToMinHeight:!1,triggerFunctions:[],heightCalculationOverrides:[]},c);return b(d),this.each(function(){function k(o){var h=null;return jQuery.each(n,function(q,r){return o[r]?(h=l[r],!1):void 0}),null===h&&(h=l["default"]),h}function m(t){d.diagnostics&&g(t,"resizeHeight"),d.resetToMinHeight&&d.resetToMinHeight===!0&&(t.style.height=d.minHeight+"px");var u=a(t,window.top.document).contents().find("body"),s=k(a.browser),q=s(t,u,d,a.browser);b(q),q<d.minHeight&&(b("new height is less than minHeight"),q=d.minHeight+d.heightOffset),b("New Height: "+q),d.animate?a(t).animate({height:q+"px"},{duration:500}):t.style.height=q+"px",d.callback.apply(a(t),[{newFrameHeight:q}])}var n=["webkit","mozilla","msie","opera"],l=[];l["default"]=function(q,o,h){return o[0].scrollHeight+h.heightOffset},jQuery.each(n,function(o,h){l[h]=l["default"]}),jQuery.each(d.heightCalculationOverrides,function(o,h){l[h.browser]=h.calculation});var i=0;if(b(this),d.diagnostics&&g(this,"each iframe"),d.triggerFunctions.length>0){b(d.triggerFunctions.length+" trigger Functions");for(var j=0;j<d.triggerFunctions.length;j++){d.triggerFunctions[j](m,this)}}if(a.browser.webkit||a.browser.opera){b("browser is webkit or opera"),a(this).load(function(){var o=0,h=this,q=function(){m(h)};0===i?o=500:h.style.height=d.minHeight+"px",b("load delay: "+o),setTimeout(q,o),i++});var p=a(this).attr("src");a(this).attr("src",""),a(this).attr("src",p)}else{a(this).load(function(){m(this)})}})}}(jQuery);
var NetexUtils={CalcSupported:(function(){var a=document.createElement("div");a.style.cssText="width:calc(10px); width:-webkit-calc(10px);";return(!!a.style.length)})(),isLocalAndIE:(function(){return((/MSIE (\d+\.\d+);/.test(navigator.userAgent)===true)&&((location.protocol!=="file:")===false))})(),androidVersion:(function(){var b=b||navigator.userAgent;var a=b.match(/Android\s([0-9\.]*)/);return a?parseFloat(a[1],10):-1})(),getNavigatorLang:(function(){return(navigator.browserLanguage?navigator.browserLanguage:navigator.language).substring(0,2)})(),insideTimeLimit:function(c,a,b){return(a-c<=b)},isIpad:(function(){return navigator.userAgent.match(/iPad/i)!==null})(),isIOs:(function(){return !!navigator.platform.match(/iPhone|iPod|iPad/)})(),hasFlash:(function(){var b=false;try{if(window.ActiveXObject){var h=null;try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(g){return}if(h){b=new Boolean(true);b.version=h.GetVariable("$version").substring(4);b.version=b.version.split(",")[0]}}else{var f="Shockwave Flash";var i="application/x-shockwave-flash";var c=navigator.plugins[f];if(c===undefined){return false}else{b=new Boolean(true);var d=c.description;if(d&&!(typeof c.mimeTypes!="undefined"&&c.mimeTypes[i]&&!c.mimeTypes[i].enabledPlugin)){var a=d.replace(f,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");b.version=parseInt(a[0].match(/\d+/),10)}}}return b}catch(g){return false}})(),getStringDate:function(a){return new Date(a).toLocaleDateString()},removeMedia:function(b){try{$(b).find("object").each(function(c,f){var e=$(f)[0];e.style.display="none";for(var d in $(f)[0]){if(typeof e[d]=="function"){e[d]=null}}e.parentNode.removeChild(e)});$(b).find("audio").each(function(c,d){$(d)[0].pause();$(d)[0].src="";$(d).children("source").prop("src","").remove();$(d).remove().length=0;delete (this)});$(b).find("video").each(function(c,d){$(d)[0].pause();$(d)[0].src="";$(d).children("source").prop("src","").remove();$(d).remove().length=0;delete (this)})}catch(a){}}};
var NetexActivityAPI={currentModel:null,model:Backbone.Model.extend({defaults:{},validate:function(a,b){if(!a.id){return"no hay id"}if(!a.type&&!a.interactionType){return"no hay type"}if(!a.result){return"no hay result"}if((_.indexOf(["true-false","choice","fill-in","long-fill-in","likert","matching","performance","sequencing","numeric","other"],a.type)===-1)&&(_.indexOf(["true-false","choice","fill-in","long-fill-in","likert","matching","performance","sequencing","numeric","other"],a.interactionType)===-1)){return"type no valido"}if(_.indexOf(["correct","incorrect","neutral"],a.result)===-1){return"result no valido"}}}),lms:null,activityCollection:null,set:function(c){try{var a;if(_.isNull(this.currentModel)){this.currentModel=new this.model()}this.currentModel.set(c);if(!this.currentModel.isValid()){this.debug(this.currentModel.validationError);a=400}else{if(c.testDomFind){Basic.Singleton.ActivityCollection.updateStatus(this.currentModel);this.currentModel.set("format","NetexActivityAPI");if(c.noSendIteraction!=true){this.lms.setInteraction(this.currentModel.toJSON())}}a=200}return a}catch(b){return 500}},get:function(a){if(this.lms&&typeof this.lms.getInteraction!="undefined"){return this.lms.getInteraction(a)}return null},debug:function(a){},error:function(){}};
var getURLParameter=function(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null};var ApiTinCan=(function(){var B,b=false,z={initilized:{id:"http://adlnet.gov/expapi/verbs/initialized",display:{"en-GB":"initialised","en-US":"initialized",es:"inició",und:"initialised"}},terminated:{id:"http://adlnet.gov/expapi/verbs/terminated",display:{"en-GB":"terminated","en-US":"terminated",es:"cerró",und:"terminated"}},experienced:{id:"http://adlnet.gov/expapi/verbs/experienced",display:{"en-GB":"experienced","en-US":"experienced",es:"visitó",und:"experienced"}},incomplete:{id:"http://adlnet.gov/expapi/verbs/attempted",display:{"en-GB":"attempted","en-US":"attempted",es:"no completó",und:"attempted"}},completed:{id:"http://adlnet.gov/expapi/verbs/completed",display:{"en-GB":"completed","en-US":"completed",es:"completó",und:"completed"}},passed:{id:"http://adlnet.gov/expapi/verbs/passed",display:{"en-GB":"passed","en-US":"passed",es:"aprobó",und:"passed"}},failed:{id:"http://adlnet.gov/expapi/verbs/failed",display:{"en-GB":"failed","en-US":"failed",es:"suspendió",und:"failed"}},answered:{id:"http://adlnet.gov/expapi/verbs/answered",display:{"en-GB":"answered","en-US":"answered",es:"respondió",und:"answered"}}},q=["not attempted","incomplete","completed","passed","failed"],D=["N","I","C","P","F"],s,f=q[0],o=0,m="",n="",h=0,c=1,i=0,j=0,d=false,w="1.0.0",l=function(H){try{var G=typeof(H)==="string"?$.parseJSON(H):H;if(typeof G.status!="undefined"){var E=$.inArray(G.status,D);if(E===-1){f=q[0]}else{f=q[E]}}if(typeof G.score!="undefined"){o=$.isNumeric(G.score)?+G.score:0}if(typeof G.suspend!="undefined"){m=G.suspend;if(_.has(G,"activity")){m+="|"+JSON.stringify(G.activity)}}if(typeof G.location!="undefined"){n=G.location}h=$.isNumeric(G.totaltime)?+G.totaltime:0;c=($.isNumeric(G.attemps)?+G.attemps:0)+1;$(window).trigger({type:"dataTrackingReady"});___debug("parseStateData:\n status:"+f+"\nscore:"+o+"\nsuspend:"+m+"\nlocation:"+n);y()}catch(F){$(window).trigger({type:"dataTrackingReady"});y()}},v=function(){if(_openInLearningApp){l(learningAppBridge.getStateFromApp());return true}else{B.getState(TrackingConfig.TinCanStateId,{callback:function(E,F){if(F&&typeof(F.contents)!="undefined"&&typeof(F.contents)!=undefined&&typeof(F.contents)!="null"&&typeof(F.contents)!=null){l(F.contents)}else{$(window).trigger({type:"dataTrackingReady"});y()}}})}},y=function(){var G;var E;var F=m.split("|");E=F.length===4?F[3]:"{}";if(!E){E="{}"}F.pop();F=F.join("|");p();G={status:f.substring(0,1).toUpperCase(),score:o,suspend:F,location:n,totaltime:_totaltime,timeStamp:new Date().getTime(),activity:JSON.parse(E)};___debug("sendState to app:\n"+JSON.stringify(G));if(_openInLearningApp){learningAppBridge.sendStateToApp(JSON.stringify(G))}else{B.setState(TrackingConfig.TinCanStateId,G,{contentType:"application/json"})}},p=function(){var F=new Date().getTime()-s.getTime()-i,G,E=h+F;_totaltime=E;G={completion:"passed,failed,completed".indexOf(f)!==-1,score:{scaled:o/100},duration:u(parseInt(E/1000,10))};if(f==="passed"||f==="failed"){$.extend(G,{success:f==="passed"})}return G},A=function(){a(B.prepareStatement({verb:z[f],result:p()}))},u=function(H){var G=parseInt((H)/3600,10),E=parseInt(((H)%3600)/60,10),F=parseInt(((H)%3600)%60,10),I="PT";I+=(G>0)?G+"H":"";I+=(E>0)?E+"M":"";I+=F+"S";return I},e=function(){if(d){i+=new Date().getTime()-j;d=false}},t=function(){d=true;j=new Date().getTime()},C=function(){if(!b){y();a(B.prepareStatement({verb:z.terminated,result:p()}));b=true}},g=function(){if(!b){y();a(B.prepareStatement({verb:z.terminated,result:p()}));b=true}},a=function(E){r(E)},k=function(F,H,E){var G;return function(){var L=this,K=arguments;var J=function(){G=null;if(!E){F.apply(L,K)}};var I=E&&!G;clearTimeout(G);G=setTimeout(J,H);if(I){F.apply(L,K)}}},r=k(function(E){if(_openInLearningApp){x(JSON.stringify(E.asVersion(w)))}else{B.sendStatements([E])}},1000),x=function(E){learningAppBridge.sendStatementToApp(E)};return{init:function(){try{_openInLearningApp=getURLParameter("in_app")==="true";w=getURLParameter("tin_can_version");var F=TrackingConfig.TinCanAuth?{auth:TrackingConfig.TinCanAuth}:{username:TrackingConfig.TinCanAuthUser,password:TrackingConfig.TinCanPassword};window.addEventListener("pageshow",e,false);window.addEventListener("pagehide",t,false);window.addEventListener("beforeunload",C,false);window.addEventListener("unload",g,false);s=new Date();if(getURLParameter("endpoint")){B=new TinCan({url:window.location.href})}else{if(TrackingConfig.TinCanEndPoint.substring(TrackingConfig.TinCanEndPoint.length-1)!=="/"){TrackingConfig.TinCanEndPoint+="/"}B=new TinCan({activity:{id:"http://www.learningcoffee.com/"+$("body").attr("data-course-id"),objectType:"Activity",definition:{name:{und:window.document.title}}},recordStores:[$.extend({endpoint:TrackingConfig.TinCanEndPoint,version:"1.0.0"},F)]});B.actor=new TinCan.Agent({mbox:TrackingConfig.TinCanUserMail,name:TrackingConfig.TinCanUserName})}a(B.prepareStatement({verb:z.initilized}));v();return true}catch(E){___debug(E.message);return false}},getStatus:function(){return f},setStatus:function(E){if($.inArray(E,q)!==-1){if(f!=E){f=E;y();A()}}},getScore:function(){return o},setScore:function(E){if($.isNumeric(E)){E=+E;if(o!==E){o=E;y();A()}}},getMasteryScore:function(){return TrackingConfig.TinCanMasteryScore},setSuspend:function(E){m=E},getSuspend:function(){return m},setLocation:function(E,F){if(E!=n){n=E;y();a(B.prepareStatement({object:{id:"http://www.learningcoffee.com/"+$("body").attr("data-course-id")+"/"+E,objectType:"Activity",definition:{name:{"en-US":F}}},verb:z.experienced,context:{contextActivities:{parent:"http://www.learningcoffee.com/"+$("body").attr("data-course-id")}}}))}},getLocation:function(){return n},setInteraction:function(E){y();var F={object:{id:"http://www.learningcoffee.com/"+$("body").attr("data-course-id")+"/"+E.getIdDetail(),objectType:"Activity",definition:{name:{und:E.getDescription().trim()},type:"http://adlnet.gov/expapi/activities/cmi.interaction",interactionType:E.getTypeActivity(),correctResponsesPattern:[E.getCorrectResponse()],choices:E.getArrayChoices()}},verb:z.answered,context:{contextActivities:{parent:"http://www.learningcoffee.com/"+$("body").attr("data-course-id")}},result:{success:E.getResult()==="correct",response:E.getStudentResponse()}};a(B.prepareStatement(F))},getInteraction:function(E){return null},getLearnerResponse:function(E){return null},getNumberInteractions:function(){return 0},sendState:function(){y()},getLearnerId:function(){return"unknown"},exit:function(){if(!b){y();a(B.prepareStatement({verb:z.terminated,result:p()}));b=true}}}});var ApiScorm_1_2=(function(){var g,d,c,h,e,b,a,f=false;var i=function(){var l,j,m="",k=new Date().getTime();k-=g;k=Math.round(k/1000);l=Math.floor(k/3600);k=k-(l*3600);j=Math.floor(k/60);k=k-(j*60);if(l<10){m+="0"}m+=l+":";if(j<10){m+="0"}m+=j+":";if(k<10){m+="0"}m+=k;return m};return{init:function(){g=new Date().getTime();pipwerks.SCORM.version="1.2";pipwerks.SCORM.handleExitMode=false;setInterval(function(){pipwerks.SCORM.save()},300000);return pipwerks.SCORM.init()},getStatus:function(){d=d?d:pipwerks.SCORM.get("cmi.core.lesson_status");return d},setStatus:function(j){d=j;pipwerks.SCORM.set("cmi.core.lesson_status",d);pipwerks.SCORM.save()},getScore:function(){if(c){return c}else{c=pipwerks.SCORM.get("cmi.core.score.raw");c=$.isNumeric(c)?+c:0;return c}},setScore:function(j){if($.isNumeric(j)){c=parseInt(j,10);pipwerks.SCORM.set("cmi.core.score.raw",c);pipwerks.SCORM.set("cmi.core.score.min",0);pipwerks.SCORM.set("cmi.core.score.max",100);pipwerks.SCORM.save()}},getMasteryScore:function(){if(b){return b}b=pipwerks.SCORM.get("cmi.student_data.mastery_score");if(!$.isNumeric(b)){b=80}return b},setSuspend:function(j){if(h.length>1&&j.length<2){return}h=j;pipwerks.SCORM.set("cmi.suspend_data",h)},getSuspend:function(){if(h){return h}else{h=pipwerks.SCORM.get("cmi.suspend_data");h=(h==="null"||h===null)?"":h;return h}},setLocation:function(j,k){e=j;pipwerks.SCORM.set("cmi.core.lesson_location",e);pipwerks.SCORM.save()},getLocation:function(){if(e){return e}else{e=pipwerks.SCORM.get("cmi.core.lesson_location");e=(e==="null"||e===null)?"":e;return e}},setInteraction:function(j){pipwerks.SCORM.set("cmi.interactions."+a+".id",j.getId());pipwerks.SCORM.set("cmi.interactions."+a+".type",j.getTypeActivity());pipwerks.SCORM.set("cmi.interactions."+a+".result",j.getResult());pipwerks.SCORM.set("cmi.interactions."+a+".student_response",j.getStudentResponse());pipwerks.SCORM.set("cmi.interactions."+a+".correct_responses.0.pattern",j.getCorrectResponse());pipwerks.SCORM.set("cmi.interactions."+a+".objectives.0.id",j.getIdDetail());a++},getInteraction:function(j){return null},getLearnerResponse:function(j){return null},getNumberInteractions:function(){a=pipwerks.SCORM.get("cmi.interactions._count");a=$.isNumeric(a)?+a:0;return a},getLearnerId:function(){return pipwerks.SCORM.get("cmi.core.student_id")},exit:function(){if(!f){pipwerks.SCORM.set("cmi.core.session_time",i());pipwerks.SCORM.connection.terminate();f=true}}}});var ApiScorm_2004=(function(){var h,e,d,i,f,c,b,g=false;var j=function(){return a(parseInt((new Date().getTime()-h)/1000,10))};var a=function(o){var n=parseInt((o)/3600,10),k=parseInt(((o)%3600)/60,10),l=parseInt(((o)%3600)%60,10),p="PT";p+=(n>0)?n+"H":"";p+=(k>0)?k+"M":"";p+=l+"S";return p};return{init:function(){h=new Date().getTime();pipwerks.SCORM.version="2004";pipwerks.SCORM.handleExitMode=false;setInterval(function(){pipwerks.SCORM.save()},300000);return pipwerks.SCORM.init()},getStatus:function(){if(e){return e}else{var k=pipwerks.SCORM.get("cmi.success_status"),l=pipwerks.SCORM.get("cmi.completion_status");e=(k==="unknown")?l:k;return e}},setStatus:function(k){e=k;if(e==="passed"||e==="failed"){pipwerks.SCORM.set("cmi.success_status",e);pipwerks.SCORM.set("cmi.completion_status","completed")}else{pipwerks.SCORM.set("cmi.completion_status",e);pipwerks.SCORM.set("cmi.success_status","unknown")}},getScore:function(){if(d){return d}else{d=pipwerks.SCORM.get("cmi.score.raw");d=$.isNumeric(d)?+d:0;return d}},setScore:function(k){if($.isNumeric(k)){d=parseInt(k,10);pipwerks.SCORM.set("cmi.score.raw",d);pipwerks.SCORM.set("cmi.score.min",0);pipwerks.SCORM.set("cmi.score.max",100);pipwerks.SCORM.set("cmi.score.scaled",d/100);pipwerks.SCORM.save()}},getMasteryScore:function(){if(c){return c}c=pipwerks.SCORM.get("cmi.scaled_passing_score");if(!$.isNumeric(c)){c=TrackingConfig.mastery_score}return c},setSuspend:function(k){if(i.length>1&&k.length<2){return}i=k;pipwerks.SCORM.set("cmi.suspend_data",i)},getSuspend:function(){i=i?i:pipwerks.SCORM.get("cmi.suspend_data");return i},setLocation:function(k,l){f=k;pipwerks.SCORM.set("cmi.location",f);pipwerks.SCORM.save()},getLocation:function(){f=f?f:pipwerks.SCORM.get("cmi.location");return f},setInteraction:function(m){var q=m.getIdDetail(),n=m.getTypeActivity(),l=m.getResult(),p=m.getStudentResponse(),k=m.getCorrectResponse(),o=m.getDescription();if(l==="wrong"){l="incorrect"}pipwerks.SCORM.set("cmi.interactions."+b+".id",q);pipwerks.SCORM.set("cmi.interactions."+b+".type",n);pipwerks.SCORM.set("cmi.interactions."+b+".result",l);pipwerks.SCORM.set("cmi.interactions."+b+".learner_response",p);pipwerks.SCORM.set("cmi.interactions."+b+".description",o);if(k!==null){pipwerks.SCORM.set("cmi.interactions."+b+".correct_responses.0.pattern",k)}b++},getInteraction:function(n){var o,k;var m=pipwerks.SCORM.get("cmi.interactions._count");m=$.isNumeric(m)?+m:0;var l=m-1;for(l;l>=0;l--){o=pipwerks.SCORM.get("cmi.interactions."+l+".id");if(o==n){if(k){k.tries=k.tries+1}else{k={};k.id=pipwerks.SCORM.get("cmi.interactions."+l+".id");k.type=pipwerks.SCORM.get("cmi.interactions."+l+".type");k.result=pipwerks.SCORM.get("cmi.interactions."+l+".result");k.learner_response=pipwerks.SCORM.get("cmi.interactions."+l+".learner_response");k.tries=1}}}return k},getLearnerResponse:function(m){var k,l=b-1,n;for(l;l>=0;l--){n=pipwerks.SCORM.get("cmi.interactions."+l+".id");if(n===m){return pipwerks.SCORM.get("cmi.interactions."+l+".learner_response")}}return null},getNumberInteractions:function(){b=pipwerks.SCORM.get("cmi.interactions._count");b=$.isNumeric(b)?+b:0;return b},getLearnerId:function(){return pipwerks.SCORM.get("cmi.learner_id")},exit:function(){if(!g){pipwerks.SCORM.set("cmi.session_time",j());pipwerks.SCORM.set("cmi.exit","suspend");pipwerks.SCORM.connection.terminate();g=true}}}});var ApiNone=(function(){var f="not attempted",a=0,e="",d="",c=0,b=[];return{init:function(){return true},getStatus:function(){return f},setStatus:function(g){f=g},getScore:function(){return a},setScore:function(g){a=parseInt(g,10)},getMasteryScore:function(){return 100},setSuspend:function(g){e=g},getSuspend:function(){return e},setLocation:function(g,h){d=g},getLocation:function(){return d},setInteraction:function(g){},getInteraction:function(g){return null},getLearnerResponse:function(g){return null},getNumberInteractions:function(){return 0},getLearnerId:function(){return"unknown"},exit:function(){window.top.close()}}});var ___debug=function(a){};var TrackingWrapper=(function(){var b=false,g,j,f=0,d="not attempted";var a=function(k){___debug(k)};var c=function(){if(typeof TrackingConfig=="undefined"){TrackingConfig=TrackingConfigDefault}if((typeof TrackingConfig.success_status=="undefined")){TrackingConfig.success_status=TrackingConfigDefault.success_status}else{if((TrackingConfig.success_status!=="passed")&&(TrackingConfig.success_status!=="completed")){TrackingConfig.success_status=TrackingConfigDefault.success_status}}if(typeof TrackingConfig.unsuccess_status=="undefined"){TrackingConfig.unsuccess_status=TrackingConfigDefault.unsuccess_status}else{if((TrackingConfig.unsuccess_status!=="failed")&&(TrackingConfig.unsuccess_status!=="incomplete")){TrackingConfig.unsuccess_status=TrackingConfigDefault.unsuccess_status}}if(typeof TrackingConfig.send_score=="undefined"){TrackingConfig.send_score=TrackingConfigDefault.send_score}if(typeof TrackingConfig.send_status=="undefined"){TrackingConfig.send_status=TrackingConfigDefault.send_status}if(typeof TrackingConfig.send_interactions=="undefined"){TrackingConfig.send_interactions=TrackingConfigDefault.send_interactions}};var h=function(k){if(typeof k.getId=="undefined"){k.getId=function(){var l="",m=0;while(m<6){l+=i();m++}return(l)};k.getTypeActivity=function(){return k.interactionType};k.getResult=function(){return k.success===true?"correct":"wrong"};k.getStudentResponse=function(){return k.response};k.getCorrectResponse=function(){return k.correctResponsesPattern.toString()};k.getArrayChoices=function(){var o=new Array();var p,n,l;for(var m in k.choices){p=k.choices[m].id;n=k.choices[m].description;l={id:p,description:{und:n}};o.push(l)}return o};k.getIdDetail=function(){return k.id};k.getDescription=function(){return k.description}}else{k.choices=[]}return k};var i=function(){return(String.fromCharCode(e()))};var e=function(){var k=Math.floor((Math.random()*122)+1)+48;if((k>48&&k<57)||(k>65&&k<90)||(k>97&&k<122)){return k}else{return(e())}};return{init:function(l){var k=this;c();j=TrackingConfig.type;switch(j){case"tincan":g=new ApiTinCan();break;case"scorm_1_2":g=new ApiScorm_1_2();break;case"scorm_2004":g=new ApiScorm_2004();break;default:j="none";g=new ApiNone()}if(!g.init()){if(l!==10){setTimeout(function(){k.init(_.isNaN(+l)?1:(+l)+1)},1000);return null}else{j="none";g=new ApiNone()}}a("init:"+j);if(j!=="tincan"){$(window).trigger({type:"dataTrackingReady"});if(j!=="none"){window.onbeforeunload=function(){g.exit()};window.onunload=function(){g.exit()}}}else{if(getURLParameter("endpoint")){window.addEventListener("beforeunload",function(m){var n="";g.sendState();(m||window.event).returnValue=n;return n});window.addEventListener("unload",function(m){g.exit()})}else{window.addEventListener("unload",function(m){g.sendState();g.exit()})}}},getStatus:function(){var k=TrackingConfig.send_status==="true"?g.getStatus():d;a("getStatus:"+k);return k},setStatus:function(l){var n=["not attempted","incomplete","completed","passed","failed"],m=["N","I","C","P","F"],k=l.length===1?$.inArray(l.toUpperCase(),m):$.inArray(l.toLowerCase(),n);if(k!==-1){l=n[k];if(l==="completed"||l==="passed"){l=TrackingConfig.success_status}if(l==="failed"){l=TrackingConfig.unsuccess_status}if(TrackingConfig.send_status==="true"){a("setStatus:"+l);g.setStatus(l)}else{if(l==="incomplete"&&d==="not attempted"){a("setStatus:"+l);g.setStatus(l)}d=l}}},getScore:function(){var k=(TrackingConfig.send_score==="true")?g.getScore():f;if(!$.isNumeric(k)){g_sScore=0}a("getScore:"+k);return k},setScore:function(k){if($.isNumeric(k)){k=parseInt(k,10);if(TrackingConfig.send_score==="true"){if(TrackingConfig.send_status==="false"){if(k>=g.getMasteryScore()&&g.getScore()===0){a("setScore:"+k);g.setScore(k)}else{f=k}}else{if(k>g.getScore()){a("setScore:"+k);g.setScore(k)}}}else{f=k}}},getMasteryScore:function(){var k=g.getMasteryScore();a("getMasteryScore:"+k);return k},setSuspend:function(k){a("setSuspend:"+k);g.setSuspend(k)},getSuspend:function(){var k=g.getSuspend();a("getSuspend:"+k);return k},setLocation:function(k,l){a("setLocation:"+k+","+l);g.setLocation(k,l)},getLocation:function(){var k=g.getLocation();a("getLocation:"+k);return k},setInteraction:function(k){if(TrackingConfig.send_interactions==="true"){k=h(k);a("setInteraction:");a("id:"+k.getId());a("idDetail:"+k.getIdDetail());a("correct_responses:"+k.getCorrectResponse());a("student_response:"+k.getStudentResponse());a("description:"+k.getDescription());a("result:"+k.getResult());a("type:"+k.getTypeActivity());g.getNumberInteractions();g.setInteraction(k)}},getInteraction:function(k){if(TrackingConfig.send_interactions==="true"){return g.getInteraction(k)}},getLearnerResponse:function(l){var k=g.getLearnerResponse(l);a("getLearnerResponse: "+k);return k},getNumberInteractions:function(){var k=g.getNumberInteractions();a("getNumberInteractions:"+k);return k},getType:function(){a("getType:"+j);return j},getLearnerId:function(){var k=g.getLearnerId();a("getLearnerId:"+k);return k},exit:function(){g.exit()}}});var TrackingConfigDefault={type:"none",success_status:"passed",unsuccess_status:"failed",send_score:"true",send_status:"true",send_interactions:"true"};
var Basic={Model:{},Collection:{},View:{},Router:{},Singleton:{},CourseId:document.getElementsByTagName("body")[0].getAttribute("data-course-id"),oApiTracking:null,Main:(function(){var e=function(){Basic.Singleton.RouterModel=new Basic.Model.RouterModel()},h=function(){Basic.Singleton.ActivityCollection=new Basic.Collection.ActivityCollection();Basic.Singleton.VideoCollection=new Basic.Collection.VideoCollection();Basic.Singleton.PageCollection=new Basic.Collection.PageCollection();Basic.Singleton.MenuCollection=new Basic.Collection.MenuCollection();Basic.Singleton.HeaderCollection=new Basic.Collection.HeaderCollection();Basic.Singleton.FooterCollection=new Basic.Collection.FooterCollection();Basic.Singleton.SearchCollection=new Basic.Collection.SearchCollection();Basic.Singleton.SearchBoxCollection=new Basic.Collection.SearchBoxCollection();Basic.Singleton.SearchMatchCollection=new Basic.Collection.SearchMatchCollection();Basic.Singleton.ModuleFooterCollection=new Basic.Collection.ModuleFooterCollection()},i=function(){Basic.Singleton.HeaderView=new Basic.View.HeaderView({model:Basic.Singleton.HeaderCollection,el:$("#headerView")});Basic.Singleton.PageView=new Basic.View.PageView({model:Basic.Singleton.PageCollection,el:$("#pageView")});Basic.Singleton.MenuView=new Basic.View.MenuView({model:Basic.Singleton.MenuCollection,el:$("#menuView")});Basic.Singleton.FooterView=new Basic.View.FooterView({model:Basic.Singleton.FooterCollection,el:$("#footerView")});Basic.Singleton.SearchView=new Basic.View.SearchView({model:Basic.Singleton.SearchBoxCollection,el:$("#searchView")});Basic.Singleton.ModuleFooterView=new Basic.View.ModuleFooterView({model:Basic.Singleton.ModuleFooterCollection,el:$("#moduleFooterView")})},a=function(j){return j.text()||j.html()},f=function(){var n=(Basic&&Basic.oApiTracking)?(Basic.oApiTracking.getSuspend()||"").split("|"):false;if(n&&n.length>2){var k=(n&&n.length>2)?n[n.length-1]:false;var q;if(k){try{q=JSON.parse(k)}catch(l){q=null}if(q){Netex.Activity.Singleton=Netex.Activity.Singleton||{};Netex.Activity.Singleton.StateInitQuizzes=Netex.Activity.Singleton.StateInitQuizzes||{};if(q.StateInitQuizzes){Netex.Activity.Singleton.StateInitQuizzes=q.StateInitQuizzes}}}}if(Netex.Activity&&Netex.Activity.Singleton&&Netex.Activity.Singleton.StateInitQuizzes){for(var j in Netex.Activity.Singleton.StateInitQuizzes){var p=Netex.Activity.Singleton.StateInitQuizzes[j];if(p.ids_ordered){for(var m=0;m<p.ids_ordered.length;m++){var o={pageId:p.page_id,lang:p.lang,actId:j,position:Basic.Singleton.ActivityCollection.where({lang:p.lang}).length};if(p.evaluable){Basic.Singleton.ActivityCollection.addData(o)}}}}}},g=function(){var j;$("script[data-type='content']").each(function(k,l){j=$(l);Basic.Singleton.PageCollection.add({html:a(j)+"<script>Basic.Singleton.PageView.transitionIn();<\/script>",pageId:j.attr("data-page-id"),pageTitle:j.attr("data-page-title"),lang:j.attr("data-lang"),status:j.attr("data-page-initial-status"),position:Basic.Singleton.PageCollection.where({lang:j.attr("data-lang")}).length});_.each(_.map(a(j).replace(/\n/g,"").match(/data-activity-tracking-extended=".*?numQuizzes"/g),function(A){var p,o,u,q,B,n,y,s=A.split("|");u=s[0].split('data-activity-tracking-extended="')[1];for(o in s){if(s[o].indexOf("dataActTrackEnd")!=-1){p=(s[o].split("dataActTrackEnd")[0]==="true")}if(s[o].indexOf("limited")!=-1){q=s[o].split("limited")[0]}if(s[o].indexOf("group")!=-1){B=s[o].split("group")[0]}if(s[o].indexOf("hasCover")!=-1){n=s[o].split("hasCover")[0]}if(s[o].indexOf("numQuizzes")!=-1){y=s[o].split("numQuizzes")[0]}}Netex.Activity.Singleton=Netex.Activity.Singleton||{};Netex.Activity.Singleton.StateInitQuizzes=Netex.Activity.Singleton.StateInitQuizzes||{};Netex.Activity.Singleton.StateInitQuizzes[B]=Netex.Activity.Singleton.StateInitQuizzes[B]||{};Netex.Activity.Singleton.StateInitQuizzes[B]["hasCover"]=n;var v=(Netex.Activity.Singleton.StateInitQuizzes&&Netex.Activity.Singleton.StateInitQuizzes[B]&&Netex.Activity.Singleton.StateInitQuizzes[B]["no_regenerate"]=="true");if(!v){(!Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"])?Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"]=[u]:Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"].push(u);Netex.Activity.Singleton.StateInitQuizzes[B]["page_id"]=j.attr("data-page-id");Netex.Activity.Singleton.StateInitQuizzes[B]["lang"]=j.attr("data-lang");Netex.Activity.Singleton.StateInitQuizzes[B]["evaluable"]=p;if(Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"].length==y){if(!Netex.Activity.Singleton.StateInitQuizzes[B]["order"]){var x=[];if(n!="true"){for(var t=0;t<y;t++){x.push(t)}x=x.sort(function(){return Math.random()-0.5});x=x.slice(0,q)}else{for(var t=1;t<y;t++){x.push(t)}x=x.sort(function(){return Math.random()-0.5});x=x.slice(0,q);var w=x.reverse();w.push(0);x=w.reverse()}Netex.Activity.Singleton.StateInitQuizzes[B]=Netex.Activity.Singleton.StateInitQuizzes[B]||{};Netex.Activity.Singleton.StateInitQuizzes[B]["order"]=x}var m=Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"].toString().split(",");for(var r=0;r<q;r++){var z=Netex.Activity.Singleton.StateInitQuizzes[B]["order"][r];Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"][r]=m[z]}Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"]=Netex.Activity.Singleton.StateInitQuizzes[B]["ids_ordered"].slice(0,q);Netex.Activity.Singleton.StateInitQuizzes[B]["no_regenerate"]="true"}}}),function(m){});_.each(_.map(a(j).replace(/\n/g,"").match(/data-activity-tracking=".*?dataActTrackEnd"/g),function(m){return m.replace('data-activity-tracking="',"").replace('dataActTrackEnd"',"").substring()}),function(m){var n=m.split("|")[0];if(a(j).indexOf('data-activity-tracking-extended="'+n)!=-1){}else{if(m.split("|")[1]==="true"){Basic.Singleton.ActivityCollection.addData({pageId:j.attr("data-page-id"),lang:j.attr("data-lang"),actId:m.split("|")[2],position:Basic.Singleton.ActivityCollection.where({lang:j.attr("data-lang")}).length})}}});_.each(_.map(a(j).replace(/\n/g,"").match(/data-video-tracking=".*?dataVidTrackEnd"/g),function(m){return m.replace('data-video-tracking="',"").replace('dataVidTrackEnd"',"").substring()}),function(m){Basic.Singleton.VideoCollection.add({pageId:j.attr("data-page-id"),lang:j.attr("data-lang"),vidId:m.split("|")[0],position:Basic.Singleton.VideoCollection.where({lang:j.attr("data-lang")}).length,evaluable:m.split("|")[1]==="true",status:m.split("|")[1]==="true"?"N":"C"})});j.remove()});$("script[data-type='menu']").each(function(k,l){j=$(l);Basic.Singleton.MenuCollection.add({html:a(j),lang:j.attr("data-lang")});j.remove()});$("script[data-type='header']").each(function(k,l){j=$(l);Basic.Singleton.HeaderCollection.add({html:a(j),lang:j.attr("data-lang"),navigation:j.attr("data-navigation"),sectionNavigation:j.attr("data-section-navigation"),collapsedSections:j.attr("data-collapsed-sections")==="true"?true:false,transitionIn:j.attr("data-transition-in"),transitionOut:j.attr("data-transition-out")});j.remove()});$("script[data-type='footer']").each(function(k,l){j=$(l);Basic.Singleton.FooterCollection.add({html:a(j),lang:j.attr("data-lang"),position:Basic.Singleton.FooterCollection.where({lang:j.attr("data-lang")}).length});j.remove()});$("script[data-type='search']").each(function(k,l){j=$(l);Basic.Singleton.SearchCollection.add({html:a(j).replace(/\n/g,""),lang:j.attr("data-lang"),position:Basic.Singleton.SearchCollection.where({lang:j.attr("data-lang")}).length});j.remove()});$("script[data-type='search-box']").each(function(k,l){j=$(l);Basic.Singleton.SearchBoxCollection.add({html:a(j),lang:j.attr("data-lang")});j.remove()});$("script[data-type='moduleFooter']").each(function(k,l){j=$(l);Basic.Singleton.ModuleFooterCollection.add({html:a(j),lang:j.attr("data-lang")});j.remove()})},b=function(){Basic.oApiTracking=new TrackingWrapper();Basic.Singleton.TrackingModel=new Basic.Model.TrackingModel();NetexActivityAPI.lms=Basic.oApiTracking;NetexActivityAPI.activityCollection=Basic.Singleton.ActivityCollection;Basic.oApiTracking.init()},d=function(){f();Basic.Singleton.TrackingModel.trackinginitialized();c()},c=function(){Basic.Singleton.CourseRouter=new Basic.Router.CourseRouter();Backbone.history.start()};return{init:function(){$(window).on("dataTrackingReady",d);if(NetexUtils.isIpad){$("body").addClass("ipad")}if(NetexUtils.hasFlash){$("body").addClass("flash")}e();h();g();i();var j=window.location.protocol;$("html").addClass("location-protocol-"+j.substring(0,j.length-1));b()}}})()};$(function(){Basic.Main.init()});
Basic.Model.ActivityModel=Backbone.Model.extend({defaults:{pageId:null,lang:null,actId:null,position:null,status:"N",score:0},aStatus:["N","I","C","F","P"],validate:function(a,b){if(a.status){if(_.indexOf(this.aStatus,a.status)===-1){return"valor no válido"}if(_.indexOf(this.aStatus,a.status)<_.indexOf(this.aStatus,this.get("status"))){return"valor no válido"}}if(a.score){if(_.isNumber(a.score)){if(a.score<this.get("score")){return"valor no valido"}}else{return"valor no valido"}}}});
Basic.Model.VideoModel=Backbone.Model.extend({defaults:{pageId:null,lang:null,vidId:null,position:null,status:"I",evaluable:false},aStatus:["I","C"],validate:function(a,b){if(a.status){if(_.indexOf(this.aStatus,a.status)===-1){return"valor no válido"}if(_.indexOf(this.aStatus,a.status)<_.indexOf(this.aStatus,this.get("status"))){return"valor no válido"}}}});
Basic.Model.FooterModel=Backbone.Model.extend({defaults:{html:null,lang:null}});
Basic.Model.HeaderModel=Backbone.Model.extend({defaults:{html:null,lang:null,sectionNavigation:null,navigation:null,collapsedSections:null,transitionIn:"none",transitionOut:"none"}});
Basic.Model.MenuModel=Backbone.Model.extend({defaults:{html:null,lang:null}});
Basic.Model.PageModel=Backbone.Model.extend({defaults:{html:null,pageId:null,pageTitle:null,lang:null,position:null,status:"N"},aStatus:["N","I","C","F","P"],validate:function(a,b){if(a.status){if(_.indexOf(this.aStatus,a.status)===-1){return"valor no válido"}if(_.indexOf(this.aStatus,a.status)<_.indexOf(this.aStatus,this.get("status"))){return"valor no válido"}}}});
Basic.Model.RouterModel=Backbone.Model.extend({defaults:{lang:null,page:null,section:null},validate:function(a,b){var f=a.lang||this.get("lang"),e=a.page||this.get("page");if(a.lang){if(_.indexOf(Basic.Singleton.HeaderCollection.pluck("lang"),a.lang)===-1){Basic.Singleton.CourseRouter.navigate("#/lang/"+this.get("lang")+"/pag/"+e,{trigger:false});return"Idioma no soportado"}}if(a.page){if(Basic.Singleton.PageCollection.where({lang:f,position:+a.page}).length!==1){Basic.Singleton.CourseRouter.navigate("#/lang/"+f+"/pag/"+this.get("page"),{trigger:false});return"Página no encontrada"}var d=Basic.Singleton.HeaderCollection.getCurrentModel();if((d&&d.get("navigation")==="sequential")){var c=Basic.Singleton.PageCollection.filter(function(g){return((g.get("status")==="N")||(g.get("status")==="I"))&&(g.get("lang")===f)&&(_.indexOf(Basic.Singleton.PageCollection.pluck("position"),g.get("position"))<_.indexOf(Basic.Singleton.PageCollection.pluck("position"),e))});if(c.length>0){Basic.Singleton.CourseRouter.navigate("#/lang/"+f+"/pag/"+c[0].get("position"),{trigger:false});return"Navegacion secuencial"}}}if(a.section){if(a.section!==null){if(a.section!==parseInt(a.section,10)){return"La sección tiene que ser un numero"}}}},clearSection:function(){this.set({section:null});Basic.Singleton.CourseRouter.navigate("#/lang/"+this.get("lang")+"/pag/"+this.get("page"),{trigger:false})},goNext:function(){Basic.Singleton.CourseRouter.navigate("#/lang/"+this.get("lang")+"/pag/"+(this.get("page")+1))},goPrev:function(){Basic.Singleton.CourseRouter.navigate("#/lang/"+this.get("lang")+"/pag/"+(this.get("page")-1))}});
Basic.Model.SearchBoxModel=Backbone.Model.extend({defaults:{html:null,lang:null}});
Basic.Model.SearchModel=Backbone.Model.extend({defaults:{text:null,html:null,lang:null,totalMatches:null,currentMatch:null},});
Basic.Model.SearchMatchModel=Backbone.Model.extend({defaults:{element:null},});
Basic.Model.ModuleFooterModel=Backbone.Model.extend({defaults:{html:null,lang:null}});
Basic.Model.TrackingModel=Backbone.Model.extend({defaults:{status:"N",score:0,suspend:"",locationId:"",locationTitle:""},initialize:function(){this.listenTo(this,"change:locationId",this.locationChange);this.listenTo(this,"change:status",this.statusChange);this.listenTo(this,"change:score",this.scoreChange);this.listenTo(this,"change:suspend",this.suspendChange);this.listenTo(Basic.Singleton.PageCollection,"change:status",this.updateScoreStatusSuspend);this.listenTo(Basic.Singleton.ActivityCollection,"change",this.updateScoreStatusSuspend);this.listenTo(Basic.Singleton.VideoCollection,"change:status",this.updateScoreStatusSuspend);this.listenTo(Basic.Singleton.RouterModel,"change:lang",this.updateLocation);this.listenTo(Basic.Singleton.RouterModel,"change:page",this.updateLocation)},trackinginitialized:function(){var c=(Basic.oApiTracking.getSuspend()||"");var e=c.split("|");var b=(Basic.oApiTracking.getLocation()||"");var a=(Basic.oApiTracking.getStatus()||"").substring(0,1).toUpperCase();var d=Basic.oApiTracking.getScore();if(c!==""){Basic.Singleton.PageCollection.updateStatusBySuspend(e[0]);Basic.Singleton.ActivityCollection.updateStatusBySuspend(e[1]);if(e.length===4){Basic.Singleton.VideoCollection.updateStatusBySuspend(e[2])}}if(b!==""){if(b.indexOf("#")!==-1){Basic.Singleton.TrackingModel.set("locationId",b,{silent:true})}}if(_.indexOf(["N","I","C","F","P"],a!==-1)){Basic.Singleton.TrackingModel.set("status",a,{silent:false})}if($.isNumeric(d)){Basic.Singleton.TrackingModel.set("score",d,{silent:true})}},updateLocation:function(b){var a=Basic.Singleton.PageCollection.getCurrentModel();if(a!==null){this.set({locationTitle:a.get("pageTitle"),locationId:"#/lang/"+a.get("lang")+"/pag/"+a.get("position")})}},updateScoreStatusSuspend:function(d){var c=Basic.Singleton.PageCollection.getSuspend().split(",");var b=_.extend({N:0,I:0,C:0,F:0,P:0},_.countBy(c));var a;var f;if(Basic.Singleton.ActivityCollection.courseHasEvaluableActivities()){if(c.length===(b.C+b.F+b.P)){f=Basic.Singleton.ActivityCollection.getScoreByEvaluableActivities();a=f<(+Basic.oApiTracking.getMasteryScore())?"F":"P"}else{a="I";f=0}}else{if(b.C){f=parseInt((100/c.length)*b.C,10)}else{f=0}a=f<100?"I":"C"}this.set("status",a);this.set("score",f);this.set("suspend",this.calculateSuspend())},calculateSuspend:function(){var a="";a+=Basic.Singleton.PageCollection.getSuspend();a+="|";a+=Basic.Singleton.ActivityCollection.getSuspend();a+="|";a+=Basic.Singleton.VideoCollection.getSuspend();a+="|";if(Netex.Activity){var b=JSON.stringify(Netex.Activity.Singleton||{});a+=b}return a},locationChange:function(a){Basic.oApiTracking.setLocation(this.get("locationId"),this.get("locationTitle"));Basic.oApiTracking.setScore(this.get("score"))},statusChange:function(a){Basic.oApiTracking.setStatus(this.get("status"));Basic.oApiTracking.setScore(this.get("score"))},scoreChange:function(a){Basic.oApiTracking.setScore(this.get("score"))},suspendChange:function(a){Basic.oApiTracking.setSuspend(this.get("suspend"))}});
Basic.Collection.ActivityCollection=Backbone.Collection.extend({model:Basic.Model.ActivityModel,addData:function(a){if(!this.where({actId:a.actId}).length){this.add(a)}},updateStatus:function(a){var b=this.where({actId:a.get("testId")});if(b.length){_.each(this.where({position:b[0].get("position")}),function(d){var c;if(!a.get("testCompletion")){c="I"}else{if(a.get("testScore")>=a.get("testMastery")){c="P"}else{c="F"}}d.set({status:c,score:a.get("testScore")},{validate:true})})}},courseHasEvaluableActivities:function(){return !!this.length},getScoreByEvaluableActivities:function(){var a=_.map(this.where({lang:Basic.Singleton.RouterModel.get("lang")}),function(b){return b.get("score")});return _.reduce(a,function(b,c){return b+c})/a.length},getSuspend:function(){return _.map(this.where({lang:Basic.Singleton.RouterModel.get("lang")}),function(a){return a.get("status")+"$"+a.get("score")}).toString()},updateStatusBySuspend:function(a){if(_.uniq(this.pluck("position")).length===a.split(",").length){_.each(a.split(","),function(c,b){_.each(Basic.Singleton.ActivityCollection.where({position:+b}),function(e,f){var d=c.split("$");e.set("status",d[0],{silent:true});if(d.length>1){e.set("score",+d[1],{silent:true})}})})}},getStatusArrayByPage:function(b,a){return _.map(this.where({lang:b,pageId:a}),function(c){return(c.get("status"))})}});
Basic.Collection.VideoCollection=Backbone.Collection.extend({model:Basic.Model.VideoModel,updateStatus:function(c,a){var b=this.where({vidId:c});if(b.length===1){_.each(this.where({position:b[0].get("position")}),function(d){d.set({status:a},{validate:true})});if(Basic.Collection.PageCollection){if(typeof Basic.Collection.PageCollection.calculateStatusCurrentPage==="function"){Basic.Collection.PageCollection.calculateStatusCurrentPage()}}}},updateStatusBySuspend:function(a){if(_.uniq(this.pluck("position")).length===a.split(",").length){_.each(a.split(","),function(c,b){_.each(Basic.Singleton.VideoCollection.where({position:+b}),function(d,e){d.set("status",c,{silent:true})})})}},getSuspend:function(){return _.map(this.where({lang:Basic.Singleton.RouterModel.get("lang")}),function(a){return a.get("status")}).toString()},getStatusArrayByPage:function(b,a){return _.map(this.where({lang:b,pageId:a}),function(c){return(c.get("status"))})}});
Basic.Collection.FooterCollection=Backbone.Collection.extend({model:Basic.Model.FooterModel,getCurrentModel:function(){var a=this.where({lang:Basic.Singleton.RouterModel.get("lang"),position:Basic.Singleton.RouterModel.get("page")});return a.length===1?a[0]:null},getCurrentHtml:function(){var a=this.getCurrentModel();return a===null?"":a.get("html")}});
Basic.Collection.HeaderCollection=Backbone.Collection.extend({model:Basic.Model.HeaderModel,getCurrentModel:function(){var a=this.where({lang:Basic.Singleton.RouterModel.get("lang")});return a.length===1?a[0]:null},getCurrentHtml:function(){var a=this.getCurrentModel();return a===null?"":a.get("html")}});
Basic.Collection.MenuCollection=Backbone.Collection.extend({model:Basic.Model.MenuModel,getCurrentModel:function(){var a=this.where({lang:Basic.Singleton.RouterModel.get("lang")});return a.length===1?a[0]:null},getCurrentHtml:function(){var a=this.getCurrentModel();return a===null?"":a.get("html")}});
Basic.Collection.PageCollection=Backbone.Collection.extend({model:Basic.Model.PageModel,calculateStatusArray:function(b){var c=_.uniq(b);if(!b.length){return"C"}if(c.length===1){return _.first(c)}if(_.contains(b,"I")||_.contains(b,"N")){return"I"}if(_.contains(b,"F")){return"F"}if(_.contains(b,"C")){return"C"}},initialize:function(){this.listenTo(Basic.Singleton.ActivityCollection,"change:status",this.calculateStatusCurrentPage);this.listenTo(Basic.Singleton.VideoCollection,"change:status",this.calculateStatusCurrentPage)},getCurrentModel:function(){var a=this.where({lang:Basic.Singleton.RouterModel.get("lang"),position:Basic.Singleton.RouterModel.get("page")});return a.length===1?a[0]:null},getCurrentHtml:function(){var a=this.getCurrentModel();return a===null?"":a.get("html")},calculateStatusCurrentPage:function(){var c=this.getCurrentModel();var b;var f;var e;var d;var a;if(c){b=c.get("pageId");f=c.get("lang");e=Basic.Singleton.ActivityCollection.getStatusArrayByPage(f,b);d=Basic.Singleton.VideoCollection.getStatusArrayByPage(f,b);a=this.calculateStatusArray(_.union(e,d));_.each(this.where({position:c.get("position")}),function(g){g.set({status:a},{validate:true})})}},getSuspend:function(){return _.map(this.where({lang:Basic.Singleton.RouterModel.get("lang")}),function(a){return a.get("status")}).toString()},updateStatusBySuspend:function(a){if(_.uniq(this.pluck("position")).length===a.split(",").length){_.each(a.split(","),function(c,b){_.each(Basic.Singleton.PageCollection.where({position:+b}),function(d,e){d.set("status",c,{silent:true})})})}},getStatusByPosition:function(a){var b=this.where({lang:Basic.Singleton.RouterModel.get("lang"),position:a});return b.length===1?b[0].get("status"):null}});
Basic.Collection.SearchCollection=Backbone.Collection.extend({model:Basic.Model.SearchModel,getCurrentModel:function(){var a=this.where({lang:Basic.Singleton.RouterModel.get("lang"),position:Basic.Singleton.RouterModel.get("page")});return a.length===1?a[0]:null},getCurrentHtml:function(){var a=this.getCurrentModel();return a===null?"":a.get("html")},});
Basic.Collection.SearchBoxCollection=Backbone.Collection.extend({model:Basic.Model.SearchBoxModel,getCurrentModel:function(){var a=this.where({lang:Basic.Singleton.RouterModel.get("lang")});return a.length===1?a[0]:null},getCurrentHtml:function(){var a=this.getCurrentModel();return a===null?"":a.get("html")}});
Basic.Collection.SearchMatchCollection=Backbone.Collection.extend({model:Basic.Model.SearchMatchModel,getNext:function(){var a=this.at(Basic.Singleton.SearchCollection.getCurrentModel());return a.length===1?a[0]:null},getPrev:function(){var a=this.at(Basic.Singleton.SearchCollection.getCurrentModel());return a===null?"":a.get("html")}});
Basic.Collection.ModuleFooterCollection=Backbone.Collection.extend({model:Basic.Model.ModuleFooterModel,getCurrentModel:function(){var a=this.where({lang:Basic.Singleton.RouterModel.get("lang")});return a.length===1?a[0]:null},getCurrentHtml:function(){var a=this.getCurrentModel();return a===null?"":a.get("html")}});
Basic.View.FooterView=Backbone.View.extend({events:{},initialize:function(){this.listenTo(Basic.Singleton.RouterModel,"change:page",this.render);this.listenTo(Basic.Singleton.RouterModel,"change:lang",this.render)},render:function(){var a=this.model.getCurrentHtml();if(a!==""){this.$el.empty().append(a)}return this}});
Basic.View.HeaderView=Backbone.View.extend({events:{"click #btnMenu":"toggleMenu","click #btnSearch":"toggleSearch","click #btnLang":"toggleLang","click #btnClose":"close"},initialize:function(){var a=this;this.listenTo(Basic.Singleton.RouterModel,"change:lang",this.render)},render:function(){this.$el.empty().append(this.model.getCurrentHtml());return this},toggleMenu:function(a){a.preventDefault();this.$("#btnSearch").removeClass("selected");Basic.Singleton.MenuView.toggle()},toggleSearch:function(a){a.preventDefault();$(a.currentTarget).toggleClass("selected");this.$("#btnLang").removeClass("selected");this.$(".language-menu").hide();Basic.Singleton.SearchView.toggle()},toggleLang:function(a){a.preventDefault();$(a.currentTarget).toggleClass("selected");this.$("#btnSearch").removeClass("selected");Basic.Singleton.SearchView.hide();this.$(".language-menu").toggle()},close:function(a){a.preventDefault();Basic.oApiTracking.exit();if(getURLParameter("in_app")!=="true"){setTimeout(function(){try{window.top.close()}catch(b){}},3500)}}});
Basic.View.MenuView=Backbone.View.extend({events:{"click ul > li > a":"closeMenuMobile"},initialize:function(){this.listenTo(Basic.Singleton.RouterModel,"change:lang",this.render);this.listenTo(Basic.Singleton.RouterModel,"change:page",this.markCurrentPage);this.listenTo(Basic.Singleton.PageCollection,"change:status",this.markStatus);$(window).scroll(function(){var a;if($(window).scrollTop()+$(window).height()==$(document).height()){a=$("h2[data-section-index]").last().attr("data-section-index")}else{a=$("h2[data-section-index]").filter(function(b,c){return $(window).scrollTop()+($(window).height()/2)>$(c).offset().top}).last().attr("data-section-index")}$("[data-menu-section-position]").removeClass("current-section");$("[data-menu-position='"+Basic.Singleton.RouterModel.get("page")+"']").parent().find("[data-menu-section-position='"+a+"']").addClass("current-section")});if($(window).width()<1280){this.hide()}},closeMenuMobile:function(b){if($(b.currentTarget).hasClass("status-locked")){b.preventDefault();return false}var a=$(window).width();if(+a<1024){this.hide()}},render:function(){this.$el.empty().append(this.model.getCurrentHtml());this.markCurrentPage();this.markStatus();return this},toggle:function(){if(this.$el.hasClass("sidebar-show")){this.hide()}else{this.show()}},hide:function(){this.$el.removeClass("sidebar-show");if(!Modernizr.csstransforms3d){this.$el.hide()}},show:function(){this.$el.addClass("sidebar-show");if(!Modernizr.csstransforms3d){this.$el.show()}Basic.Singleton.SearchView.hide()},markCurrentPage:function(){var a=this.$("[data-menu-position='"+Basic.Singleton.RouterModel.get("page")+"']");this.$("[data-menu-position]").removeClass("current-page current-section");a.addClass(a.attr("data-section")===""?"current-section":"current-page").closest("[data-role='pageSection']").find("> a").addClass("current-page");this.$("[data-menu-section-position]").removeClass("current-page");this.collapseExpandSections()},collapseExpandSections:function(){var a=this;if(Basic.Singleton.HeaderCollection.getCurrentModel().get("collapsedSections")){_.each(a.$('[data-role="pageSection"]'),function(b){if($(b).find(".current-page").length===0){$(b).find(".menu-section").slideUp()}else{$(b).find(".menu-section").slideDown()}})}},markStatus:function(){var d=Basic.Singleton.PageCollection.getSuspend().split(",");var c=Basic.Singleton.PageCollection.filter(function(e){return((e.get("status")==="N")||(e.get("status")==="I"))&&(e.get("lang")===Basic.Singleton.RouterModel.get("lang"))&&(_.indexOf(Basic.Singleton.PageCollection.pluck("position"),e.get("position"))>_.indexOf(Basic.Singleton.PageCollection.pluck("position"),Basic.Singleton.RouterModel.get("Page")))});var a=[];_.each(c,function(e,f){if(f!==0){a.push(e.get("position"))}});this.$("[data-menu-position] , [data-menu-section-position]").removeClass("status-locked");this.$("[data-menu-position]").filter("[data-menu-position!='']").each(function(f,g){var e=Basic.Singleton.PageCollection.getStatusByPosition(+$(g).attr("data-menu-position"));$(g).css("position","relative");$(g).find("span.icon").remove();if(e==="P"||e==="C"){$(g).append('<span class="icon icon-pass"></span>')}if(e==="F"){$(g).append('<span class="icon icon-fail"></span>')}});var b=Basic.Singleton.HeaderCollection.getCurrentModel();if(b.get("sectionNavigation")==="horizontal"){this.$("li[data-role='pageSection']").each(function(g,j,l){var k="P";var i=$(j).find("a.sectionIntroductionLink[data-menu-position]");var e=(i.length>0)?$(i[0]).attr("data-menu-position"):null;var f=e?Basic.Singleton.PageCollection.getStatusByPosition(+e):null;if(f=="N"||f=="I"){k=f}else{var h=false;$(j).find(".menu-section a[data-menu-position]").each(function(o,n){var m=Basic.Singleton.PageCollection.getStatusByPosition(+$(n).data("menu-position"));if(m==="F"){k="F"}else{if(m==="N"||m==="I"){k="I";h=true}}});if(h){k="I"}}$(j).css("position","relative");$(j).find(" > a span.icon").remove();if(k==="P"||k==="C"){$(j).find(" > a").append('<span class="icon icon-pass"></span>')}if(k==="F"){$(j).find(" > a").append('<span class="icon icon-fail"></span>')}})}this.$("[data-menu-position]").each(function(f,g){if(b.get("navigation")==="sequential"){if(b.get("sectionNavigation")==="horizontal"){if((_.indexOf(a,$(g).data("menu-position"))!==-1)||(($(g).data("menu-position")===""))){if($(g).data("menu-position")===""){var e=$(g).parent().find("ul > li > a ").data("menu-position");if(_.indexOf(a,e)!==-1){$(g).addClass("status-locked")}}else{$(g).addClass("status-locked")}}}else{if(_.indexOf(a,$(g).data("menu-position"))!==-1){$(g).addClass("status-locked");$(g).parent().find(".menu-section a").each(function(h,i){$(i).addClass("status-locked")})}}}})}});
Basic.View.PageView=Backbone.View.extend({events:{pointerdown:"pointerdown",pointerup:"pointerup"},lastPointerDown:null,lastTimePointerDown:null,marginTime:400,hidden:null,visibilityChange:null,initialize:function(){Mousetrap.bind("right",function(){Basic.Singleton.RouterModel.goNext()});Mousetrap.bind("left",function(){Basic.Singleton.RouterModel.goPrev()});this.listenTo(Basic.Singleton.RouterModel,"change:page",this.transitionOut);this.listenTo(Basic.Singleton.RouterModel,"change:lang",this.transitionOut);this.listenTo(Basic.Singleton.RouterModel,"change:section",this.gotoSection);$(window).on("resize",function(){Basic.Singleton.PageView.onResize();setTimeout(function(){Basic.Singleton.PageView.onResize()},2000)});if(typeof document.hidden!=="undefined"){this.hidden="hidden";this.visibilityChange="visibilitychange"}else{if(typeof document.mozHidden!=="undefined"){this.hidden="mozHidden";this.visibilityChange="mozvisibilitychange"}else{if(typeof document.msHidden!=="undefined"){this.hidden="msHidden";this.visibilityChange="msvisibilitychange"}else{if(typeof document.webkitHidden!=="undefined"){this.hidden="webkitHidden";this.visibilityChange="webkitvisibilitychange"}}}}if(this.hidden){document.addEventListener(this.visibilityChange,this.handleVisibilityChange,false)}},handleVisibilityChange:function(a){if(document[this.hidden]){Basic.Singleton.PageView.pauseVideoAudio()}},pauseVideoAudio:function(){$(".netex-video-button-pause").each(function(b,c){try{$(c).click()}catch(a){if(window.console&&window.console.log){console.log(a)}}});$(".netex-audio-button-pause").each(function(b,c){try{$(c).click()}catch(a){if(window.console&&window.console.log){console.log(a)}}})},onResize:function(){this.sizeObjectFlash();this.sizeIframe()},transitionIn:function(){var a=Basic.Singleton.HeaderCollection.getCurrentModel().get("transitionIn");if(Modernizr.cssanimations&&a!=="none"){this.$el.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){Basic.Singleton.PageView.$el.removeClass("animated "+a);Basic.Singleton.PageView.rendered()});setTimeout(function(){Basic.Singleton.PageView.$el.addClass("animated "+a)},100)}else{this.rendered()}},transitionOut:_.debounce(function(){var a=Basic.Singleton.HeaderCollection.getCurrentModel().get("transitionOut");if(Modernizr.cssanimations&&a!=="none"){this.$el.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){Basic.Singleton.PageView.$el.removeClass("animated "+a);Basic.Singleton.PageView.render()});this.$el.addClass("animated "+a)}else{this.render()}},50),sizeObjectFlash:function(){if(!NetexUtils.isIpad){this.$(".objectFlash").each(function(b,f){var c=$(f),g=c.parent(),a=+c.attr("data-width"),e=+c.attr("data-height"),d=+g.width();g.height((e/a)*d)})}else{this.$(".divEnvolveObject").remove()}},sizeIframe:function(){this.$(".divEnvolveIframe > iframe").each(function(c,d){var b=$(d),e=b.parent(),a=e.attr("data-height");if(a=="100%"){a=_.max(b.contents().find("body > *").map(function(f,g){return $(g).outerHeight()}))}b.attr("height",a).css("height",a+"px").closest(".divEnvolveIframe").height(a)})},render:function(){NetexUtils.removeMedia(this.$el);var a=this.model.getCurrentHtml();if(a!==""){this.$el.empty().append(a);this.sizeObjectFlash();this.$(".divEnvolveIframe > iframe").on("load",function(){Basic.Singleton.PageView.sizeIframe();setTimeout(function(){Basic.Singleton.PageView.sizeIframe()},2000)})}$(".slider").blueberry();$(".tabComponent").easyResponsiveTabs({type:"default",width:"auto",fit:true,tabidentify:"hor_1"});setTimeout(function(){var b=$(".resp-tabs-list");b.each(function(){if(!$(this).hasClass("height-initialized")){var c=-1;var d=$("li",$(this));d.each(function(){var e=$(this).height();c=e>c?e:c});d.css("height",(20+c)+"px");d.css("line-height",c+"px")}});b.addClass("height-initialized")},100);return this},rendered:function(){var a=$("[data-ntx-video-player-default]").attr("data-ntx-video-player-default");a=_.indexOf(["html","flash"],a)!==-1?a:"html";this.model.calculateStatusCurrentPage();this.$(".netex-audio-player").audioNetex({mode:a});this.$(".netex-video-player").videoNetex({mode:a});$(".lcm-activity",this.$el).each(function(){var b=$(this).attr("data-activity-loaded");if(!(b=="true")){Netex.Activity.Constructors[$(this).attr("id")]();$(this).attr("data-activity-loaded","true")}});this.gotoSection();Video.init($("video[data-mediaelement-video]"));$("a[data-hash='true'][data-hash-applied!='true']").each(function(){if(typeof Netex.addLearnerIdToExternalLink!="undefined"){Netex.addLearnerIdToExternalLink(this)}});$(".netex-video-player, .module.video").bind("contextmenu",function(){return false})},gotoSection:function(){if(Basic.Singleton.RouterModel.get("section")!==null){$("html:not(:animated),body:not(:animated)").animate({scrollTop:this.$("[data-section-index='"+Basic.Singleton.RouterModel.get("section")+"']").offset().top-$("#headerView").height()});Basic.Singleton.RouterModel.clearSection()}else{$("html:not(:animated),body:not(:animated)").animate({scrollTop:0})}},pointerdown:function(a){this.lastPointerDown=a.originalEvent.clientX;this.lastTimePointerDown=parseInt(a.timeStamp.toString().substr(0,13),10)},pointerup:function(a){if(!$(a.target).is("select")){if(NetexUtils.insideTimeLimit(this.lastPointerDown,a.originalEvent.clientX,-1)&&NetexUtils.insideTimeLimit(this.lastPointerDown,a.originalEvent.clientX,-200)&&NetexUtils.insideTimeLimit(this.lastTimePointerDown,parseInt(a.timeStamp.toString().substr(0,13),10),this.marginTime)){Basic.Singleton.RouterModel.goNext()}else{if(NetexUtils.insideTimeLimit(a.originalEvent.clientX,this.lastPointerDown,-1)&&NetexUtils.insideTimeLimit(a.originalEvent.clientX,this.lastPointerDown,-200)&&NetexUtils.insideTimeLimit(this.lastTimePointerDown,parseInt(a.timeStamp.toString().substr(0,13),10),this.marginTime)){Basic.Singleton.RouterModel.goPrev()}}}this.lastPointerDown=null;this.lastTimePointerDown=null}});
Basic.View.SearchView=Backbone.View.extend({events:{submit:"preventFormSubmit","keyup .search-field":"updateTextSearch","click .search-prev":"clickSearchPrev","click .search-next":"clickSearchNext","focus .search-field":"onFocusInput","blur .search-field":"onBlurInput"},initialize:function(){this.listenTo(Basic.Singleton.RouterModel,"change:lang",this.render);if(!Modernizr.csstransforms3d){this.hide()}},render:function(){this.$el.empty().append(this.model.getCurrentHtml());return this},onFocusInput:function(a){if(NetexUtils.isIOs){this.$el.css("position","absolute");$("#headerView").css("position","absolute")}},onBlurInput:function(a){if(NetexUtils.isIOs){this.$el.css("position","fixed");$("#headerView").css("position","fixed")}},toggle:function(){if(this.$el.hasClass("search-bar-show")){this.hide()}else{this.show();this.$el.find(".search-field").focus()}},hide:function(){this.$el.removeClass("search-bar-show");if(!Modernizr.csstransforms3d){this.$el.hide()}},show:function(){this.$el.addClass("search-bar-show");if(!Modernizr.csstransforms3d){this.$el.show()}Basic.Singleton.MenuView.hide();if((this.$el.find(".search-field").val()!=="")&&($(".currentHighlightedSearch").length===0)){this.updateTextSearch()}},updateTextSearch:_.debounce(function(g){var b=Basic.Singleton.SearchCollection.getCurrentModel();b.set("text",this.$el.find(".search-field").val());var d=rangy.createRange(),a=rangy.createCssClassApplier("highlightedSearch"),c=rangy.createCssClassApplier("currentHighlightedSearch");d.selectNodeContents(document.getElementById("pageView"));a.undoToRange(d);c.undoToRange(d);var f=0;b.set("totalMatches",0);if(b.get("text")!==""){while(d.findText(b.get("text"))){if(b.get("totalMatches")===0){c.applyToRange(d)}else{a.applyToRange(d)}d.collapse(false);b.set("totalMatches",b.get("totalMatches")+1)}Basic.Singleton.SearchMatchCollection.reset();$(".currentHighlightedSearch , .highlightedSearch").each(function(){Basic.Singleton.SearchMatchCollection.add({element:$(this)})})}if(b.get("totalMatches")>0){this.updateSearchCount();this.$(".search-controls").fadeIn(150);b.set("currentMatch",0)}else{this.$(".search-controls").fadeOut(150)}},400),preventFormSubmit:function(a){a.preventDefault()},updateSearchCount:function(b){var a=Basic.Singleton.SearchCollection.getCurrentModel();this.$(".search-controls").find(".search-count").html((a.get("currentMatch")+1)+" / "+a.get("totalMatches"))},clickSearchPrev:function(f){f.preventDefault();var b=Basic.Singleton.SearchCollection.getCurrentModel();if(b.get("currentMatch")>0){var c=Basic.Singleton.SearchMatchCollection.at(b.get("currentMatch")).get("element");c.removeClass("currentHighlightedSearch").addClass("highlightedSearch");b.set("currentMatch",b.get("currentMatch")-1);var d=$("#searchView").position().top+$("#searchView").height()+30;var a=Basic.Singleton.SearchMatchCollection.at(b.get("currentMatch")).get("element");$("html,body").animate({scrollTop:a.offset().top-d+"px"});a.removeClass("highlightedSearch").addClass("currentHighlightedSearch");this.updateSearchCount()}},clickSearchNext:function(f){f.preventDefault();var b=Basic.Singleton.SearchCollection.getCurrentModel();if(b.get("currentMatch")<b.get("totalMatches")-1){var c=Basic.Singleton.SearchMatchCollection.at(b.get("currentMatch")).get("element");c.removeClass("currentHighlightedSearch").addClass("highlightedSearch");b.set("currentMatch",b.get("currentMatch")+1);var d=$("#searchView").position().top+$("#searchView").height()+30;var a=Basic.Singleton.SearchMatchCollection.at(b.get("currentMatch")).get("element");$("html,body").animate({scrollTop:a.offset().top-d+"px"});a.removeClass("highlightedSearch").addClass("currentHighlightedSearch");this.updateSearchCount()}}});
Basic.View.ModuleFooterView=Backbone.View.extend({events:{},initialize:function(){this.listenTo(Basic.Singleton.RouterModel,"change:lang",this.render)},render:function(){var a=this.model.getCurrentHtml();if(a!==""){this.$el.empty().append(a)}return this}});
var Video=(function(){var e=false;var f=false;var c=navigator.userAgent;if(c.indexOf("Android")>=0){f=true;var b=parseFloat(c.slice(c.indexOf("Android")+8));e=(b==4)}var a={playPause:{es:"Reproducir/Pausar",en:"Play/Pause"},volume:{es:"Quitar/Poner Sonido",en:"Mute Toggle"},captions:{es:"Quitar/Poner Subtítulos",en:"Captions/Subtitles"},fullscreen:{es:"Pantalla Completa",en:"Fullscreen"},captionDisable:{es:"Deshabilitado",en:"None"}};var d=function(g,h){if(a.playPause[h]){g.find(".mejs-playpause-button>button").attr("title",a.playPause[h])}if(a.volume[h]){g.find(".mejs-volume-button>button").attr("title",a.volume[h])}if(a.captions[h]){g.find(".mejs-captions-button>button").attr("title",a.captions[h])}if(a.fullscreen[h]){g.find(".mejs-fullscreen-button>button").attr("title",a.fullscreen[h])}if(a.captionDisable[h]){g.find("label[for='mep_0_captions_none']").html(a.captionDisable[h])}};return{init:function(g,h){h=h=="en"?"none":h;g.each(function(){var l=$(this).attr("data-mediaelement-video");var i=$(this).attr("width");var k=$(this).attr("height");i=$.isNumeric(i)?i:640;k=$.isNumeric(k)?k:360;var j=$("[data-ntx-video-player-default]").attr("data-ntx-video-player-default");if(f){j="auto"}else{if(j==="flash"){j="auto_plugin"}else{j="auto"}}$(this).mediaelementplayer({mode:j,alwaysShowControls:false,videoWidth:"100%",videoHeight:"100%",startLanguage:h,ratioVideo:k/i,success:function(m,n){if(e){m.addEventListener("play",function(p){$("nav.secondary-nav").css("z-index",2);$("div.navbar").css("z-index",2);$(n).parent().parent().find(".mejs-controls").css("z-index",3);$(n).parent().parent().find(".mejs-captions-layer").css("z-index",600);$(n).parent().parent().find(".mejs-captions-selector").css("z-index",601);$(".navbar").css("z-index",602);$(".nav-browser").css("z-index",603)},false);m.addEventListener("playing",function(p){$("nav.secondary-nav").css("z-index",5);$("div.navbar").css("z-index",5);$(n).parent().parent().find(".mejs-controls").css("z-index",702);$(n).parent().parent().find(".mejs-captions-layer").css("z-index",700);$(n).parent().parent().find(".mejs-captions-selector").css("z-index",703);$(".navbar").css("z-index",704);$(".nav-browser").css("z-index",705)},false)}var o=$(n).parent().parent().find(".mejs-controls");d(o,h);m.addEventListener("ended",function(p){if(l&&l.length>0){if(Basic.Singleton.VideoCollection){Basic.Singleton.VideoCollection.updateStatus(l,"C")}}},false)}})})},pause:function(g){g.each(function(){if(this.player!==undefined){this.player.pause()}else{this.pause()}})}}})();
var NetexVideoBridge={fireEvent:function(c,b,a){$("[data-video-player-id='"+c+"']").trigger(b,a)}};(function(d){d.fn.videoNetex=function(m){var o=d.extend({},d.fn.videoNetex.defaults,m),p,n;return this.filter(".netex-video-player").each(function(){if(f.isTouch){d(this).addClass("touch")}l(h(d(this)),o);e(d(this),o,d(this).find(".netex-video-container"));var q=k(d(this),o);if(o.mode!=="download"){p=q.objApi;n=q.objApiListen;a(d(this),o,p,n);j(d(this),p,n);b(d(this))}else{d(this).addClass("ntx-broken-video")}})};function k(q,n){var p,m;if(n.mode!=="html"){var o=d(q.find("source")[0]).attr("src");if(n.mode==="flash"){g(q,n,o);p=q.find("object");m=q}else{if(n.mode==="download"){}}}else{p=m=q.find("video")}return{objApi:p,objApiListen:m}}function g(q,o,p){var n=q.attr("data-video-player-id"),s=f.isIE?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"':"",r=q.attr("data-video-swf-url");var m=q.height()-q.find(".netex-video-controls-container").height();q.find("video").after('<object id="'+n+'" name="'+n+'" '+s+' type="application/x-shockwave-flash" width="'+q.attr("data-width")+'" height="'+q.attr("data-height")+'" data="'+r+'"><param name="movie" value="'+r+'" /><param name="allowScriptAccess" value="always" /><param name="flashvars" value="file='+p+"&videoWidth="+q.attr("data-width")+"&videoHeight="+q.attr("data-height")+"&objectWidth="+q.width()+"&objectHeight="+m+'" /><param name="wmode" value="transparent" /></object>');q.find("video").remove()}function h(m){return d.map(d(m).find("source"),function(p,o){var n=d.inArray(d(p).attr("type"),["video/ogg","video/mp4","video/webm"]);return n!==-1?["ogg","h264","webm"][n]:""})}function l(m,n){if(n.mode!=="download"){var o;o=(c!==false&&(d.inArray("probably",d.map(m,function(p){return c[p]}))!==-1)||d.inArray("maybe",d.map(m,function(p){return c[p]}))!==-1);if(n.mode==="html"){if(!o){n.mode=i!==false?"flash":"download"}}else{if(n.mode==="flash"&&!i){n.mode=o===true?"html":"download"}}}}function a(p,n,o,m){p.find(".netex-video-progress-bar").width("100%");m.on("play",function(q){p.find(".netex-video-poster").hide();p.find(".netex-video-button-play-pause-restart").removeClass("netex-video-button-play netex-video-button-restart").addClass("netex-video-button-pause")}).on("seeked",function(q){p.find(".netex-video-poster").hide();p.find(".netex-video-button-play-pause-restart").removeClass("netex-video-button-play netex-video-button-restart").addClass("netex-video-button-pause")}).on("pause",function(q){p.find(".netex-video-button-play-pause-restart").removeClass("netex-video-button-pause").addClass("netex-video-button-play")}).on("ended",function(q){p.find(".netex-video-poster").show();p.find(".netex-video-button-play-pause-restart").removeClass("netex-video-button-pause netex-video-button-play").addClass("netex-video-button-restart");if(d(p).attr("data-video-tracking")&&d(p).attr("data-video-tracking").length>0){if(typeof Basic!="undefined"&&Basic.Singleton.VideoCollection){Basic.Singleton.VideoCollection.updateStatus(d(p).attr("data-video-tracking").split("|")[0],"C")}}}).on("timeupdate",function(u,s){var r=d(u.currentTarget)[0];if(s){r=s}if(f.isAndroid_40_41_42_43){var t=Math.floor((Math.random()*100)+1);p.find(".netex-video-subtitle-selector").css("z-index",t+1);p.find(".netex-video-subtitle-container").css("z-index",t)}var q=r.currentTime;n.formatDurationTime(p.find(".netex-video-time-current"),q);n.formatDurationTime(p.find(".netex-video-time-duration"),r.duration);p.find("video").each(function(){d.each(d(this)[0].textTracks||[],function(v,w){w.mode="hidden"})});p.find(".netex-video-subtitle-container:visible > div").each(function(v,w){d(w).removeClass("active").addClass(((q>=+d(w).attr("data-start"))&&(q<+d(w).attr("data-end")))?"active":"")});p.find(".netex-video-progress-bar-inner").width((q*100)/r.duration+"%");q=null}).on("durationchange",function(q){}).on("progress",function(r){var q=null;if(r.currentTarget&&r.currentTarget.buffered&&r.currentTarget.buffered.length>0&&r.currentTarget.buffered.end&&r.currentTarget.duration){q=r.currentTarget.buffered.end(0)/r.currentTarget.duration}else{if(r.currentTarget&&r.currentTarget.bytesTotal!==undefined&&r.currentTarget.bytesTotal>0&&r.currentTarget.bufferedBytes!==undefined){q=r.currentTarget.bufferedBytes/r.currentTarget.bytesTotal}else{if(r&&r.lengthComputable&&r.total!==0){q=r.loaded/r.total}}}if(q!==null){q=Math.min(1,Math.max(0,q))*100;p.find(".netex-video-progress-bar").width("100%")}}).on("volumechange",function(r,q){var s;if(q){s=q.volume}else{s=r.currentTarget.muted?0:r.currentTarget.volume}p.find(".netex-video-volume-button").removeClass("netex-video-volume-small netex-video-volume-medium netex-video-volume-large netex-video-volume-mute").addClass(s===0?"netex-video-volume-mute":"").addClass(s>0&&s<=0.2?"netex-video-volume-small":"").addClass(s>0.2&&s<=0.8?"netex-video-volume-medium":"").addClass(s>0.8?"netex-video-volume-large":"");p.find(".netex-video-volume-slider-foreground").width(s*100+"%")})}function j(o,n,m){o.find(".netex-video-button-play-pause-restart").off("click").on("click",function(p){if(d(this).hasClass("netex-video-button-play")){if(n[0].playMedia){n[0].playMedia()}else{n[0].play()}}if(d(this).hasClass("netex-video-button-pause")){if(n[0].pauseMedia){n[0].pauseMedia()}else{n[0].pause()}}if(d(this).hasClass("netex-video-button-restart")){if(n[0].playMedia){n[0].playMedia()}else{n[0].play()}}}).end().find(".netex-video-volume-button").off("click").on("click",function(p){if(!d(this).hasClass("netex-video-volume-mute")){if(n[0].setMute){n[0].setMute(true)}else{n[0].muted=true}}if(d(this).hasClass("netex-video-volume-mute")){if(n[0].setMute){n[0].setMute(false)}else{n[0].muted=false}}}).end().find(".netex-video-button-fullscreen").off("click").on("click",function(p){if(d(this).hasClass("netex-video-button-fullscreen-enter")){o.addClass("netex-video-player-fullscreen");d(this).removeClass("netex-video-button-fullscreen-enter").addClass("netex-video-button-fullscreen-exit");o.find(".netex-video-subtitle-container").css("bottom",37).css("right",0).css("left",0).css("position","absolute")}else{if(d(this).hasClass("netex-video-button-fullscreen-exit")){o.removeClass("netex-video-player-fullscreen");d(this).removeClass("netex-video-button-fullscreen-exit").addClass("netex-video-button-fullscreen-enter");o.find(".netex-video-subtitle-container").css("bottom",0).css("right",0).css("left",0).css("position","absolute")}}o.find(".netex-video-subtitle-selector").hide();if(n[0].resizeJS){n[0].resizeJS(o.width(),o.height()-o.find(".netex-video-controls-container").height())}}).end().find(".netex-video-progress-bar").off("click").on("click",function(p){var q=(p.pageX-d(p.currentTarget).parent().offset().left)/d(p.currentTarget).width();if(n[0].setCurrentTime){n[0].setCurrentTime(n[0].getDuration()*q);n[0].playMedia()}else{n[0].currentTime=n[0].duration*q;n[0].play()}}).end().find(".netex-video-volume-slider").off("click").on("click",function(p){var q=(p.pageX-d(p.currentTarget).parent().offset().left)/d(p.currentTarget).width();if(n[0].setVolume){n[0].setVolume(q)}else{n[0].volume=q}}).end().find(".netex-video-captions").off("click").on("click",function(p){o.find(".netex-video-subtitle-selector").toggle()}).end().find(".netex-video-subtitle-selector .netex-video-subtitle-option").click(function(p){o.find(".netex-video-subtitle-selector .netex-video-subtitle-option").removeClass("active");d(this).addClass("active");o.find(".netex-video-subtitle-selector").hide();o.find(".netex-video-subtitle-container").hide().filter("[lang="+d(p.currentTarget).attr("lang")+"]").show()});d(window).on("resize.videoNetex",function(p){if(n[0].resizeJS){n[0].resizeJS(o.width(),o.height()-o.find(".netex-video-controls-container").height())}})}function e(o,n,m){o.find("track").each(function(p,q){d.ajax({url:d(q).attr("src"),dataType:"text",lang:d(q).attr("srclang"),success:function(u){var t=new WebVTTParser().parse(u,"subtitles"),s=m.find(".netex-video-subtitle-container[lang='"+this.lang+"']");d.each(t.cues,function(v,r){s.append("<div data-start='"+r.startTime+"' data-end='"+r.endTime+"'>"+r.text+"</div>")});if(d(q).attr("default")===undefined){s.hide()}}})})}function b(m){if(m.find("track[default]").index()!=-1){m.find(".netex-video-subtitle-selector .netex-video-subtitle-option").removeClass("active");m.find(".netex-video-subtitle-selector .netex-video-subtitle-option:eq("+m.find("track[default]").index()+")").addClass("active")}}var c=(function(){var n=document.createElement("video"),m=false;try{if(m=!!n.canPlayType){m=new Boolean(m);m.ogg=n.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");m.h264=n.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");m.webm=n.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(o){}return m})();var i=(function(){var n=false;if(window.ActiveXObject){var s=null;try{s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(r){return false}if(s){n=new Boolean(true);n.version=s.GetVariable("$version").substring(4);n.version=n.version.split(",")[0]}}else{var q="Shockwave Flash";var t="application/x-shockwave-flash";var o=navigator.plugins[q];if(o===undefined){return false}else{n=new Boolean(true);var p=o.description;if(p&&!(typeof o.mimeTypes!="undefined"&&o.mimeTypes[t]&&!o.mimeTypes[t].enabledPlugin)){var m=p.replace(q,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");n.version=parseInt(m[0].match(/\d+/),10)}}}return n})();var f=(function(){var m={};m.isIE=((/MSIE (\d+\.\d+);/.test(navigator.userAgent)===true)||(!!(navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv:11/))));m.isTouch=(function(){var n=false;if(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch){n=true}return n})();m.isAndroid_40_41_42_43=(function(){var n=false;var p=p||navigator.userAgent;var o=p.match(/Android\s([0-9\.]*)/);if(o&&parseFloat(o[1],10)<4.4){n=true}return n})();return m})();d.fn.videoNetex.defaults={formatDurationTime:function(p,n){var m,r,q,o;if(!d.isNumeric(n)){q="00";o="00"}else{m=Math.floor(Math.round(n)/60);r=Math.round(parseFloat(Math.round(n)-(m*60))*100)/100;q=m;if(m<10){q="0"+m}o=r;if(r<10){o="0"+r}}p.text(q+":"+o)},formatCurrentTime:function(r,n){var m,q,p,o;if(!d.isNumeric(n)){Min="00";o="00"}else{m=Math.floor(Math.round(n)/60);q=Math.round(parseFloat(Math.round(n)-(m*60))*100)/100;p=m;if(m<10){p="0"+m}o=q;if(q<10){o="0"+q}}r.text(p+":"+o)},success:function(m,n){},buttonFullScreen:true,buttonSettings:false,buttonComments:false,buttonDownload:false,buttonFavorite:false,showTime:true,mode:"html"}}(jQuery));var WebVTTParser=function(){this.parse=function(k,h){var n=/\r\n|\r|\n/,k=k.replace(/\r\n/g,"!%%%%!"),k=k.replace(/\r/g,"!%%%%!"),k=k.replace(/\n/g,"!%%%%!"),o=k.split("!%%%%!"),a=new Date(),j=0,i=false,g=[],l=[];function c(q,p){l.push({message:q,line:j+1,col:p})}if(o[j].length<6||o[j].indexOf("WEBVTT")!==0||o[j].length>6&&o[j][6]!=" "&&o[j][6]!="\t"){c('No valid signature. (File needs to start with "WEBVTT".)')}j++;while(o[j]!==""&&o[j]!==undefined){c("No blank line after the signature.");if(o[j].indexOf("-->")!=-1){i=true;break}j++}while(o[j]!==undefined){var e;while(!i&&o[j]===""){j++}if(!i&&o[j]===undefined){break}e={id:"",startTime:0,endTime:0,pauseOnExit:false,direction:"horizontal",snapToLines:true,linePosition:"auto",textPosition:50,size:100,alignment:"middle",text:"",tree:null};var b=true;if(o[j].indexOf("-->")===-1){e.id=o[j];if(/^NOTE($|[ \t])/.test(e.id)){j++;while(o[j]!==""&&o[j]!==undefined){if(o[j].indexOf("-->")!=-1){c("Cannot have timestamp in a comment.")}j++}continue}j++;if(o[j]===""||o[j]===undefined){c("Cue identifier cannot be standalone.");continue}if(o[j].indexOf("-->")==-1){b=false;c("Cue identifier needs to be followed by timestamp.")}}i=false;var d=new WebVTTCueTimingsAndSettingsParser(o[j],c);var f=0;if(g.length>0){f=g[g.length-1].startTime}if(b&&!d.parse(e,f)){e=null;j++;while(o[j]!==""&&o[j]!==undefined){if(o[j].indexOf("-->")!=-1){i=true;break}j++}continue}j++;while(o[j]!==""&&o[j]!==undefined){if(o[j].indexOf("-->")!=-1){c("Blank line missing before cue.");i=true;break}if(e.text!==""){e.text+="\n"}e.text+=o[j];j++}var m=new WebVTTCueTextParser(e.text,c,h);e.tree=m.parse(e.startTime,e.endTime);g.push(e)}g.sort(function(q,p){if(q.startTime<p.startTime){return -1}if(q.startTime>p.startTime){return 1}if(q.endTime>p.endTime){return -1}if(q.endTime<p.endTime){return 1}return 0});return{cues:g,errors:l,time:(new Date())-a}}};var WebVTTCueTimingsAndSettingsParser=function(k,c){var h=/[\u0020\t\f]/,a=/[^\u0020\t\f]/,k=k,g=0,b=function(l){c(l,g+1)},j=true;function i(l){while(k[g]!==undefined&&l.test(k[g])){g++}}function f(l){var m="";while(k[g]!==undefined&&l.test(k[g])){m+=k[g];g++}return m}function d(){var l="minutes",p,o,n,m;if(k[g]===undefined){b("No timestamp found.");return}if(!/\d/.test(k[g])){b("Timestamp must start with a character in the range 0-9.");return}p=f(/\d/);if(p.length>2||parseInt(p,10)>59){l="hours"}if(k[g]!=":"){b("No time unit separator found.");return}g++;o=f(/\d/);if(o.length!=2){b("Must be exactly two digits.");return}if(l=="hours"||k[g]==":"){if(k[g]!=":"){b("No seconds found or minutes is greater than 59.");return}g++;n=f(/\d/);if(n.length!=2){b("Must be exactly two digits.");return}}else{n=o;o=p;p="0"}if(k[g]!="."){b('No decimal separator (".") found.');return}g++;m=f(/\d/);if(m.length!=3){b("Milliseconds must be given in three digits.");return}if(parseInt(o,10)>59){b("You cannot have more than 59 minutes.");return}if(parseInt(n,10)>59){b("You cannot have more than 59 seconds.");return}return parseInt(p,10)*60*60+parseInt(o,10)*60+parseInt(n,10)+parseInt(m,10)/1000}function e(n,l){var r=n.split(h),m=[];for(var p=0;p<r.length;p++){if(r[p]===""){continue}var o=r[p].indexOf(":"),q=r[p].slice(0,o);value=r[p].slice(o+1);if(m.indexOf(q)!=-1){b("Duplicate setting.")}m.push(q);if(value===""){b("No value for setting defined.");return}if(q=="vertical"){if(value!="rl"&&value!="lr"){b("Writing direction can only be set to 'rl' or 'rl'.");continue}l.direction=value}else{if(q=="line"){if(!/\d/.test(value)){b("Line position takes a number or percentage.");continue}if(value.indexOf("-",1)!=-1){b("Line position can only have '-' at the start.");continue}if(value.indexOf("%")!=-1&&value.indexOf("%")!=value.length-1){b("Line position can only have '%' at the end.");continue}if(value[0]=="-"&&value[value.length-1]=="%"){b("Line position cannot be a negative percentage.");continue}if(value[value.length-1]=="%"){if(parseInt(value,10)>100){b("Line position cannot be >100%.");continue}l.snapToLines=false}l.linePosition=parseInt(value,10)}else{if(q=="position"){if(value[value.length-1]!="%"){b("Text position must be a percentage.");continue}if(parseInt(value,10)>100){b("Size cannot be >100%.");continue}l.textPosition=parseInt(value,10)}else{if(q=="size"){if(value[value.length-1]!="%"){b("Size must be a percentage.");continue}if(parseInt(value,10)>100){b("Size cannot be >100%.");continue}l.size=parseInt(value,10)}else{if(q=="align"){var s=["start","middle","end","left","right"];if(s.indexOf(value)==-1){b("Alignment can only be set to one of "+s.join(", ")+".");continue}l.alignment=value}else{b("Invalid setting.")}}}}}}}this.parse=function(l,m){i(h);l.startTime=d();if(l.startTime===undefined){return}if(l.startTime<m){b("Start timestamp is not greater than or equal to start timestamp of previous cue.")}if(a.test(k[g])){b("Timestamp not separated from '-->' by whitespace.")}i(h);if(k[g]!="-"){b("No valid timestamp separator found.");return}g++;if(k[g]!="-"){b("No valid timestamp separator found.");return}g++;if(k[g]!=">"){b("No valid timestamp separator found.");return}g++;if(a.test(k[g])){b("'-->' not separated from timestamp by whitespace.")}i(h);l.endTime=d();if(l.endTime===undefined){return}if(l.endTime<=l.startTime){b("End timestamp is not greater than start timestamp.")}if(a.test(k[g])){j=false}i(h);e(k.substring(g),l);return true};this.parseTimestamp=function(){var l=d();if(k[g]!==undefined){b("Timestamp must not have trailing characters.");return}return l}};var WebVTTCueTextParser=function(b,c,e){var b=b,f=0,d=function(g){if(e=="metadata"){return}c(g,f+1)};this.parse=function(o,h){var q={children:[]},n=q,p=[];function l(r){n.children.push({type:"object",name:r[1],classes:r[2],children:[],parent:n});n=n.children[n.children.length-1]}function j(r){var s=n;while(s){if(s.name==r){return true}s=s.parent}return}while(b[f]!==undefined){var i=a();if(i[0]=="text"){n.children.push({type:"text",value:i[1],parent:n})}else{if(i[0]=="start tag"){if(e=="chapters"){d("Start tags not allowed in chapter title text.")}var g=i[1];if(g!="v"&&g!="lang"&&i[3]!==""){d("Only <v> and <lang> can have an annotation.")}if(g=="c"||g=="i"||g=="b"||g=="u"||g=="ruby"){l(i)}else{if(g=="rt"&&n.name=="ruby"){l(i)}else{if(g=="v"){if(j("v")){d("<v> cannot be nested inside itself.")}l(i);n.value=i[3];if(!i[3]){d("<v> requires an annotation.")}}else{if(g=="lang"){l(i);n.value=i[3]}else{d("Incorrect start tag.")}}}}}else{if(i[0]=="end tag"){if(e=="chapters"){d("End tags not allowed in chapter title text.")}if(i[1]==n.name){n=n.parent}else{if(i[1]=="ruby"&&n.name=="rt"){n=n.parent.parent}else{d("Incorrect end tag.")}}}else{if(i[0]=="timestamp"){if(e=="chapters"){d("Timestamp not allowed in chapter title text.")}var k=new WebVTTCueTimingsAndSettingsParser(i[1],d),m=k.parseTimestamp();if(m!==undefined){if(m<=o||m>=h){d("Timestamp must be between start timestamp and end timestamp.")}if(p.length>0&&p[p.length-1]>=m){d("Timestamp must be greater than any previous timestamp.")}n.children.push({type:"timestamp",value:m,parent:n});p.push(m)}}}}}}while(n.parent){if(n.name!="v"){d("Required end tag missing.")}n=n.parent}return q};function a(){var j="data",g="",h="",i=[];while(b[f-1]!==undefined||f===0){var k=b[f];if(j=="data"){if(k=="&"){h=k;j="escape"}else{if(k=="<"&&g===""){j="tag"}else{if(k=="<"||k===undefined){return["text",g]}else{g+=k}}}}else{if(j=="escape"){if(k=="&"){d("Incorrect escape.");g+=h;h=k}else{if(/[abglmnsprt]/.test(k)){h+=k}else{if(k==";"){if(h=="&amp"){g+="&"}else{if(h=="&lt"){g+="<"}else{if(h=="&gt"){g+=">"}else{if(h=="&lrm"){g+="\u200e"}else{if(h=="&rlm"){g+="\u200f"}else{if(h=="&nbsp"){g+="\u00A0"}else{d("Incorrect escape.");g+=h+";"}}}}}}j="data"}else{if(k=="<"||k===undefined){d("Incorrect escape.");g+=h;return["text",g]}else{d("Incorrect escape.");g+=h+k;j="data"}}}}}else{if(j=="tag"){if(k=="\t"||k=="\n"||k=="\f"||k==" "){j="start tag annotation"}else{if(k=="."){j="start tag class"}else{if(k=="/"){j="end tag"}else{if(/\d/.test(k)){g=k;j="timestamp tag"}else{if(k==">"||k===undefined){if(k==">"){f++}return["start tag","",[],""]}else{g=k;j="start tag"}}}}}}else{if(j=="start tag"){if(k=="\t"||k=="\f"||k==" "){j="start tag annotation"}else{if(k=="\n"){h=k;j="start tag annotation"}else{if(k=="."){j="start tag class"}else{if(k==">"||k===undefined){if(k==">"){f++}return["start tag",g,[],""]}else{g+=k}}}}}else{if(j=="start tag class"){if(k=="\t"||k=="\f"||k==" "){i.push(h);h="";j="start tag annotation"}else{if(k=="\n"){i.push(h);h=k;j="start tag annotation"}else{if(k=="."){i.push(h);h=""}else{if(k==">"||k===undefined){if(k==">"){f++}i.push(h);return["start tag",g,i,""]}else{h+=k}}}}}else{if(j=="start tag annotation"){if(k==">"||k===undefined){if(k==">"){f++}h=h.split(/[\u0020\t\f\r\n]+/).filter(function(l){if(l){return true}}).join(" ");return["start tag",g,i,h]}else{h+=k}}else{if(j=="end tag"){if(k==">"||k===undefined){if(k==">"){f++}return["end tag",g]}else{g+=k}}else{if(j=="timestamp tag"){if(k==">"||k===undefined){if(k==">"){f++}return["timestamp",g]}else{g+=k}}else{d("Never happens.")}}}}}}}}f++}}};var WebVTTSerializer=function(){function b(d){var c="";for(var e=0;e<d.length;e++){var f=d[e];if(f.type=="text"){c+=f.value}else{if(f.type=="object"){c+="<"+f.name;if(f.classes){for(var g=0;g<f.classes.length;g++){c+="."+f.classes[g]}}if(f.value){c+=" "+f.value}c+=">";if(f.children){c+=b(f.children)}c+="</"+f.name+">"}else{c+="<"+f.value+">"}}}return c}function a(c){return c.startTime+" "+c.endTime+"\n"+b(c.tree.children)+"\n\n"}this.serialize=function(d){var c="";for(var e=0;e<d.length;e++){c+=a(d[e])}return c}};
var NetexAudioBridge={fireEvent:function(c,b,a){$("[data-audio-player-id='"+c+"']").trigger(b,a)}};(function(c){c.fn.audioNetex=function(k){var m=c.extend({},c.fn.audioNetex.defaults,k),n,l;return this.filter(".netex-audio-player").each(function(){if(d.isTouch){c(this).addClass("touch")}j(f(c(this)),m);var o=i(c(this),m);n=o.objApi;l=o.objApiListen;a(c(this),m,n,l);h(c(this),n,l)})};function i(o,l){var n,k;if(l.mode!=="html"){var m=c(o.find("source")[0]).attr("src");if(l.mode==="flash"){e(o,l,m);n=o.find("object");k=o}else{if(l.mode==="download"){}}}else{n=k=o.find("audio")}return{objApi:n,objApiListen:k}}function e(n,l,m){var k=n.attr("data-audio-player-id"),p=d.isIE?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"':"",o=n.attr("data-audio-swf-url");n.find("audio").after('<object  id="'+k+'" name="'+k+'" '+p+' type="application/x-shockwave-flash" width="1" height="1" data="'+o+'"><param name="movie" value="'+o+'" /><param name="allowScriptAccess" value="always" /><param name="flashvars" value="file='+m+'" /><param name="wmode" value="transparent" /></object>');n.find("audio").remove()}function f(k){return c.map(c(k).find("source"),function(n,m){var l=c.inArray(c(n).attr("type"),["audio/ogg","audio/mpeg","audio/wav"]);return l!==-1?["ogg","mp3","wav"][l]:""})}function j(k,l){if(l.mode!=="download"){var m;m=(b!==false&&(c.inArray("probably",c.map(k,function(n){return b[n]}))!==-1)||c.inArray("maybe",c.map(k,function(n){return b[n]}))!==-1);if(l.mode==="html"){if(!m){l.mode=g!==false?"flash":"download"}}else{if(l.mode==="flash"&&!g){l.mode=m===true?"html":"download"}}}}function a(n,l,m,k){n.find(".netex-audio-progress-bar").width("100%");k.on("play",function(o){n.find(".netex-audio-button-play-pause-restart").removeClass("netex-audio-button-play netex-audio-button-restart").addClass("netex-audio-button-pause")}).on("seeked",function(o){n.find(".netex-audio-button-play-pause-restart").removeClass("netex-audio-button-play netex-audio-button-restart").addClass("netex-audio-button-pause")}).on("pause",function(o){n.find(".netex-audio-button-play-pause-restart").removeClass("netex-audio-button-pause").addClass("netex-audio-button-play")}).on("ended",function(o){n.find(".netex-audio-button-play-pause-restart").removeClass("netex-audio-button-pause netex-audio-button-play").addClass("netex-audio-button-restart")}).on("timeupdate",function(r,q){var p=c(r.currentTarget)[0];if(q){p=q}var o=p.currentTime;l.formatDurationTime(n.find(".netex-audio-time-current"),o);l.formatDurationTime(n.find(".netex-audio-time-duration"),p.duration);n.find(".netex-audio-subtitle-container:visible > div").each(function(s,t){c(t).removeClass("active").addClass(((o>=+c(t).attr("data-start"))&&(o<+c(t).attr("data-end")))?"active":"")});n.find(".netex-audio-progress-bar-inner").width((o*100)/p.duration+"%");o=null}).on("durationchange",function(o){}).on("progress",function(p){var o=null;if(p.currentTarget&&p.currentTarget.buffered&&p.currentTarget.buffered.length>0&&p.currentTarget.buffered.end&&p.currentTarget.duration){o=p.currentTarget.buffered.end(0)/p.currentTarget.duration}else{if(p.currentTarget&&p.currentTarget.bytesTotal!==undefined&&p.currentTarget.bytesTotal>0&&p.currentTarget.bufferedBytes!==undefined){o=p.currentTarget.bufferedBytes/p.currentTarget.bytesTotal}else{if(p&&p.lengthComputable&&p.total!==0){o=p.loaded/p.total}}}if(o!==null){o=Math.min(1,Math.max(0,o))*100;n.find(".netex-audio-progress-bar").width("100%")}}).on("volumechange",function(p,o){var q;if(o){q=o.volume}else{q=p.currentTarget.muted?0:p.currentTarget.volume}n.find(".netex-audio-volume-button").removeClass("netex-audio-volume-small netex-audio-volume-medium netex-audio-volume-large netex-audio-volume-mute").addClass(q===0?"netex-audio-volume-mute":"").addClass(q>0&&q<=0.2?"netex-audio-volume-small":"").addClass(q>0.2&&q<=0.8?"netex-audio-volume-medium":"").addClass(q>0.8?"netex-audio-volume-large":"");n.find(".netex-audio-volume-slider-foreground").width(q*100+"%")})}function h(m,l,k){m.find(".netex-audio-button-play-pause-restart").off("click").on("click",function(n){if(c(this).hasClass("netex-audio-button-play")){if(l[0].playMedia){l[0].playMedia()}else{l[0].play()}}if(c(this).hasClass("netex-audio-button-pause")){if(l[0].pauseMedia){l[0].pauseMedia()}else{l[0].pause()}}if(c(this).hasClass("netex-audio-button-restart")){if(l[0].playMedia){l[0].playMedia()}else{l[0].play()}}}).end().find(".netex-audio-volume-button").off("click").on("click",function(n){if(!c(this).hasClass("netex-audio-volume-mute")){if(l[0].setMute){l[0].setMute(true)}else{l[0].muted=true}}if(c(this).hasClass("netex-audio-volume-mute")){if(l[0].setMute){l[0].setMute(false)}else{l[0].muted=false}}}).end().find(".netex-audio-progress-bar").off("click").on("click",function(n){var o=(n.pageX-c(n.currentTarget).parent().offset().left)/c(n.currentTarget).width();if(l[0].setCurrentTime){l[0].setCurrentTime(l[0].getDuration()*o);l[0].playMedia()}else{if(isNaN(l[0].duration)){return}l[0].currentTime=l[0].duration*o;l[0].play()}}).end().find(".netex-audio-volume-slider").off("click").on("click",function(n){var o=(n.pageX-c(n.currentTarget).parent().offset().left)/c(n.currentTarget).width();if(l[0].setVolume){l[0].setVolume(o)}else{l[0].volume=o}})}var b=(function(){var l=document.createElement("audio"),k=false;try{if(k=!!l.canPlayType){k=new Boolean(k);k.ogg=l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");k.mp3=l.canPlayType("audio/mpeg;").replace(/^no$/,"");k.wav=l.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");k.m4a=(l.canPlayType("audio/x-m4a;")||l.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(m){}return k})();var g=(function(){var l=false;if(window.ActiveXObject){var q=null;try{q=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(p){return}if(q){l=new Boolean(true);l.version=q.GetVariable("$version").substring(4);l.version=l.version.split(",")[0]}}else{var o="Shockwave Flash";var r="application/x-shockwave-flash";var m=navigator.plugins[o];if(m===undefined){return undefined}else{l=new Boolean(true);var n=m.description;if(n&&!(typeof m.mimeTypes!="undefined"&&m.mimeTypes[r]&&!m.mimeTypes[r].enabledPlugin)){var k=n.replace(o,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");l.version=parseInt(k[0].match(/\d+/),10)}}}return l})();var d=(function(){var k={};k.isIE=((/MSIE (\d+\.\d+);/.test(navigator.userAgent)===true)||(!!(navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv:11/))));k.isTouch=(function(){var l=false;if(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch){l=true}return l})();k.isAndroid_40_41_42_43=(function(){var l=false;var n=n||navigator.userAgent;var m=n.match(/Android\s([0-9\.]*)/);if(m&&parseFloat(m[1],10)<4.4){l=true}return l})();return k})();c.fn.audioNetex.defaults={formatDurationTime:function(n,l){var k,p,o,m;if(!c.isNumeric(l)){o="00";m="00"}else{k=Math.floor(Math.round(l)/60);p=Math.round(parseFloat(Math.round(l)-(k*60))*100)/100;o=k;if(k<10){o="0"+k}m=p;if(p<10){m="0"+p}}n.text(o+":"+m)},formatCurrentTime:function(p,l){var k,o,n,m;if(!c.isNumeric(l)){Min="00";m="00"}else{k=Math.floor(Math.round(l)/60);o=Math.round(parseFloat(Math.round(l)-(k*60))*100)/100;n=k;if(k<10){n="0"+k}m=o;if(o<10){m="0"+o}}p.text(n+":"+m)},success:function(k,l){},showTime:true,buttonVolume:true,mode:"html"}}(jQuery));
Basic.Router.CourseRouter=Backbone.Router.extend({routes:{"":"index","lang/:lang":"lang","lang/:lang/pag/:pag":"page","lang/:lang/pag/:pag/sec/:sec":"section"},index:function(){var a,b;if(Basic.Singleton.TrackingModel.get("locationId")===""){if(Basic.Singleton.RouterModel.get("lang")===null){a=Basic.Singleton.HeaderCollection.pluck("lang");b=_.indexOf(a,NetexUtils.getNavigatorLang)===-1?a[0]:NetexUtils.getNavigatorLang;this.navigate("#/lang/"+b)}}else{this.navigate(Basic.Singleton.TrackingModel.get("locationId"))}},lang:function(a){Basic.Singleton.RouterModel.set({lang:a},{validate:true});if(Basic.Singleton.RouterModel.get("page")===null){this.navigate("#/lang/"+Basic.Singleton.RouterModel.get("lang")+"/pag/0")}},page:function(b,a){Basic.Singleton.RouterModel.set({lang:b,page:+a},{validate:true})},section:function(c,a,b){Basic.Singleton.RouterModel.set({lang:c,page:+a,section:+b},{validate:true})}});
function equalizeTabsSize(){var a=$(".tabs");setTimeout(function(){for(i=0;i<=a.length-1;i++){var e=a.eq(i).find(".nav-tabs li").eq(0).addClass("active"),c=e.data("ref"),b=a.eq(i).find(".nav-tabs"),g=a.eq(i).find(".nav-tabs li"),d=b.height();e.siblings().removeClass("active");e.parent().siblings(".tabs-content").fadeOut(0);e.parent().siblings('[id="'+c+'"]').fadeIn(0);if(g.length<3){b.addClass("autosize")}for(var f=0;f<g.length;f++){g.eq(f).height(d-24)}}},100)}$(document).ready(function(){$("body").on("click",".nav-tabs li",function(c){var b=$(this),a=b.closest(".nav-tabs").attr("id");if(b.closest(".nav-tabs").attr("id")==a){b.siblings().removeClass("active");b.addClass("active")}idTab=b.data("ref");b.parent().siblings(".tabs-content").fadeOut(0);b.parent().siblings('[id="'+idTab+'"]').fadeIn(0);c.preventDefault();actual=$(".tabs-content[rel='"+idTab+"']");actual.fadeIn(0);$(window).trigger("resize");setTimeout(function(){$(window).trigger("resize")},1500)});if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){$(".accordion .header").children().css("display","block")}$("body").on("click",".accordion .header",function(){var a=$(this).parent(),c=$(this);if(a.parent().hasClass("no-autocollapse")){c.toggleClass("active").siblings().slideToggle(1000);c.children().toggleClass("opened");c.siblings().children(".sprite-accordion").removeClass("opened")}else{c.toggleClass("active").siblings().slideToggle(1000);c.children().toggleClass("opened");c.siblings().children(".sprite-accordion").removeClass("opened");var b=a.siblings().children(".accordion-content");for(i=0;i<=b.length-1;i++){if($(b.get(i)).siblings(".header").hasClass("active")){$(b.get(i)).siblings(".header").removeClass("active");$(b.get(i)).slideToggle(1000)}}}$(window).trigger("resize");setTimeout(function(){$(window).trigger("resize")},1500)})});(function(a){a.fn.extend({blueberry:function(b){var c={interval:5000,duration:1000,lineheight:1,height:"auto",hoverpause:false,pager:true,nav:true,keynav:true};var b=a.extend(c,b);return this.each(function(){var f=b;var q=a(this);var d=a(".slides li",q);var k=a(".pager li",q);var s=0;var r=s+1;var m=s-1;var u=d.eq(s).find("img").height();var t=d.eq(s).find("img").width();var j=t/u;var l=0;var v=0;d.hide().eq(s).fadeIn(f.duration).addClass("active");if(k.length){k.eq(s).addClass("active")}else{if(f.pager){q.append('<ul class="pager"></ul>');d.each(function(o){a(".pager",q).append('<li><a href="#"><span>'+o+"</span></a></li>")});k=a(".pager li",q);k.eq(s).addClass("active")}}if(k){a("a",k).click(function(){r=a(this).parent().index();n();return false})}var p=a(".slider-nav.next",q),g=a(".slider-nav.prev",q);p.click(function(o){o.preventDefault();d.eq(s).fadeOut(f.duration).removeClass("active").end().eq(r).fadeIn(f.duration).addClass("active").queue(function(){a(this).dequeue()});if(k){k.eq(s).removeClass("active").end().eq(r).addClass("active")}s=r;r=s>=d.length-1?0:s+1;if(s>=d.length-1){m=d.length-2}else{m=s-1}});g.click(function(o){o.preventDefault();d.eq(s).fadeOut(f.duration).removeClass("active").end().eq(m).fadeIn(f.duration).addClass("active").queue(function(){a(this).dequeue()});if(k){k.eq(s).removeClass("active").end().eq(m).addClass("active")}if(s<=0){s=d.length-1;m=s-1;r=0}else{s=m;m=s-1;r=s+1}});var n=function(){d.eq(s).fadeOut(f.duration).removeClass("active").end().eq(r).fadeIn(f.duration).addClass("active").queue(function(){a(this).dequeue()});if(k){k.eq(s).removeClass("active").end().eq(r).addClass("active")}s=r;r=s>=d.length-1?0:s+1};var h=function(){q.play=setTimeout(function(){n()},f.interval)};if(f.hoverpause){d.hover(function(){},function(){})}var e=function(){l=a(".slides",q).width();v=Math.floor(((l/j)/f.lineheight))*f.lineheight;if(v>0){}};e();a(window).resize(function(){e()});if(f.keynav){a(document).keyup(function(o){switch(o.which){case 39:case 32:clearTimeout(q.play);n();break;case 37:clearTimeout(q.play);r=s-1;n();break}})}})}})})(jQuery);
(function(a){a.fn.extend({easyResponsiveTabs:function(k){var c={type:"default",width:"auto",fit:true,closed:false,tabidentify:"",activate:function(){}};var k=a.extend(c,k);var b=k,g=b.type,j=b.fit,i=b.width,e="vertical",f="accordion";var d=window.location.hash;var h=!!(window.history&&history.replaceState);a(this).bind("tabactivate",function(l,m){if(typeof k.activate==="function"){k.activate.call(m,l)}});this.each(function(){var p=a(this);var t=p.find("ul.resp-tabs-list."+k.tabidentify);var s=p.attr("id");p.find("ul.resp-tabs-list."+k.tabidentify+" li").addClass("resp-tab-item").addClass(k.tabidentify);p.css({display:"block",width:i});if(k.type=="vertical"){t.css("margin-top","3px")}p.find(".resp-tabs-container."+k.tabidentify).css("border-color",k.active_content_border_color);p.find(".resp-tabs-container."+k.tabidentify+" > div").addClass("clearfix").addClass("resp-tab-content").addClass(k.tabidentify);r();function r(){if(g==e){p.addClass("resp-vtabs").addClass(k.tabidentify)}if(j==true){p.css({width:"100%",margin:"0px"})}if(g==f){p.addClass("resp-easy-accordion").addClass(k.tabidentify);p.find(".resp-tabs-list").css("display","none")}}var m;p.find(".resp-tab-content."+k.tabidentify).before("<h2 class='resp-accordion "+k.tabidentify+"' role='tab'><span class='resp-arrow'></span></h2>");p.find(".resp-tab-content."+k.tabidentify).prev("h2").css({"background-color":k.inactive_bg,"border-color":k.active_border_color});var l=0;p.find(".resp-accordion").each(function(){m=a(this);var w=p.find(".resp-tab-item:eq("+l+")");var v=p.find(".resp-accordion:eq("+l+")");v.append(w.html());v.data(w.data());m.attr("aria-controls",k.tabidentify+"_tab_item-"+(l));l++});var q=0,u;p.find(".resp-tab-item").each(function(){$tabItem=a(this);$tabItem.attr("aria-controls",k.tabidentify+"_tab_item-"+(q));$tabItem.attr("role","tab");$tabItem.css({"background-color":k.inactive_bg,"border-color":"none"});var v=0;p.find(".resp-tab-content."+k.tabidentify).each(function(){u=a(this);u.attr("aria-labelledby",k.tabidentify+"_tab_item-"+(v)).css({"border-color":k.active_border_color});v++});q++});var n=0;if(d!=""){var o=d.match(new RegExp(s+"([0-9]+)"));if(o!==null&&o.length===2){n=parseInt(o[1],10)-1;if(n>q){n=0}}}a(p.find(".resp-tab-item."+k.tabidentify)[n]).addClass("resp-tab-active").css({"background-color":k.activetab_bg,"border-color":k.active_border_color});if(k.closed!==true&&!(k.closed==="accordion"&&!t.is(":visible"))&&!(k.closed==="tabs"&&t.is(":visible"))){a(p.find(".resp-accordion."+k.tabidentify)[n]).addClass("resp-tab-active").css({"background-color":k.activetab_bg+" !important","border-color":k.active_border_color});a(p.find(".resp-tab-content."+k.tabidentify)[n]).addClass("resp-tab-content-active").addClass(k.tabidentify).attr("style","display:block")}else{}p.find("[role=tab]").each(function(){var v=a(this);v.click(function(){var x=a(this);var w=x.attr("aria-controls");if(x.hasClass("resp-accordion")&&x.hasClass("resp-tab-active")){p.find(".resp-tab-content-active."+k.tabidentify).slideUp("",function(){a(this).addClass("resp-accordion-closed")});x.removeClass("resp-tab-active").css({"background-color":k.inactive_bg,"border-color":"none"});return false}if(!x.hasClass("resp-tab-active")&&x.hasClass("resp-accordion")){p.find(".resp-tab-active."+k.tabidentify).removeClass("resp-tab-active").css({"background-color":k.inactive_bg,"border-color":"none"});p.find(".resp-tab-content-active."+k.tabidentify).slideUp().removeClass("resp-tab-content-active resp-accordion-closed");p.find("[aria-controls="+w+"]").addClass("resp-tab-active").css({"background-color":k.activetab_bg,"border-color":k.active_border_color});p.find(".resp-tab-content[aria-labelledby = "+w+"]."+k.tabidentify).slideDown().addClass("resp-tab-content-active")}else{p.find(".resp-tab-active."+k.tabidentify).removeClass("resp-tab-active").css({"background-color":k.inactive_bg,"border-color":"none"});p.find(".resp-tab-content-active."+k.tabidentify).removeAttr("style").removeClass("resp-tab-content-active").removeClass("resp-accordion-closed");p.find("[aria-controls="+w+"]").addClass("resp-tab-active").css({"background-color":k.activetab_bg,"border-color":k.active_border_color});p.find(".resp-tab-content[aria-labelledby = "+w+"]."+k.tabidentify).addClass("resp-tab-content-active").attr("style","display:block")}x.trigger("tabactivate",x)})});a(window).resize(function(){p.find(".resp-accordion-closed").removeAttr("style")})})}})})(jQuery);